<<<<<<< HEAD
"use strict";function LoginModalController($uibModalInstance,djangoAuth,$rootScope,$state){var vm=this;vm.error={},vm.loginButtonPressed=function(username,password){vm.error.username="",vm.error.password="",vm.error.general=[],username||password?username?password?djangoAuth.login(username,password).then(function(response){"undefined"==typeof $rootScope.toState||/signup/.test($rootScope.toState.name)||/reset-password/.test($rootScope.toState.name)?$state.go("search"):$state.go($rootScope.toState.name,$rootScope.toStateParams),$uibModalInstance.close()},function(response){vm.error.general=response.general_errors}):(vm.error.password="Password is required",vm.error.general=["Password is required"]):(vm.error.username="Username is required",vm.error.general=["Username is required"]):(vm.error.username="Username is required",vm.error.password="Password is required",vm.error.general=["Username and password are required"])},vm.registerButtonPressed=function(){$uibModalInstance.close(),$state.go("signup")},vm.forgotButtonPressed=function(){$uibModalInstance.close(),$state.go("reset-password")}}function WorkflowModalCtrl($modalInstance,workflow){var vm=this;vm.workflow=workflow,vm.currentTitle="",vm.currentDescription="",vm.currentEdam="",vm.mapDimensions=function(annotation){return vm.mapXDimension(annotation.startX)+","+vm.mapYDimension(annotation.startY)+","+vm.mapXDimension(annotation.endX)+","+vm.mapYDimension(annotation.endY)},vm.imageHeight=function(){var img=document.getElementById("image");return img.clientHeight},vm.imageWidth=function(){var img=document.getElementById("image");return img.clientWidth},vm.mapXDimension=function(dim_x){var multiplier_x=vm.imageWidth()/vm.workflow.width;return dim_x*multiplier_x},vm.mapYDimension=function(dim_y){var multiplier_y=vm.imageHeight()/vm.workflow.height;return dim_y*multiplier_y},vm.hover=function(annotation){vm.currentTitle=annotation.title,vm.currentDescription=annotation.description,vm.currentEdam=annotation.edam_term},vm.endHover=function(annotation){vm.currentTitle="",vm.currentDescription="",vm.currentEdam=""}}var elixir_front=angular.module("elixir_front",["elixir_front.filters","elixir_front.services","elixir_front.directives","elixir_front.controllers","ui.bootstrap","ngCookies","ngRoute","ngSanitize","ngAnimate","ngResource","ui.router","angularBootstrapNavTree","treeControl","720kb.tooltips","yaru22.angular-timeago","angularDjangoRegistrationAuthApp","ngTagsInput","pasvaz.bindonce","ui.grid","ui.grid.resizeColumns","ui.grid.autoResize","ui.grid.saveState","ui.grid.moveColumns","chart.js","ngMeta"],function($rootScopeProvider){}).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.when("","/search"),$urlRouterProvider.otherwise("/404"),$stateProvider.state("404",{url:"/404",templateUrl:"partials/404.html",data:{meta:{title:"Page not found"},roles:[]},resolve:{}}).state("home",{url:"/search",templateUrl:"partials/search_results.html",data:{meta:{title:"bio.tools 路 Bioinformatics Tools and Services Discovery Portal",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services",titleSuffix:"","og:title":"bio.tools 路 Bioinformatics Tools and Services Discovery Portal","og:description":"A registry of bioinformatics software resources including biological databases, analytical tools and data services","og:image":"https://bio.tools/img/ELIXIR_logo_white_background_small.png"},roles:[]},controller:"SearchResultController"}).state("about",{url:"/about",templateUrl:"components/about/about.html",data:{meta:{title:"About",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services"},roles:[]},resolve:{}}).state("schema",{url:"/schema",templateUrl:"partials/schema.html",data:{roles:[]},resolve:{}}).state("stats",{url:"/stats",templateUrl:"components/stats/stats.html",data:{meta:{title:"Stats",description:"bio.tools content statistics."},roles:[]},controller:"StatsController",resolve:{}}).state("search",{url:"/?page&q&id&name&topic&function&operation&input&inputDataFormat&inputDataType&output&outputDataFormat&outputDataType&homepage&description&version&accessibility&toolType&collectionID&contact&elixirInfo&maturity&operatingSystem&language&cost&license&documentation&link&download&publication&credit&owner&sort&ord&domain",templateUrl:"partials/search_results.html",data:{meta:{title:"bio.tools 路 Bioinformatics Tools and Services Discovery Portal",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services",titleSuffix:"","og:title":"bio.tools 路 Bioinformatics Tools and Services Discovery Portal","og:description":"A registry of bioinformatics software resources including biological databases, analytical tools and data services","og:image":"https://bio.tools/img/ELIXIR_logo_white_background_small.png"},roles:[]},controller:"SearchResultController"}).state("register",{url:"/register",templateUrl:"partials/toolEdit.html",data:{meta:{title:"Register new resource",description:"Register a tool or database in bio.tools.","og:title":"Register new resource","og:description":"Register a tool or database in bio.tools."},roles:["User"]},controller:"ToolCreateController",resolve:{}}).state("edit-subdomain",{url:"/edit-subdomain/:id",templateUrl:"partials/subdomains/subdomainEdit.html",data:{meta:{title:"Edit subdomain","og:title":"Edit subdomain"},roles:["User"]},controller:"SubdomainController",resolve:{}}).state("admin-subdomain",{url:"/subdomain",templateUrl:"partials/subdomains/subdomainPage.html",data:{meta:{title:"Subdomain","og:title":"Subdomain"},roles:["User"]},controller:"SubdomainAdminController",resolve:{}}).state("login",{url:"/login",templateUrl:"partials/login.html",data:{meta:{title:"Log in",description:"Log in to bio.tools.","og:title":"Log in","og:description":"Log in to bio.tools."},roles:[]},controller:"LoginController",resolve:{}}).state("signup",{url:"/signup",templateUrl:"partials/signup.html",data:{meta:{title:"Sign up",description:"Sign up for bio.tools.","og:title":"Sign up","og:description":"Sign up for bio.tools."},roles:[]},controller:"SignupController"}).state("signup.success",{url:"/success",templateUrl:"partials/signupSuccess.html",data:{meta:{title:"Sign up success"},roles:[]}}).state("signup.verify-email",{"abstract":!0,url:"/verify-email",template:"<ui-view/>",data:{meta:{title:"Verify email"},roles:[]}}).state("signup.verify-email.success",{url:"/success",templateUrl:"partials/signupVerifyEmailSuccess.html",data:{meta:{title:"Verification success"},roles:[]}}).state("signup.verify-email.key",{url:"/:key",templateUrl:"partials/signupVerifyEmailKey.html",data:{meta:{title:"Verify email"},roles:[]},controller:"SignupVerifyEmailKeyController"}).state("reset-password",{url:"/reset-password",templateUrl:"partials/resetPassword.html",data:{meta:{title:"Reset password"},roles:[]},controller:"ResetPasswordController"}).state("reset-password.confirm",{url:"/confirm?uid&token",templateUrl:"partials/resetPasswordConfirm.html",data:{meta:{title:"Reset password"},roles:[]},controller:"ResetPasswordConfirmController"}).state("reset-password.confirm.success",{url:"/success",templateUrl:"partials/resetPasswordConfirmSuccess.html",data:{meta:{title:"Reset password success"},roles:[]}}).state("profile",{url:"/profile",templateUrl:"components/profile/profile.html",data:{meta:{title:"My profile"},roles:[]},controller:"ProfileController"}).state("subdomain",{url:"/?:domain"}).state("requests",{url:"/requests",templateUrl:"partials/requests.html",data:{roles:[]},controller:"RequestsController"}).state("workflows",{url:"/workflows",templateUrl:"partials/workflows/workflows.html",data:{roles:[]},controller:"WorkflowController"}).state("tool-explicit",{url:"/tool/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool-explicit-short",{url:"/t/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool",{url:"/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool.edit",{url:"/edit",templateUrl:"partials/toolEdit.html",data:{roles:["User"]},controller:"ToolUpdateController",resolve:{}}).state("governance",{url:"/governance",redirect:"http://biotools.readthedocs.io/en/latest/governance.html",external:!0,data:{roles:[]},resolve:{}}).state("events",{url:"/events",redirect:"https://docs.google.com/document/d/1K-6IG_7a-4amstSSOxYjjJ3uDUEg4-WGSSt9jvvO7Ik/edit#heading=h.twop51kvyu80",external:!0,data:{roles:[]},resolve:{}}).state("mail",{url:"/mail",redirect:"http://elixirmail.cbs.dtu.dk/mailman/listinfo",external:!0,data:{roles:[]},resolve:{}}).state("faq",{url:"/faq",redirect:"https://docs.google.com/document/d/1WdcY0WQJVdRHz0BAhII7s8gygxKRJaHZC4gOnAC1eqs/edit",external:!0,data:{roles:[]},resolve:{}}).state("apidoc",{url:"/apidoc",redirect:"https://docs.google.com/document/d/1c1zridWLBNSrWcYyR2fnBfgjWfrUSrT7HJ6Ql6ZCkS4/edit#heading=h.9a2zbl9ka0z0",external:!0,data:{roles:[]},resolve:{}}).state("changelog",{url:"/changelog",redirect:"https://docs.google.com/document/d/1C5KFu2t4OIAuUpx6dS7Djsa9y3zgicd8naOsAs9QPAY/edit#heading=h.eu5jkfa77et",external:!0,data:{roles:[]},resolve:{}}).state("helpdesk",{url:"/helpdesk",redirect:"https://elixir-registry.atlassian.net/servicedesk/customer/portal/2/user/login?destination=portal%2F2",external:!0,data:{roles:[]},resolve:{}}).state("projects",{url:"/projects",redirect:"https://docs.google.com/document/d/1QBIZHBzHxxmvSnOG3xK6t3SCeft5g4AH2rVICLRLmDw/edit#heading=h.a6i4b9p7xdw7",external:!0,data:{roles:[]},resolve:{}}).state("roadmap",{url:"/roadmap",redirect:"https://docs.google.com/document/d/17iH72hmwVo205QVEkptv7GTMlqFojatIwMmxVOyuPy8/edit#heading=h.m1jhkecru8xq",external:!0,data:{roles:[]},resolve:{}})}]).config(function($locationProvider){$locationProvider.html5Mode(!0).hashPrefix("!")}).config(function(tooltipsConfigProvider){tooltipsConfigProvider.options({speed:"fast","try":0})}).run(function($rootScope,$window){$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){toState.external&&(event.preventDefault(),$window.open(toState.redirect,"_self"))})}).run(["ngMeta",function(ngMeta){ngMeta.init()}]).config(function(ngMetaProvider){ngMetaProvider.useTitleSuffix(!0),ngMetaProvider.setDefaultTitle("bio.tools")}).run(["$rootScope","$state","$timeout","User","djangoAuth","$http",function($rootScope,$state,$timeout,User,djangoAuth,$http){User.authenticated=!1;var logInCallback=function(){User.authenticated=!0,djangoAuth.profile().then(function(response){User.current=response})},wrongAuthCallback=function(){delete $http.defaults.headers.common.Authorization,delete localStorage.token,User.authenticated=!1,User.current={}},logOutCallback=function(){wrongAuthCallback(),$state.go("search")},authenticationPromise=djangoAuth.authenticationStatus(!0).then(logInCallback,wrongAuthCallback);$rootScope.$on("djangoAuth.logged_in",logInCallback),$rootScope.$on("djangoAuth.logged_out",logOutCallback),$rootScope.$on("$stateChangeStart",function(event,toState,toStateParams,fromState,fromStateParams){"login"!=toState.name&&($rootScope.toState=toState,$rootScope.toStateParams=toStateParams),$rootScope.fromState=fromState,"undefined"==typeof toState.resolve&&(toState.resolve={}),toState.resolve.pauseStateChange=["$q",function($q){var defer=$q.defer();return authenticationPromise.then(function(){!User.authenticated&&_.includes(toState.data.roles,"User")&&(event.preventDefault(),$rootScope.returnToState=$rootScope.toState,$rootScope.returnToStateParams=$rootScope.toStateParams,$state.go("login")),defer.resolve()}),defer.promise}]}),$rootScope.$on("$stateChangeError",function(event){$state.go("404")})}]).run(["$rootScope","$timeout","$state",function($rootScope,$timeout,$state){function getTextValue(text){return angular.isFunction(text)?text():text}$rootScope.$on("$stateChangeSuccess",function(){var title=getTextValue($state.$current.locals.globals.$title),description=getTextValue($state.$current.locals.globals.$description);title&&$timeout(function(){$rootScope.$title=title}),description&&$timeout(function(){$rootScope.$description=description})})}]);angular.module("elixir_front.controllers",[]).controller("ToolGridController",["$scope","$timeout","ToolList","ToolTableDataSource",function($scope,$timeout,ToolList,ToolTableDataSource){$scope.ToolList=ToolList,$scope.savedStateExists=function(){return!!localStorage.getItem("gridState")},$scope.saveState=function(){var state=$scope.gridApi.saveState.save();localStorage.setItem("gridState",JSON.stringify(state))},$scope.restoreState=function(){$timeout(function(){var state=localStorage.getItem("gridState");state&&$scope.gridApi.saveState.restore($scope,JSON.parse(state))})},$scope.gridOptions={enableSorting:!1,enableColumnMenus:!0,enableColumnResizing:!0,enableVerticalScrollbar:0,enableHorizontalScrollbar:!0,columnVirtualizationThreshold:ToolTableDataSource.columnsDescription([]).length,data:ToolList.list,columnDefs:ToolTableDataSource.columnsDescription(1==$scope.savedStateExists()?[]:["Name","Description","Homepage","Credits","Operation","Topic","Input","Output"]),rowHeight:135,enableGridMenu:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,$scope.restoreState(),$scope.gridApi.core.on.columnVisibilityChanged($scope,function(column){$scope.saveState()}),$scope.gridApi.colResizable.on.columnSizeChanged($scope,function(column){$scope.saveState()}),$scope.gridApi.colMovable.on.columnPositionChanged($scope,function(column){$scope.saveState()})}},$scope.tableHeight=function(){return{height:Math.min($scope.ToolList.count,10)*$scope.gridOptions.rowHeight+33+"px"}}}]).controller("ToolGridCellController",["$scope",function($scope){function CellWidthDescription(){return $scope.CellWidth()+2+"px"}function CellColorDescription(){return $scope.rowIndex%2!=0?"#f8f8f8":"white"}$scope.init=function(columnName,rowIndex){$scope.columnName=columnName,$scope.rowIndex=rowIndex},$scope.RowIdentifier=function(){return $scope.columnName+$scope.rowIndex},$scope.RowName=function(){return $scope.columnName},$scope.RowHeight=function(){var element=document.getElementById($scope.RowIdentifier());return element?element.offsetHeight:0},$scope.DefaultRowHeight=function(){return 135},$scope.CellWidth=function(){return document.getElementById($scope.RowIdentifier()).offsetWidth},$scope.CellStyle=function(){return{width:CellWidthDescription(),"background-color":CellColorDescription()}}}]).controller("SearchResultController",["$scope","ToolList","ToolTableDataSource","DisplayModeSelector","Domain",function($scope,ToolList,ToolTableDataSource,DisplayModeSelector,Domain){$scope.Domain=Domain,$scope.ToolTableDataSource=ToolTableDataSource,$scope.ToolList=ToolList,$scope.DisplayModeSelector=DisplayModeSelector,ToolList.refresh()}]).controller("AlertsController",["$scope","Alert","EnvironmentChecker",function($scope,Alert,EnvironmentChecker){$scope.Alert=Alert,$scope.dev_alert=!1,EnvironmentChecker.getEnvironment().then(function(data){"Development"==data&&($scope.dev_alert=!0)}),"cookie_alert"in localStorage?$scope.cookie_alert="true"===localStorage.cookie_alert:$scope.cookie_alert=!0,"welcome_message"in localStorage?$scope.welcome_message="true"===localStorage.welcome_message:$scope.welcome_message=!0,$scope.closeCookieInfoButtonClick=function(){$scope.cookie_alert=!1,localStorage.cookie_alert=!1},$scope.closeWelcomeMessageButtonClick=function(){$scope.welcome_message=!1,localStorage.welcome_message=!1}}]).controller("ToolEditController",["$scope","$controller","$state","$stateParams","Ontology","Attribute","CheckUserEditingRights","User","$timeout",function($scope,$controller,$state,$stateParams,Ontology,Attribute,CheckUserEditingRights,User,$timeout){$scope.Attribute=Attribute,$scope.CheckUserEditingRights=CheckUserEditingRights,$scope.$state=$state,$scope.form={},$scope.canEditTool=!1,$scope.canEditToolPermissions=!1,$scope.User=User,$scope.registeringInProgress=!1,$scope.validationProgress={},$scope.savingProgress={},$scope.deletingProgress={},$scope.initializePermissions=function(){$scope.canEditTool=!1,$scope.canEditToolPermissions=!1,_.isEmpty($scope.software)||($scope.software.owner==$scope.User.getUsername()?($scope.canEditTool=!0,$scope.canEditToolPermissions=!0):void 0!=$scope.software.editPermission&&($scope.canEditTool=$scope.CheckUserEditingRights.canEdit($scope.software),$scope.canEditToolPermissions=!1,delete $scope.software.editPermission))},$scope.sendResource=function(service,progress,isRemoval){progress.success=!1,progress.error=!1,progress.inProgress=!0,$scope.registrationErrorPayload=null,service($stateParams,$scope.software,function(response){progress.inProgress=!1,progress.success=!0,isRemoval&&(alert("Resource removed succesfully."),$state.go("search"))},function(response){progress.error=!0,progress.inProgress=!1,$scope.registrationErrorPayload=response.data})},$scope.addButtonClick=function(_what,_where,_isList,_isObject){_isList?("undefined"==typeof _where[_what]&&(_where[_what]=[]),_where[_what].push(_isObject?{}:"")):"undefined"==typeof _where[_what]&&(_where[_what]=_isObject?{}:"")},$scope.removeButtonClick=function(_what,_parent,_index,_event){(_parent[_what][_index]?confirm("Are you sure you want to remove this element?"):1)&&(_event&&$(_event.target).closest("div").find(".jstree").jstree("destroy").remove(),_parent[_what].splice(_index,1),0==_parent[_what].length&&delete _parent[_what])},$scope.errorConnections={name:["id"]},$scope.resetError=function(_what,_parent,_index){if(void 0!=_index&&_index>=0)$scope.resetListError(_what,_parent,_index);else{var whatConnections=$scope.errorConnections[_what];whatConnections&&whatConnections.forEach(function(connection){void 0!=_parent&&_parent[connection]&&delete _parent[connection]}),void 0!=_parent&&_parent[_what]&&delete _parent[_what]}},$scope.resetListError=function(_what,_parent,_index){_parent[_what]&&_parent[_what][_index]&&(_parent[_what][_index]={})},$scope.isString=function(value){return"string"==typeof value},Ontology.get({name:"EDAM_topic"},function(response){$scope.EDAM_topic=response.data.children}),Ontology.get({name:"EDAM_data"},function(response){$scope.EDAM_data=response.data.children}),Ontology.get({name:"EDAM_format"},function(response){$scope.EDAM_format=response.data.children}),Ontology.get({name:"EDAM_operation"},function(response){$scope.EDAM_operation=response.data.children}),$scope.$watch("software",function(newVal,oldVal){$scope.jsonEdit.model=angular.toJson($scope.software,2),0==$scope.canEditTool&&$scope.initializePermissions()},!0),$scope.jsonEdit={};var initializing=!0;$scope.$watch("jsonEdit.model",function(newVal,oldVal){if(initializing)initializing=!1;else try{$scope.software=angular.fromJson($scope.jsonEdit.model),$scope.jsonEdit.error=null}catch(exp){$scope.jsonEdit.error=exp.message}}),$scope.downloadTool=function(_pretty){var hiddenElement=document.createElement("a");_pretty?hiddenElement.href="data:attachment/json,"+encodeURI(angular.toJson($scope.software,2)):hiddenElement.href="data:attachment/json,"+encodeURI(angular.toJson($scope.software)),hiddenElement.target="_blank",hiddenElement.download=($scope.software.name?$scope.software.name:"resource")+".json",document.body.appendChild(hiddenElement),hiddenElement.click()},$scope.treeOptions={nodeChildren:"children",dirSelectable:!0},$scope.ontologyOnSelect=function(_object,_index,_node){_object[_index]!==Object(_object[_index])&&(_object[_index]={}),_object[_index].term=_node.text,_object[_index].uri=_node.data.uri},$scope.latestOptions=[{value:1,text:"Yes"},{value:0,text:"No"}],$scope.contactRoleOptions=[{value:"General",text:"General"},{value:"Developer",text:"Developer"},{value:"Technical",text:"Technical"},{value:"Scientific",text:"Scientific"},{value:"Helpdesk",text:"Helpdesk"},{value:"Maintainer",text:"Maintainer"}],$scope.licenseOptions=[{value:"0BSD",text:"0BSD"},{value:"AAL",text:"AAL"},{value:"ADSL",text:"ADSL"},{value:"AFL-1.1",text:"AFL-1.1"},{value:"AFL-1.2",text:"AFL-1.2"},{value:"AFL-2.0",text:"AFL-2.0"},{value:"AFL-2.1",text:"AFL-2.1"},{value:"AFL-3.0",text:"AFL-3.0"},{value:"AGPL-1.0",text:"AGPL-1.0"},{value:"AGPL-3.0",text:"AGPL-3.0"},{value:"AMDPLPA",text:"AMDPLPA"},{value:"AML",text:"AML"},{value:"AMPAS",text:"AMPAS"},{value:"ANTLR-PD",text:"ANTLR-PD"},{value:"APAFML",text:"APAFML"},{value:"APL-1.0",text:"APL-1.0"},{value:"APSL-1.0",text:"APSL-1.0"},{value:"APSL-1.1",text:"APSL-1.1"},{value:"APSL-1.2",text:"APSL-1.2"},{value:"APSL-2.0",text:"APSL-2.0"},{value:"Abstyles",text:"Abstyles"},{value:"Adobe-2006",text:"Adobe-2006"},{value:"Adobe-Glyph",text:"Adobe-Glyph"},{value:"Afmparse",text:"Afmparse"},{value:"Aladdin",text:"Aladdin"},{value:"Apache-1.0",text:"Apache-1.0"},{value:"Apache-1.1",text:"Apache-1.1"},{value:"Apache-2.0",text:"Apache-2.0"},{value:"Artistic-1.0",text:"Artistic-1.0"},{value:"Artistic-1.0-Perl",text:"Artistic-1.0-Perl"},{value:"Artistic-1.0-cl8",text:"Artistic-1.0-cl8"},{value:"Artistic-2.0",text:"Artistic-2.0"},{value:"BSD-2-Clause",text:"BSD-2-Clause"},{value:"BSD-2-Clause-FreeBSD",text:"BSD-2-Clause-FreeBSD"},{value:"BSD-2-Clause-NetBSD",text:"BSD-2-Clause-NetBSD"},{value:"BSD-3-Clause",text:"BSD-3-Clause"},{value:"BSD-3-Clause-Attribution",text:"BSD-3-Clause-Attribution"},{value:"BSD-3-Clause-Clear",text:"BSD-3-Clause-Clear"},{value:"BSD-3-Clause-LBNL",text:"BSD-3-Clause-LBNL"},{value:"BSD-3-Clause-No-Nuclear-License",text:"BSD-3-Clause-No-Nuclear-License"},{value:"BSD-3-Clause-No-Nuclear-License-2014",text:"BSD-3-Clause-No-Nuclear-License-2014"},{value:"BSD-3-Clause-No-Nuclear-Warranty",text:"BSD-3-Clause-No-Nuclear-Warranty"},{value:"BSD-4-Clause",text:"BSD-4-Clause"},{value:"BSD-4-Clause-UC",text:"BSD-4-Clause-UC"},{value:"BSD-Protection",text:"BSD-Protection"},{value:"BSD-Source-Code",text:"BSD-Source-Code"},{value:"BSL-1.0",text:"BSL-1.0"},{value:"Bahyph",text:"Bahyph"},{value:"Barr",text:"Barr"},{value:"Beerware",text:"Beerware"},{value:"BitTorrent-1.0",text:"BitTorrent-1.0"},{value:"BitTorrent-1.1",text:"BitTorrent-1.1"},{value:"Borceux",text:"Borceux"},{value:"CATOSL-1.1",text:"CATOSL-1.1"},{value:"CC-BY-1.0",text:"CC-BY-1.0"},{value:"CC-BY-2.0",text:"CC-BY-2.0"},{value:"CC-BY-2.5",text:"CC-BY-2.5"},{value:"CC-BY-3.0",text:"CC-BY-3.0"},{value:"CC-BY-4.0",text:"CC-BY-4.0"},{value:"CC-BY-NC-1.0",text:"CC-BY-NC-1.0"},{value:"CC-BY-NC-2.0",text:"CC-BY-NC-2.0"},{value:"CC-BY-NC-2.5",text:"CC-BY-NC-2.5"},{value:"CC-BY-NC-3.0",text:"CC-BY-NC-3.0"},{value:"CC-BY-NC-4.0",text:"CC-BY-NC-4.0"},{value:"CC-BY-NC-ND-1.0",text:"CC-BY-NC-ND-1.0"},{value:"CC-BY-NC-ND-2.0",text:"CC-BY-NC-ND-2.0"},{value:"CC-BY-NC-ND-2.5",text:"CC-BY-NC-ND-2.5"},{value:"CC-BY-NC-ND-3.0",text:"CC-BY-NC-ND-3.0"},{value:"CC-BY-NC-ND-4.0",text:"CC-BY-NC-ND-4.0"},{value:"CC-BY-NC-SA-1.0",text:"CC-BY-NC-SA-1.0"},{value:"CC-BY-NC-SA-2.0",text:"CC-BY-NC-SA-2.0"},{value:"CC-BY-NC-SA-2.5",text:"CC-BY-NC-SA-2.5"},{value:"CC-BY-NC-SA-3.0",text:"CC-BY-NC-SA-3.0"},{value:"CC-BY-NC-SA-4.0",text:"CC-BY-NC-SA-4.0"},{value:"CC-BY-ND-1.0",text:"CC-BY-ND-1.0"},{value:"CC-BY-ND-2.0",text:"CC-BY-ND-2.0"},{value:"CC-BY-ND-2.5",text:"CC-BY-ND-2.5"},{value:"CC-BY-ND-3.0",text:"CC-BY-ND-3.0"},{value:"CC-BY-ND-4.0",text:"CC-BY-ND-4.0"},{value:"CC-BY-SA-1.0",text:"CC-BY-SA-1.0"},{value:"CC-BY-SA-2.0",text:"CC-BY-SA-2.0"},{value:"CC-BY-SA-2.5",text:"CC-BY-SA-2.5"},{value:"CC-BY-SA-3.0",text:"CC-BY-SA-3.0"},{value:"CC-BY-SA-4.0",text:"CC-BY-SA-4.0"},{value:"CC0-1.0",text:"CC0-1.0"},{value:"CDDL-1.0",text:"CDDL-1.0"},{value:"CDDL-1.1",text:"CDDL-1.1"},{value:"CECILL-1.0",text:"CECILL-1.0"},{value:"CECILL-1.1",text:"CECILL-1.1"},{value:"CECILL-2.0",text:"CECILL-2.0"},{value:"CECILL-2.1",text:"CECILL-2.1"},{value:"CECILL-B",text:"CECILL-B"},{value:"CECILL-C",text:"CECILL-C"},{value:"CNRI-Jython",text:"CNRI-Jython"},{value:"CNRI-Python",text:"CNRI-Python"},{value:"CNRI-Python-GPL-Compatible",text:"CNRI-Python-GPL-Compatible"},{value:"CPAL-1.0",text:"CPAL-1.0"},{value:"CPL-1.0",text:"CPL-1.0"},{value:"CPOL-1.02",text:"CPOL-1.02"},{value:"CUA-OPL-1.0",text:"CUA-OPL-1.0"},{value:"Caldera",text:"Caldera"},{value:"ClArtistic",text:"ClArtistic"},{value:"Condor-1.1",text:"Condor-1.1"},{value:"Crossword",text:"Crossword"},{value:"CrystalStacker",text:"CrystalStacker"},{value:"Cube",text:"Cube"},{value:"D-FSL-1.0",text:"D-FSL-1.0"},{value:"DOC",text:"DOC"},{value:"DSDP",text:"DSDP"},{value:"Dotseqn",text:"Dotseqn"},{value:"ECL-1.0",text:"ECL-1.0"},{value:"ECL-2.0",text:"ECL-2.0"},{value:"EFL-1.0",text:"EFL-1.0"},{value:"EFL-2.0",text:"EFL-2.0"},{value:"EPL-1.0",text:"EPL-1.0"},{value:"EUDatagrid",text:"EUDatagrid"},{value:"EUPL-1.0",text:"EUPL-1.0"},{value:"EUPL-1.1",text:"EUPL-1.1"},{value:"Entessa",text:"Entessa"},{value:"ErlPL-1.1",text:"ErlPL-1.1"},{value:"Eurosym",text:"Eurosym"},{value:"FSFAP",text:"FSFAP"},{value:"FSFUL",text:"FSFUL"},{value:"FSFULLR",text:"FSFULLR"},{value:"FTL",text:"FTL"},{value:"Fair",text:"Fair"},{value:"Frameworx-1.0",text:"Frameworx-1.0"},{value:"FreeImage",text:"FreeImage"},{value:"GFDL-1.1",text:"GFDL-1.1"},{value:"GFDL-1.2",text:"GFDL-1.2"},{value:"GFDL-1.3",text:"GFDL-1.3"},{value:"GL2PS",text:"GL2PS"},{value:"GPL-1.0",text:"GPL-1.0"},{value:"GPL-2.0",text:"GPL-2.0"},{value:"GPL-3.0",text:"GPL-3.0"},{value:"Giftware",text:"Giftware"},{value:"Glide",text:"Glide"},{value:"Glulxe",text:"Glulxe"},{value:"HPND",text:"HPND"},{value:"HaskellReport",text:"HaskellReport"},{value:"IBM-pibs",text:"IBM-pibs"},{value:"IC",text:"IC"},{value:"IJG",text:"IJG"},{value:"IPA",text:"IPA"},{value:"IPL-1.0",text:"IPL-1.0"},{value:"ISC",text:"ISC"},{value:"ImageMagick",text:"ImageMagick"},{value:"Imlib2",text:"Imlib2"},{value:"Info-ZIP",text:"Info-ZIP"},{value:"Intel",text:"Intel"},{value:"Intel-ACPI",text:"Intel-ACPI"},{value:"Interbase-1.0",text:"Interbase-1.0"},{value:"JSON",text:"JSON"},{value:"JasPer-2.0",text:"JasPer-2.0"},{value:"LAL-1.2",text:"LAL-1.2"},{value:"LAL-1.3",text:"LAL-1.3"},{value:"LGPL-2.0",text:"LGPL-2.0"},{value:"LGPL-2.1",text:"LGPL-2.1"},{value:"LGPL-3.0",text:"LGPL-3.0"},{value:"LGPLLR",text:"LGPLLR"},{value:"LPL-1.0",text:"LPL-1.0"},{value:"LPL-1.02",text:"LPL-1.02"},{value:"LPPL-1.0",text:"LPPL-1.0"},{value:"LPPL-1.1",text:"LPPL-1.1"},{value:"LPPL-1.2",text:"LPPL-1.2"},{value:"LPPL-1.3a",text:"LPPL-1.3a"},{value:"LPPL-1.3c",text:"LPPL-1.3c"},{value:"Latex2e",text:"Latex2e"},{value:"Leptonica",text:"Leptonica"},{value:"LiLiQ-P-1.1",text:"LiLiQ-P-1.1"},{value:"LiLiQ-R-1.1",text:"LiLiQ-R-1.1"},{value:"LiLiQ-Rplus-1.1",text:"LiLiQ-Rplus-1.1"},{value:"Libpng",text:"Libpng"},{value:"MIT",text:"MIT"},{value:"MIT-CM",text:"MIT-CM"},{value:"MIT-advertising",text:"MIT-advertising"},{value:"MIT-enna",text:"MIT-enna"},{value:"MIT-feh",text:"MIT-feh"},{value:"MITNFA",text:"MITNFA"},{value:"MPL-1.0",text:"MPL-1.0"},{value:"MPL-1.1",text:"MPL-1.1"},{value:"MPL-2.0",text:"MPL-2.0"},{value:"MPL-2.0-no-copyleft-exception",text:"MPL-2.0-no-copyleft-exception"},{value:"MS-PL",text:"MS-PL"},{value:"MS-RL",text:"MS-RL"},{value:"MTLL",text:"MTLL"},{value:"MakeIndex",text:"MakeIndex"},{value:"MirOS",text:"MirOS"},{value:"Motosoto",text:"Motosoto"},{value:"Multics",text:"Multics"},{value:"Mup",text:"Mup"},{value:"NASA-1.3",text:"NASA-1.3"},{value:"NBPL-1.0",text:"NBPL-1.0"},{value:"NCSA",text:"NCSA"},{value:"NGPL",text:"NGPL"},{value:"NLOD-1.0",text:"NLOD-1.0"},{value:"NLPL",text:"NLPL"},{value:"NOSL",text:"NOSL"},{value:"NPL-1.0",text:"NPL-1.0"},{value:"NPL-1.1",text:"NPL-1.1"},{value:"NPOSL-3.0",text:"NPOSL-3.0"},{value:"NRL",text:"NRL"},{value:"NTP",text:"NTP"},{value:"Naumen",text:"Naumen"},{value:"NetCDF",text:"NetCDF"},{value:"Newsletr",text:"Newsletr"},{value:"Nokia",text:"Nokia"},{value:"Noweb",text:"Noweb"},{value:"Nunit",text:"Nunit"},{value:"OCCT-PL",text:"OCCT-PL"},{value:"OCLC-2.0",text:"OCLC-2.0"},{value:"ODbL-1.0",text:"ODbL-1.0"},{value:"OFL-1.0",text:"OFL-1.0"},{value:"OFL-1.1",text:"OFL-1.1"},{value:"OGTSL",text:"OGTSL"},{value:"OLDAP-1.1",text:"OLDAP-1.1"},{value:"OLDAP-1.2",text:"OLDAP-1.2"},{value:"OLDAP-1.3",text:"OLDAP-1.3"},{value:"OLDAP-1.4",text:"OLDAP-1.4"},{value:"OLDAP-2.0",text:"OLDAP-2.0"},{value:"OLDAP-2.0.1",text:"OLDAP-2.0.1"},{value:"OLDAP-2.1",text:"OLDAP-2.1"},{value:"OLDAP-2.2",text:"OLDAP-2.2"},{value:"OLDAP-2.2.1",text:"OLDAP-2.2.1"},{value:"OLDAP-2.2.2",text:"OLDAP-2.2.2"},{value:"OLDAP-2.3",text:"OLDAP-2.3"},{value:"OLDAP-2.4",text:"OLDAP-2.4"},{value:"OLDAP-2.5",text:"OLDAP-2.5"},{value:"OLDAP-2.6",text:"OLDAP-2.6"},{value:"OLDAP-2.7",text:"OLDAP-2.7"},{value:"OLDAP-2.8",text:"OLDAP-2.8"},{value:"OML",text:"OML"},{value:"OPL-1.0",text:"OPL-1.0"},{value:"OSET-PL-2.1",text:"OSET-PL-2.1"},{value:"OSL-1.0",text:"OSL-1.0"},{value:"OSL-1.1",text:"OSL-1.1"},{value:"OSL-2.0",text:"OSL-2.0"},{value:"OSL-2.1",text:"OSL-2.1"},{value:"OSL-3.0",text:"OSL-3.0"},{value:"OpenSSL",text:"OpenSSL"},{value:"PDDL-1.0",text:"PDDL-1.0"},{value:"PHP-3.0",text:"PHP-3.0"},{value:"PHP-3.01",text:"PHP-3.01"},{value:"Plexus",text:"Plexus"},{value:"PostgreSQL",text:"PostgreSQL"},{value:"Python-2.0",text:"Python-2.0"},{value:"QPL-1.0",text:"QPL-1.0"},{value:"Qhull",text:"Qhull"},{value:"RHeCos-1.1",text:"RHeCos-1.1"},{value:"RPL-1.1",text:"RPL-1.1"},{value:"RPL-1.5",text:"RPL-1.5"},{value:"RPSL-1.0",text:"RPSL-1.0"},{value:"RSA-MD",text:"RSA-MD"},{value:"RSCPL",text:"RSCPL"},{value:"Rdisc",text:"Rdisc"},{value:"Ruby",text:"Ruby"},{value:"SAX-PD",text:"SAX-PD"},{value:"SCEA",text:"SCEA"},{value:"SGI-B-1.0",text:"SGI-B-1.0"},{value:"SGI-B-1.1",text:"SGI-B-1.1"},{value:"SGI-B-2.0",text:"SGI-B-2.0"},{value:"SISSL",text:"SISSL"},{value:"SISSL-1.2",text:"SISSL-1.2"},{value:"SMLNJ",text:"SMLNJ"},{value:"SMPPL",text:"SMPPL"},{value:"SNIA",text:"SNIA"},{value:"SPL-1.0",text:"SPL-1.0"},{value:"SWL",text:"SWL"},{value:"Saxpath",text:"Saxpath"},{value:"Sendmail",text:"Sendmail"},{value:"SimPL-2.0",text:"SimPL-2.0"},{value:"Sleepycat",text:"Sleepycat"},{value:"Spencer-86",text:"Spencer-86"},{value:"Spencer-94",text:"Spencer-94"},{value:"Spencer-99",text:"Spencer-99"},{value:"SugarCRM-1.1.3",text:"SugarCRM-1.1.3"},{value:"TCL",text:"TCL"},{value:"TMate",text:"TMate"},{value:"TORQUE-1.1",text:"TORQUE-1.1"},{value:"TOSL",text:"TOSL"},{value:"UPL-1.0",text:"UPL-1.0"},{value:"Unicode-TO",text:"Unicode-TO"},{value:"Unlicense",text:"Unlicense"},{value:"VOSTROM",text:"VOSTROM"},{value:"VSL-1.0",text:"VSL-1.0"},{value:"Vim",text:"Vim"},{value:"W3C",text:"W3C"},{value:"W3C-19980720",text:"W3C-19980720"},{value:"WTFPL",text:"WTFPL"},{value:"Watcom-1.0",text:"Watcom-1.0"},{value:"Wsuipa",text:"Wsuipa"},{value:"X11",text:"X11"},{value:"XFree86-1.1",text:"XFree86-1.1"},{value:"XSkat",text:"XSkat"},{value:"Xerox",text:"Xerox"},{value:"Xnet",text:"Xnet"},{value:"YPL-1.0",text:"YPL-1.0"},{value:"YPL-1.1",text:"YPL-1.1"},{value:"ZPL-1.1",text:"ZPL-1.1"},{value:"ZPL-2.0",text:"ZPL-2.0"},{value:"ZPL-2.1",text:"ZPL-2.1"},{value:"Zed",text:"Zed"},{value:"Zend-2.0",text:"Zend-2.0"},{value:"Zimbra-1.3",text:"Zimbra-1.3"},{value:"Zimbra-1.4",text:"Zimbra-1.4"},{value:"Zlib",text:"Zlib"},{value:"bzip2-1.0.5",text:"bzip2-1.0.5"},{value:"bzip2-1.0.6",text:"bzip2-1.0.6"},{value:"curl",text:"curl"},{value:"diffmark",text:"diffmark"},{value:"dvipdfm",text:"dvipdfm"},{value:"eGenix",text:"eGenix"},{value:"gSOAP-1.3b",text:"gSOAP-1.3b"},{value:"gnuplot",text:"gnuplot"},{value:"iMatix",text:"iMatix"},{value:"libtiff",text:"libtiff"},{value:"mpich2",text:"mpich2"},{value:"psfrag",text:"psfrag"},{value:"psutils",text:"psutils"},{value:"xinetd",text:"xinetd"},{value:"xpp",text:"xpp"},{value:"zlib-acknowledgement",text:"zlib-acknowledgement"},{value:"Proprietary",text:"Proprietary"},{value:"Other",text:"Other"},{value:"Unlicensed",text:"Unlicensed"}],$scope.costOptions=[{value:"Free of charge",text:"Free of charge"},{
value:"Free of charge (with restrictions)",text:"Free of charge (with restrictions)"},{value:"Commercial",text:"Commercial"}],$scope.languageOptions=[{value:"ActionScript",text:"ActionScript"},{value:"Ada",text:"Ada"},{value:"AppleScript",text:"AppleScript"},{value:"Assembly language",text:"Assembly language"},{value:"AWK",text:"AWK"},{value:"Bash",text:"Bash"},{value:"C",text:"C"},{value:"C#",text:"C#"},{value:"C++",text:"C++"},{value:"COBOL",text:"COBOL"},{value:"ColdFusion",text:"ColdFusion"},{value:"CWL",text:"CWL"},{value:"D",text:"D"},{value:"Delphi",text:"Delphi"},{value:"Dylan",text:"Dylan"},{value:"Eiffel",text:"Eiffel"},{value:"Forth",text:"Forth"},{value:"Fortran",text:"Fortran"},{value:"Groovy",text:"Groovy"},{value:"Haskell",text:"Haskell"},{value:"Icarus",text:"Icarus"},{value:"Java",text:"Java"},{value:"JavaScript",text:"JavaScript"},{value:"JSP",text:"JSP"},{value:"LabVIEW",text:"LabVIEW"},{value:"Lisp",text:"Lisp"},{value:"Lua",text:"Lua"},{value:"Maple",text:"Maple"},{value:"Mathematica",text:"Mathematica"},{value:"MATLAB",text:"MATLAB"},{value:"MLXTRAN",text:"MLXTRAN"},{value:"NMTRAN",text:"NMTRAN"},{value:"OCaml",text:"OCaml"},{value:"Pascal",text:"Pascal"},{value:"Perl",text:"Perl"},{value:"PHP",text:"PHP"},{value:"Prolog",text:"Prolog"},{value:"PyMOL",text:"PyMOL"},{value:"Python",text:"Python"},{value:"R",text:"R"},{value:"Racket",text:"Racket"},{value:"REXX",text:"REXX"},{value:"Ruby",text:"Ruby"},{value:"SAS",text:"SAS"},{value:"Scala",text:"Scala"},{value:"Scheme",text:"Scheme"},{value:"Shell",text:"Shell"},{value:"Smalltalk",text:"Smalltalk"},{value:"SQL",text:"SQL"},{value:"Turing",text:"Turing"},{value:"Verilog",text:"Verilog"},{value:"VHDL",text:"VHDL"},{value:"Visual Basic",text:"Visual Basic"},{value:"XAML",text:"XAML"},{value:"Other",text:"Other"}],$scope.platformOptions=[{value:"Mac",text:"Mac"},{value:"Linux",text:"Linux"},{value:"Windows",text:"Windows"}],$scope.accessibilityOptions=[{value:"Open access",text:"Open access"},{value:"Restricted access",text:"Restricted access"},{value:"Proprietary",text:"Proprietary"},{value:"Freeware",text:"Freeware"}],$scope.maturityOptions=[{value:"Emerging",text:"Emerging"},{value:"Mature",text:"Mature"},{value:"Legacy",text:"Legacy"}],$scope.toolTypeOptions=[{value:"Command-line tool",text:"Command-line tool"},{value:"Database portal",text:"Database portal"},{value:"Desktop application",text:"Desktop application"},{value:"Library",text:"Library"},{value:"Ontology",text:"Ontology"},{value:"Plug-in",text:"Plug-in"},{value:"Script",text:"Script"},{value:"SPARQL endpoint",text:"SPARQL endpoint"},{value:"Suite",text:"Suite"},{value:"Web application",text:"Web application"},{value:"Web API",text:"Web API"},{value:"Web service",text:"Web service"},{value:"Workbench",text:"Workbench"},{value:"Workflow",text:"Workflow"}],$scope.linkTypeOptions=[{value:"Browser",text:"Browser"},{value:"Helpdesk",text:"Helpdesk"},{value:"Issue tracker",text:"Issue tracker"},{value:"Mailing list",text:"Mailing list"},{value:"Mirror",text:"Mirror"},{value:"Registry",text:"Registry"},{value:"Repository",text:"Repository"},{value:"Social media",text:"Social media"},{value:"Scientific benchmark",text:"Scientific benchmark"},{value:"Technical monitoring",text:"Technical monitoring"}],$scope.downloadTypeOptions=[{value:"API specification",text:"API specification"},{value:"Biological data",text:"Biological data"},{value:"Binaries",text:"Binaries"},{value:"Binary package",text:"Binary package"},{value:"Command-line specification",text:"Command-line specification"},{value:"Container file",text:"Container file"},{value:"CWL file",text:"CWL file"},{value:"Icon",text:"Icon"},{value:"Ontology",text:"Ontology"},{value:"Screenshot",text:"Screenshot"},{value:"Source code",text:"Source code"},{value:"Source package",text:"Source package"},{value:"Test data",text:"Test data"},{value:"Test script",text:"Test script"},{value:"Tool wrapper (galaxy)",text:"Tool wrapper (galaxy)"},{value:"Tool wrapper (taverna)",text:"Tool wrapper (taverna)"},{value:"Tool wrapper (other)",text:"Tool wrapper (other)"},{value:"VM Image",text:"VM Image"}],$scope.documentationTypeOptions=[{value:"API documentation",text:"API documentation"},{value:"Citation instructions",text:"Citation instructions"},{value:"Contributions policy",text:"Contributions policy"},{value:"General",text:"General"},{value:"Governance",text:"Governance"},{value:"Installation instructions",text:"Installation instructions"},{value:"Manual",text:"Manual"},{value:"Terms of use",text:"Terms of use"},{value:"Training material",text:"Training material"},{value:"Tutorial",text:"Tutorial"},{value:"Other",text:"Other"}],$scope.publicationTypeOptions=[{value:"Primary",text:"Primary"},{value:"Comparison",text:"Comparison"},{value:"Method",text:"Method"},{value:"Usage",text:"Usage"},{value:"Review",text:"Review"},{value:"Other",text:"Other"}],$scope.entityTypeOptions=[{value:"Person",text:"Person"},{value:"Project",text:"Project"},{value:"Division",text:"Division"},{value:"Institute",text:"Institute"},{value:"Consortium",text:"Consortium"},{value:"Funding agency",text:"Funding agency"}],$scope.roleTypeOptions=[{value:"Primary contact",text:"Primary contact"},{value:"Contributor",text:"Contributor"},{value:"Developer",text:"Developer"},{value:"Documentor",text:"Documentor"},{value:"Maintainer",text:"Maintainer"},{value:"Provider",text:"Provider"},{value:"Support",text:"Support"}],$scope.elixirPlatformOptions=[{value:"Data",text:"ELIXIR Data Platform"},{value:"Tools",text:"ELIXIR Tools Platform"},{value:"Compute",text:"ELIXIR Compute Platform"},{value:"Interoperability",text:"ELIXIR Interoperability Platform"},{value:"Training",text:"ELIXIR Training Platform"}],$scope.elixirNodeOptions=[{value:"Belgium",text:"Belgium"},{value:"Czech Republic",text:"Czech Republic"},{value:"Denmark",text:"Denmark"},{value:"EMBL",text:"EMBL"},{value:"Estonia",text:"Estonia"},{value:"Finland",text:"Finland"},{value:"France",text:"France"},{value:"Germany",text:"Germany"},{value:"Greece",text:"Greece"},{value:"Hungary",text:"Hungary"},{value:"Ireland",text:"Ireland"},{value:"Israel",text:"Israel"},{value:"Italy",text:"Italy"},{value:"Luxembourg",text:"Luxembourg"},{value:"Netherlands",text:"Netherlands"},{value:"Norway",text:"Norway"},{value:"Portugal",text:"Portugal"},{value:"Slovenia",text:"Slovenia"},{value:"Spain",text:"Spain"},{value:"Sweden",text:"Sweden"},{value:"Switzerland",text:"Switzerland"},{value:"UK",text:"UK"}],$scope.otherIdTypeOptions=[{value:"doi",text:"doi"},{value:"rrid",text:"rrid"},{value:"cpe",text:"cpe"}]}]).controller("ToolUpdateController",["$scope","$controller","$timeout","$state","$stateParams","Tool","ToolUpdateValidator",function($scope,$controller,$timeout,$state,$stateParams,Tool,ToolUpdateValidator){$controller("ToolEditController",{$scope:$scope}),$scope.controller="update",$scope.autoUpdateId=!1,$scope.validateButtonClick=function(){$timeout(function(){$scope.sendResource(ToolUpdateValidator.update,$scope.validationProgress)},100)},$scope.registerButtonClick=function(){$timeout(function(){confirm("Are you sure you want to update the resource? ")&&$scope.sendResource(Tool.update,$scope.savingProgress)},100)},$scope.deleteButtonClick=function(){$timeout(function(){confirm("Are you sure you want to remove the resource? ")&&confirm("This will remove the resource and cannot be undone. Are you sure you want to continue? ")&&$scope.sendResource(Tool.remove,$scope.deletingProgress,!0)},100)}}]).controller("ToolCreateController",["$scope","$controller","$timeout","ToolListConnection","ToolCreateValidator","User","$stateParams",function($scope,$controller,$timeout,ToolListConnection,ToolCreateValidator,User,$stateParams){function cleanNulls(object){for(var key in object)if(null==object[key])delete object[key];else if(object[key].constructor===Array)if(0==object[key].length)delete object[key];else for(var i in object[key])cleanNulls(object[key][i]);else"object"==typeof object[key]&&cleanNulls(object[key])}$controller("ToolEditController",{$scope:$scope}),$scope.controller="create",$scope.autoUpdateId=!0,$scope.editIdToggleButtonClick=function(){$scope.autoUpdateId=!$scope.autoUpdateId,$scope.makeIdURLSafe($scope.software.name)},$scope.validateButtonClick=function(){$timeout(function(){$scope.sendResource(ToolCreateValidator.save,$scope.validationProgress)},100)},$scope.registerButtonClick=function(){confirm("Are you sure you want to save the resource? ")&&$timeout(function(){$scope.sendResource(ToolListConnection.save,$scope.savingProgress)},100)},"undefined"!=typeof $stateParams.newVersionOf?($scope.newVersion=!0,$scope.software=ToolLatest.get({id:$stateParams.newVersionOf},function(response){cleanNulls($scope.software),$scope.software.version=null},function(response){404==response.status&&($scope.notFound=!0)})):($scope.newVersion=!1,$timeout(function(){$scope.software={owner:$scope.User.getUsername(),name:"",description:"",homepage:""}},100))}]).controller("LoginController",["$scope","$state","djangoAuth","$rootScope",function($scope,$state,djangoAuth,$rootScope){$scope.credentials={},$scope.loginButtonClick=function(){djangoAuth.login($scope.credentials.username,$scope.credentials.password).then(function(response){"undefined"==typeof $rootScope.toState||/signup/.test($rootScope.toState.name)||/reset-password/.test($rootScope.toState.name)?$state.go("search"):$state.go($rootScope.toState.name,$rootScope.toStateParams)},function(response){$scope.loginErrors=response.general_errors})},$scope.$watch("credentials",function(){$scope.loginErrors&&($scope.loginErrors.pop(),delete $scope.loginErrors)},!0)}]).controller("SignupController",["$scope","$state","djangoAuth","$rootScope","$timeout",function($scope,$state,djangoAuth,$rootScope,$timeout){$scope.credentials={},$scope.error_message={},$scope.error_message.username="",$scope.error_message.email="",$scope.error_message.creation="";var initializing_username=!0;$scope.$watch("credentials.username",function(newValue,oldValue,scope){initializing_username?initializing_username=!1:($scope.error_message.username="",djangoAuth.register($scope.credentials.username,null,null,null,null).then(function(response){},function(response){response.hasOwnProperty("username")&&($scope.error_message.username="Username is already taken.")}))});var initializing_email=!0;$scope.$watch("credentials.email",function(newValue,oldValue,scope){initializing_email?initializing_email=!1:($scope.error_message.email="",djangoAuth.register(null,null,null,$scope.credentials.email,null).then(function(response){},function(response){response.hasOwnProperty("email")&&($scope.error_message.email="Email is invalid or already taken.")}))}),$scope.signupButtonClick=function(){$scope.loading=!0,$timeout(function(){djangoAuth.register($scope.credentials.username,$scope.credentials.password,$scope.credentials.password,$scope.credentials.email,null).then(function(response){$state.go("signup.success"),$scope.loading=!1},function(response){$scope.error_message.email=response.email.join(),$scope.error_message.username=response.username.join(),$scope.error_message.creation=response.message,$scope.loading=!1})},100)}}]).controller("SignupVerifyEmailKeyController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.error_message="",djangoAuth.verify($stateParams.key).then(function(response){$state.go("signup.verify-email.success")},function(response){$scope.error_message=response.message})}]).controller("ResetPasswordController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.credentials={},$scope.error_message="",$scope.success_message="",$scope.loading=!1,$scope.resetButtonClick=function(){$scope.error_message="",$scope.success_message="",$scope.loading=!0,djangoAuth.resetPassword($scope.credentials.email).then(function(response){$scope.success_message=response.success,$scope.loading=!1},function(response){$scope.error_message=response,$scope.loading=!1})}}]).controller("ResetPasswordConfirmController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.credentials={},$scope.error_message=!1;var uid=$stateParams.uid,token=$stateParams.token;$scope.loading=!1,$scope.resetButtonClick=function(){$scope.error_message=!1,$scope.loading=!0,djangoAuth.confirmReset(uid,token,$scope.credentials.password,$scope.credentials.password).then(function(response){$state.go("reset-password.confirm.success"),$scope.loading=!1},function(response){$scope.error_message=!0,$scope.loading=!1})}}]),angular.module("elixir_front.directives",[]).directive("toolList",["ToolList","Highlighting",function(ToolList,Highlighting){return{restrict:"A",templateUrl:"partials/directives/toolList.html",link:function(scope,element,attrs){scope.ToolList=ToolList,scope.Highlighting=Highlighting}}}]).directive("showMore",[function(){return{templateUrl:"showMore.html",restrict:"A",transclude:!0,scope:{showMoreHeight:"@"},controller:["$scope","$element","$interval",function($scope,$element,$interval){function renderStyles(){$element.height()>=$scope.showMoreHeight&&$scope.expanded===!1&&($scope.expandable=!0)}$scope.expanded=!1,$interval(function(){renderStyles()},300),$scope.expandable=!1,$scope.showLessStyle={"max-height":$scope.showMoreHeight+"px",overflow:"hidden"}}]}}]).directive("toolListTable",["ToolList","ToolTableDataSource","Highlighting",function(ToolList,ToolTableDataSource,Highlighting){return{restrict:"A",templateUrl:"partials/directives/toolListTable.html",link:function(scope,element,attrs){scope.Highlighting=Highlighting,scope.ToolTableDataSource=ToolTableDataSource}}}]).directive("toolSorter",["ToolList","$state","$stateParams","$timeout","ToolSorter","Query","$rootScope",function(ToolList,$state,$stateParams,$timeout,ToolSorter,Query,$rootScope){return{restrict:"A",templateUrl:"partials/directives/sorter.html",link:function(scope,element,attrs){scope.ToolSorter=ToolSorter,scope.addToURL=function(){var params=$stateParams;"lastUpdate"==ToolSorter.sortBy.attrName&&1==ToolSorter.order?(params.sort=null,params.ord=null):(params.sort=ToolSorter.sortBy.attrName,params.ord=ToolSorter.order?"desc":"asc"),$state.transitionTo("search",params,{notify:!1})},scope.sortingChangedByDropdown=function(){scope.addToURL(),$timeout(function(){ToolList.refresh()})},scope.validateSelectedSortOption=function(){Query.current.length>0?ToolSorter.addScore():ToolSorter.removeScore(),ToolSorter.setSortOption($stateParams.sort)},null!=$stateParams.sort&&("score"==$stateParams.sort&&ToolSorter.addScore(),ToolSorter.sortBy=ToolSorter.list[_.findIndex(ToolSorter.list,{attrName:$stateParams.sort})||0]),null!=$stateParams.ord&&("desc"==$stateParams.ord?ToolSorter.order=!0:"asc"==$stateParams.ord&&(ToolSorter.order=!1)),$rootScope.$on("$stateChangeSuccess",function(event,toState,toStateParams,fromState,fromStateParams){scope.validateSelectedSortOption()}),$rootScope.$on("search-bar-tags-changed",function(){scope.validateSelectedSortOption()})}}}]).directive("displayModeSelector",["ToolList","$state","$stateParams","$timeout","DisplayModeSelector",function(ToolList,$state,$stateParams,$timeout,DisplayModeSelector){return{restrict:"A",templateUrl:"partials/directives/displaySelector.html",link:function(scope,element,attrs){scope.DisplayModeSelector=DisplayModeSelector,scope.modeChanged=function(){$timeout(function(){ToolList.refresh()})}}}}]).directive("toolPaginator",["ToolList","$state","$stateParams","Query","$timeout","ToolPaginator",function(ToolList,$state,$stateParams,Query,$timeout,ToolPaginator){return{restrict:"A",template:'<uib-pagination style="margin-bottom:25px; margin-top:25px;" total-items="ToolList.count" ng-model="ToolPaginator.currentPage" items-per-page="ToolPaginator.pageSize" max-size="ToolPaginator.maxSize" ng-change="pageChanged()" class="pagination-sm pagination-top" ng-disabled="ToolList.loading"></uib-pagination>',link:function(scope,element,attrs){scope.Query=Query,scope.ToolPaginator=ToolPaginator,null!=$stateParams.page?ToolPaginator.currentPage=parseInt($stateParams.page):ToolPaginator.currentPage=1,scope.pageChanged=function(){var params=$stateParams;$timeout(function(){params.page=1!=ToolPaginator.currentPage?ToolPaginator.currentPage:null,$state.transitionTo("search",params,{notify:!1}),ToolList.refresh()})};var initializing=!0;scope.$watch("ToolPaginator.currentPage",function(newVal,oldVal){initializing&&(newVal!=oldVal&&1==newVal&&(ToolPaginator.currentPage=oldVal),$timeout(function(){initializing=!1}))}),scope.$watch("Query.current",function(){ToolPaginator.currentPage=1},!0)}}}]).directive("insertPublicationLink",function($compile){return{restrict:"A",scope:{publication:"="},compile:function($templateElement,$templateAttributes){return function($scope,$element,$attrs){var html="";if(/^\d{7,8}$/.test($scope.publication))html='<span>PUBMED:</span> <a href="http://www.ncbi.nlm.nih.gov/pubmed/'+$scope.publication+'">'+$scope.publication+"</a>";else if(/^PMC\d{6,8}$/.test($scope.publication))html='<span>PMC:</span> <a href="http://www.ncbi.nlm.nih.gov/pmc/'+$scope.publication+'">'+$scope.publication+"</a>";else if(/^(doi:)?\d{2}.\d{4}/.test($scope.publication)){var publication=$scope.publication.replace("doi:","");html='<span>DOI:</span> <a href="https://dx.doi.org/'+publication+'">'+publication+"</a>"}var e=$compile(html)($scope);$element.replaceWith(e)}}}}).directive("insertPublicationLinkIcon",function($compile){return{restrict:"A",scope:{publication:"="},compile:function($templateElement,$templateAttributes){return function($scope,$element,$attrs){var html="";if(/^\d{7,8}$/.test($scope.publication))html='<a href="http://www.ncbi.nlm.nih.gov/pubmed/'+$scope.publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="PUBMED" tooltip-append-to-body="true"></i></a>';else if(/^PMC\d{6,8}$/.test($scope.publication))html='<a href="http://www.ncbi.nlm.nih.gov/pmc/'+$scope.publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="PMC" tooltip-append-to-body="true"></i></a>';else if(/^(doi:)?\d{2}.\d{4}/.test($scope.publication)){var publication=$scope.publication.replace("doi:","");html='<a href="https://dx.doi.org/'+publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="DOI" tooltip-append-to-body="true"></i></a>'}var e=$compile(html)($scope);$element.replaceWith(e)}}}}).directive("focus",function(){return{restrict:"A",link:function(scope,iElm,iAttrs,controller){iElm[0].focus()}}}).directive("spinner",function(){return{restrict:"A",replace:"true",template:'<div class="adjust"><div class="spinner"></div></div>'}}).directive("resourceNotFoundDialog",function(){return{restrict:"A",replace:"true",template:'<div class="col-md-12 info-dialog-background info-dialog info-dialog-text">We\'re sorry but we couldn\'t find what you were looking for. You can try searching for the resource you need <a ui-sref="search()">here</a>.</div>'}}).directive("errorDialog",function(){return{restrict:"A",replace:!0,template:function(elem,attr){return'<div class="col-md-offset-2 col-md-8 bs-callout bs-callout-danger" style="margin-top: 80px;"><h4><i class="fa fa-exclamation-circle" aria-hidden="true"></i> Error {{'+attr.errorcode+"}}</h4>{{"+attr.errormessage+"}}</div>"},transclude:!0}}).directive("ignoreEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&event.preventDefault()})}}).directive("validateEditResourceField",function(){return{restrict:"A",require:["^form","ngModel"],link:function(scope,element,attrs,ctrls){var ngForm=ctrls[0],ngModel=ctrls[1],dataPath=attrs.ngModel.replace("software.","").replace("$parent.$index",attrs.parentIndex).replace("$index",attrs.index).replace("[",".").replace("]","").split(".");ngModel.$parsers.push(function(value){return _.set(scope.registrationErrorPayload,dataPath,null),ngModel.errorMessages=[],ngModel.$setValidity("server_validation_passed",!0),value}),ngModel.$viewChangeListeners.push(function(){var value=_.get(scope.software,dataPath);""===value&&_.unset(scope.software,dataPath)}),scope.$watch("registrationErrorPayload",function(date){var error=_.result(scope.registrationErrorPayload,dataPath);0==_.isEmpty(error)?(ngModel.$setValidity("server_validation_passed",!1),ngModel.errorMessages=error):(ngModel.$setValidity("server_validation_passed",!0),ngModel.errorMessages=[]);var formError=extractFormErrors();formError.length>0?(ngForm.$setValidity("server_validation_passed",!1),ngForm.errorMessages=_.union(ngForm.errorMessages,formError)):(ngForm.$setValidity("server_validation_passed",!0),ngForm.errorMessages=[])});var extractFormErrors=function(){for(var formErrors=[],i=1;i<dataPath.length;i++){var subDataPath=dataPath.slice(0,i);subDataPath.push("general_errors");var error=_.result(scope.registrationErrorPayload,subDataPath);0==_.isEmpty(error)&&(formErrors=formErrors.concat(error))}return formErrors}}}}).directive("dividerLabel",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='class="tool-page-diver-label"';return callout},replace:!0}}).directive("smallSpinner",function(){return{restrict:"A",replace:"true",template:'<div style="text-align:center; color: #7f7f7f; font-size: 12px;"><i class="fa fa-circle-o-notch fa-spin"></i> Processing...</div>'}}).directive("largeSpinner",function(){return{restrict:"A",replace:"true",template:'<div style="text-align:center; color: #cccccc; font-size: 60px;"><i class="fa fa-circle-o-notch fa-spin"></i></div>'}}),angular.module("elixir_front.filters",[]).filter("startFrom",function(){return function(input,start){return start=+start,input?input.slice(start):void 0}}).filter("filterByObject",function($filter){return function(list,filter){function filterMatch(entry,filter){if("undefined"==typeof filter)return!0;if(null==entry)return!1;var result=!1;for(var _key in filter){if(result=!1,"undefined"==typeof filter[_key]||""==filter[_key])result=!0;else if("undefined"==typeof entry[_key])result=!1;else if("object"!=typeof filter[_key]){if("object"!=typeof entry[_key])result=entry[_key].toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else if(Array.isArray(entry[_key]))for(var result_inner=!1,j=0;j<entry[_key].length;j++){if("string"==typeof entry[_key][j])result_inner=entry[_key][j].toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else if("term"in entry[_key][j])result_inner=entry[_key][j].term.toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else for(var property in entry[_key][j])if(entry[_key][j].hasOwnProperty(property)&&JSON.stringify(entry[_key][j][property]).toLowerCase().indexOf(filter[_key].toLowerCase())>-1){result_inner=!0;break}if(result_inner){result=!0;break}}else if("term"in entry[_key])result=entry[_key].term.toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else for(var property in entry[_key])if(entry[_key].hasOwnProperty(property)&&JSON.stringify(entry[_key][property]).toLowerCase().indexOf(filter[_key].toLowerCase())>-1){result=!0;break}}else if(Array.isArray(entry[_key])){for(var j=0;j<entry[_key].length;j++)if(filterMatch(entry[_key][j],filter[_key])){result=!0;break}}else result=filterMatch(entry[_key],filter[_key]);if(!result)return!1}return!0}var return_list=[];if(list)for(var i=0;i<list.length;i++)1==filterMatch(list[i],filter)&&return_list.push(list[i]);return return_list}}).filter("filterQuery",function(){return function(list,filter){if(""==filter||null==filter)return list;var return_list=[];if(list&&list.length>0)for(var i=0;i<list.length;i++)if(!_.isEmpty(list[i])){var search_score=(list[i].name+" "+list[i].description+" "+list[i].topic+" "+list[i]["function"]+" "+list[i].affiliation).score(filter);search_score>0&&(list[i].search_score=1-search_score,return_list.push(list[i]))}return return_list}}).filter("highlight",function($sce){return function(str,termsToHighlight){if(str&&termsToHighlight.length>0){termsToHighlight.sort(function(a,b){return b.length-a.length});var regex=new RegExp("("+termsToHighlight.join("|")+")","gi");return $sce.trustAsHtml(str.replace(regex,'<span class="highlightedTerm">$&</span>'))}return str}}),angular.module("elixir_front.controllers").controller("LoginMangerController",["$scope","$uibModal","$rootScope","$state",function($scope,$uibModal,$rootScope,$state){var vm=this;vm.openLoginModal=function(){$uibModal.open({templateUrl:"partials/modals/loginModal.html",controller:["$uibModalInstance","djangoAuth","$rootScope","$state",LoginModalController],controllerAs:"vm",windowClass:"login-modal-window"})}}]),angular.module("elixir_front.controllers").controller("PermissionsController",["$scope","UserSuggestionsProvider",function($scope,UserSuggestionsProvider){$scope.userSuggestions=function(prefix){return UserSuggestionsProvider.getSuggestions(prefix).then(function(data){var suggestions=_.map(data,function(obj){return obj.username});return _.difference(suggestions,$scope.software.editPermission.authors)})},$scope.userSelected=function($item,$model,$label){void 0==$scope.software.editPermission.authors&&($scope.software.editPermission.authors=[]),$scope.userSuggestion="",$scope.software.editPermission.authors.push($model)},$scope.isSoftwareOwner=function(){return $scope.software.owner==$scope.User.getUsername()},$scope.deleteUser=function(index){$scope.software.editPermission.authors.splice(index,1)}}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("UserSuggestionsProvider",["$http",function($http){return{getSuggestions:function(prefix){return $http({method:"GET",url:"/api/user-list",params:{term:prefix}}).then(function(response){return response.data},function(response){return{}})}}}]),angular.module("elixir_front.controllers").controller("RequestsController",["$scope","ResourceRequestProvider","User",function($scope,ResourceRequestProvider,User){var vm=this;$scope.requests={},$scope.received=[],$scope.sent=[],$scope.loading=!0,$scope.error={},$scope.error.status=0,$scope.error.message="",$scope.filters={},$scope.filters.showCompletedReceived=!1,$scope.filters.showCompletedSent=!1,vm.loadRequests=function($item,$model,$label){$scope.loading=!0,ResourceRequestProvider.getRequests().then(function(response){$scope.requests=response.data.requests,$scope.filterSentRequests(),$scope.filterReceivedRequests(),$scope.loading=!1},function(response){$scope.error.status=response.status,$scope.error.message="There was an error communicating with the server. Try refreshing this website.",$scope.loading=!1})},$scope.filterSentRequests=function(){0==$scope.filters.showCompletedSent?$scope.sent=$scope.requests.sent.filter(vm.checkIfNotCompleted):$scope.sent=$scope.requests.sent},$scope.filterReceivedRequests=function(){0==$scope.filters.showCompletedReceived?$scope.received=$scope.requests.received.filter(vm.checkIfNotCompleted):$scope.received=$scope.requests.received},vm.checkIfNotCompleted=function(request){return!request.completed},vm.requestsAffectedByAcceptingRequest=function(request){if("ownership"==request.type&&request.username!=User.current.username){for(var affectedRequests=[],index=0;index<$scope.requests.received.length;++index){var checkRequest=$scope.requests.received[index];0==checkRequest.completed&&checkRequest.requestId!=request.requestId&&checkRequest.resourceId==request.resourceId&&affectedRequests.push(checkRequest)}return affectedRequests}return[]},$scope.typeDescription=function(type){return"editing"==type?"Editing rights":"Resource ownership"},$scope.acceptRequest=function(request){var affectedRequests=vm.requestsAffectedByAcceptingRequest(request),resourceIndex=$scope.requests.received.indexOf(request);0==affectedRequests.length?vm.processAcceptRequest(resourceIndex,request,affectedRequests):confirm("Are you sure you want to accept this request? "+affectedRequests.length+" of the exisitng requests will be sent to the new owner.")&&vm.processAcceptRequest(resourceIndex,request,affectedRequests)},vm.processAcceptRequest=function(index,request,affectedRequests){var resourceIndex=index;$scope.requests.received[resourceIndex].processing=!0,request.processing=!1,ResourceRequestProvider.acceptRequest(request.requestId).then(function(response){$scope.requests.received[resourceIndex].processing=!1,$scope.requests.received[resourceIndex].completed=!0,$scope.requests.received[resourceIndex].accepted=!0,$scope.requests.received=_.difference($scope.requests.received,affectedRequests),$scope.received=_.difference($scope.received,affectedRequests),request.processing=!1,request.completed=!0,request.accepted=!0,User.current.requests_count=User.current.requests_count-1-affectedRequests.length},function(response){vm.loadRequests()})},$scope.declineRequest=function(request){var resourceIndex=$scope.requests.received.indexOf(request);request.processing=!1,$scope.requests.received[resourceIndex].processing=!0,ResourceRequestProvider.declineRequest(request.requestId).then(function(response){$scope.requests.received[resourceIndex].processing=!1,$scope.requests.received[resourceIndex].completed=!0,$scope.requests.received[resourceIndex].accepted=!1,request.processing=!1,request.completed=!0,request.accepted=!1,User.current.requests_count=User.current.requests_count-1},function(response){vm.loadRequests()})},vm.loadRequests()}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("ResourceRequestProvider",["$http",function($http){return{getRequests:function(){return $http({method:"GET",url:"/api/request",params:{}})},acceptRequest:function(requestId){return $http({method:"POST",url:"/api/request/conclude",data:{requestId:requestId,accept:!0}})},declineRequest:function(requestId){return $http({method:"POST",url:"/api/request/conclude",data:{requestId:requestId,accept:!1}})},requestOwnership:function(resourceId){return $http({method:"PUT",url:"/api/request",data:{resourceId:resourceId,type:"ownership"}})},requestEditingRights:function(resourceId){return $http({method:"PUT",url:"/api/request",data:{resourceId:resourceId,type:"editing"}})}}}]),angular.module("elixir_front.services",[]).service("Alert",function(){this.list=[],this.add=function(_message,_type){this.list.push({msg:_message,type:_type,ttl:2})},this.remove=function(_index){this.list.splice(_index,1)}}).service("User",[function(){return this.current={},{isLoggedIn:function(){return 1==this.authenticated},getUsername:function(){if(!_.isEmpty(this.current))return this.current.username},isSuperuser:function(){if(!_.isEmpty(this.current))return this.current.is_superuser}}}]).service("Query",[function(){this.current=[]}]).service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection",function(DomainDetailConnection){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description}}]).service("Highlighting",[function(){var _this=this;this.terms=[],this.purge=function(){for(;_this.terms.length>0;)_this.terms.pop()},this.set=function(query_array){_this.purge();for(var i in query_array)_this.terms.push(query_array[i].text.replace(/['"]/g,""))}}]).service("ToolListConnection",["$resource",function($resource){
return $resource("/api/t/",null,{query:{isArray:!1,method:"GET"},update:{method:"PUT"}})}]).service("ToolListOverviewConnection",["$resource",function($resource){return $resource("/api/tool-list/",null,{query:{isArray:!0,method:"GET"}})}]).service("ToolList",["$stateParams","ToolListConnection",function($stateParams,ToolListConnection){var _this=this;this.count=0,this.list=[],this.loading=!0,this.refresh=function(){this.loading=!0;var response=ToolListConnection.query($stateParams,function(){_this.loading=!1,_this.count=response.count,_this.list=response.list})}}]).factory("ToolTableDataSource",function(){var columnDescriptionForKey=function(key,hidden){var widthCharMultiplier=12,columnDescription={};return columnDescription="Name"==key?{field:"name",displayName:"Name",cellTemplate:"/partials/grid_cells/nameCell.html",width:"150",resizable:!0}:"Operating System"==key?{field:"operatingSystem",displayName:"Operating System",cellTemplate:"/partials/grid_cells/platformCell.html",width:"100",resizable:!0}:"Description"==key?{field:"description",displayName:"Description",width:"*",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"}:"Operation"==key?{field:"function",displayName:"Operation",width:"220",resizable:!0,cellTemplate:"/partials/grid_cells/functionCell.html"}:"Input"==key?{field:"function",displayName:"Input",width:"240",resizable:!0,cellTemplate:"/partials/grid_cells/inputCell.html"}:"Output"==key?{field:"function",displayName:"Output",width:"240",resizable:!0,cellTemplate:"/partials/grid_cells/outputCell.html"}:"Topic"==key?{field:"topic",displayName:"Topic",width:"200",resizable:!0,cellTemplate:"/partials/grid_cells/topicCell.html"}:"Homepage"==key?{field:"homepage",displayName:"Homepage",resizable:!0,width:"100",cellTemplate:"/partials/grid_cells/urlCell.html"}:"Tool Type"==key?{field:"toolType",displayName:"Tool Type",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Publications"==key?{field:"publication",displayName:"Publications",width:"250",resizable:!0,cellTemplate:"/partials/grid_cells/publicationsCell.html"}:"Collection"==key?{field:"collectionID",displayName:"Collection",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"bio.tools ID"==key?{field:"biotoolsID",displayName:"bio.tools ID",width:"120",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"}:"Documentation"==key?{field:"documentation",displayName:"Documentation",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Link"==key?{field:"link",displayName:"Links",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Download"==key?{field:"download",displayName:"Downloads",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Language"==key?{field:"language",displayName:"Language",width:"120",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Credits"==key?{field:"credit",displayName:"Credits",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/creditsCell.html"}:"Accessibility"==key?{field:key.toLowerCase(),displayName:key,width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Cost"==key?{field:key.toLowerCase(),displayName:key,width:"90",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"}:"Version"==key?{field:key.toLowerCase(),displayName:key,width:"90",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:{field:key.toLowerCase(),displayName:key,width:key.length*widthCharMultiplier,resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"},columnDescription.enableHiding=!0,columnDescription.visible=hidden,columnDescription.minWidth=120,columnDescription};return{columnsDescription:function(visibleColumns){return[columnDescriptionForKey("Name",visibleColumns.indexOf("Name")!=-1),columnDescriptionForKey("Description",visibleColumns.indexOf("Description")!=-1),columnDescriptionForKey("Homepage",visibleColumns.indexOf("Homepage")!=-1),columnDescriptionForKey("Version",visibleColumns.indexOf("Homepage")!=-1),columnDescriptionForKey("bio.tools ID",visibleColumns.indexOf("bio.tools ID")!=-1),columnDescriptionForKey("Tool Type",visibleColumns.indexOf("Tool Type")!=-1),columnDescriptionForKey("Topic",visibleColumns.indexOf("Topic")!=-1),columnDescriptionForKey("Publications",visibleColumns.indexOf("Publications")!=-1),columnDescriptionForKey("Credits",visibleColumns.indexOf("Credits")!=-1),columnDescriptionForKey("Operation",visibleColumns.indexOf("Operation")!=-1),columnDescriptionForKey("Input",visibleColumns.indexOf("Input")!=-1),columnDescriptionForKey("Output",visibleColumns.indexOf("Output")!=-1),columnDescriptionForKey("Documentation",visibleColumns.indexOf("Documentation")!=-1),columnDescriptionForKey("Operating System",visibleColumns.indexOf("Operating System")!=-1),columnDescriptionForKey("Language",visibleColumns.indexOf("Language")!=-1),columnDescriptionForKey("License",visibleColumns.indexOf("License")!=-1),columnDescriptionForKey("Link",visibleColumns.indexOf("Link")!=-1),columnDescriptionForKey("Accessibility",visibleColumns.indexOf("Accessibility")!=-1),columnDescriptionForKey("Download",visibleColumns.indexOf("Download")!=-1),columnDescriptionForKey("Collection",visibleColumns.indexOf("Collection")!=-1),columnDescriptionForKey("Cost",visibleColumns.indexOf("Cost")!=-1),columnDescriptionForKey("Maturity",visibleColumns.indexOf("Maturity")!=-1)]}}}).service("ToolPaginator",function(){this.currentPage=1,this.maxSize=5,this.pageSize=10}).service("ToolSorter",function(){var _this=this;this.order=!0,this.list=[{attrName:"lastUpdate",text:"Updated"},{attrName:"additionDate",text:"Added"},{attrName:"name",text:"Name"},{attrName:"citationCount",text:"Citation Count"},{attrName:"citationDate",text:"Publication Date"}],this.sortBy=this.list[0];var scoreEntry={attrName:"score",text:"Score"};this.setSortOption=function(parameter){if(void 0==parameter)this.sortBy=this.list[0];else for(var i=0;i<this.list.length;i++)this.list[i].attrName==parameter&&(this.sortBy=this.list[i])},this.addScore=function(){_.isEqual(scoreEntry,_this.list[0])||(_this.list.unshift(scoreEntry),_this.sortBy=_this.list[0])},this.removeScore=function(){_.isEqual(scoreEntry,_this.list[0])&&(_this.list.splice(0,1),_this.sortBy=_this.list[0])}}).service("DisplayModeSelector",function(){this.list=[{attrName:"cards",text:"Compact"},{attrName:"grid",text:"Detailed"}],this.mode=this.list[0]}).factory("Tool",["$resource",function($resource){return $resource("/api/t/:id",null,{query:{isArray:!1,method:"GET"},update:{method:"PUT"}})}]).factory("DisownToolService",["$resource",function($resource){return $resource("/api/t/:id/disown",{id:"@id"},{disown:{method:"POST"}})}]).factory("ToolCreateValidator",["$resource",function($resource){return $resource("/api/t/:id/validate",null,{update:{method:"PUT"}})}]).factory("ToolUpdateValidator",["$resource",function($resource){return $resource("/api/t/:id/validate",null,{update:{method:"PUT"}})}]).factory("Ontology",["$resource",function($resource){return $resource("/api/o/:name",null,{})}]).factory("UsedTerms",["$resource",function($resource){return $resource("/api/used-terms/:usedTermName",null,{query:{isArray:!0,method:"GET"}})}]).service("Attribute",function(){this.description={everything:{label:"Everything"},name:{description:"Sofware name.",label:"Name"},toolType:{description:"A type of application software: a tool can have more than one type.",label:"Tool type"},version:{description:"Software version information. Use 'Add version' to enter individual version numbers (if practical).",label:"Current version"},description:{description:"Software description, e.g. a few sentences adapted from the software publication abstract or homepage.",label:"Description"},operation:{description:"A basic operation performed by this software function.",label:"Function"},functionNote:{description:"Concise comment about this function, if not apparent from the description and EDAM annotations.",label:"Function description"},functionName:{description:"Name of the function (EDAM term)",label:"Function Name"},input:{description:"Details of input data for this function.",label:"Input"},inputDataType:{description:"Type of input data.",label:"Data type"},inputDataFormat:{description:"Allowed format(s) of the input data.",label:"Data format"},outputDataType:{description:"Type of output data.",label:"Data type"},outputDataFormat:{description:"Allowed format(s) of the output data.",label:"Data format"},dataDescription:{description:"Free text description of the data.",label:"Data description"},output:{description:"Details of output data for this function.",label:"Output"},topic:{description:"A scientific domain that the tool serves, or another general category.",label:"Topic"},homepage:{description:"Homepage of the software, or some URL that best serves this purpose.",label:"Homepage URL"},contact:{description:"Primary points of contact, e.g. helpdesk or an individual",label:"Contact"},contactName:{description:"Name of contact",label:"Name"},contactEmail:{description:"Email address of contact",label:"E-mail"},resourceType:{description:"Basic resource type: Tool, Database etc.",label:"Resource type"},"interface":{description:"Resource interfaces: Web UI, Command line etc.",label:"Interface"},publications:{description:"Publications relevant to the resource (PMCID, PMID or DOI)",label:"Publications"},publicationsPrimaryID:{description:"PMCID, PMID or DOI of the publication",label:"ID of the primary publication"},publicationsOtherID:{description:"PMCID, PMID or DOI of other relevant publications",label:"ID of other publications"},docs:{description:"Links to the documentation",label:"Documentation"},docsHome:{description:"Main page of documentation",label:"Main page"},docsTermsOfUse:{description:"Link to the Terms Of Use",label:"Terms of Use"},docsDownload:{description:"Link to the download instructions",label:"Download"},docsCitationInstructions:{description:"Link to the citation instructions",label:"Citation instructions"},docsDownloadSource:{description:"Source code downloads page (URL)",label:"Download source"},docsDownloadBinaries:{description:"Software binaries downloads page (URL)",label:"Download binaries"},docsGithub:{description:"Github page (URL)",label:"Github page"},affiliation:{description:"Entry owner",label:"Affiliation"},mirror:{description:"Mirror homepage (URL)",label:"Mirror"},collectionID:{description:"A tag which assigns the software to a collection in bio.tools.",label:"Collection"},sourceRegistry:{description:"Link to the registry (or other collection) from which the software was imported (URL)",label:"Source registry"},canonicalID:{description:"Canonical Identifier (typically a URI) of the resource, if one is available",label:"Canonical ID"},cost:{description:"Monetary cost of acquiring the software.",label:"Cost"},elixirInfo:{description:"Information specific to ELIXIR services",label:"ELIXIR info"},elixirStatus:{description:"ELIXIR Core Service",label:"ELIXIR status"},elixirNode:{description:"Name of one of countries participating in ELIXIR",label:"ELIXIR node"},maturity:{description:"Development stage of the software product.",label:"Maturity"},platform:{description:"Platforms supported by a downloadable software package",label:"Platform"},language:{description:"Name of a programming language, e.g. used for the software source code.",label:"Language"},license:{description:'Software or data usage license. Use "Unlicensed", "Proprietary" (for commercial licenses) or "Other" in special cases. ',label:"License"},credit:{description:"Entities that should be credited",label:"Credit"},creditsDeveloper:{description:"Name of person that developed the resource",label:"Developer"},creditsContributor:{description:"Name of person contributing to the resource",label:"Contributor"},creditsInstitution:{description:"Name of the institution that developed or provide the resource",label:"Institution"},creditsInfrastructure:{description:"Research infrastructure in which the resource was developed or provided",label:"Infrastructure"},creditsFunding:{description:"Details of grant funding supporting the resource",label:"Funding"},uses:{description:"Other resources this resource uses, e.g. as a data source, or auxillary program",label:"Uses"},usesName:{description:"Name of a resource that this resource uses",label:"Name"},usesHomepage:{description:"Homepage of a resource that this resource uses",label:"Homepage"},usesVersion:{description:"Version number of a resource that this resources uses",label:"Version"},operatingSystem:{description:"The operating system supported by a downloadable software.",label:"Operating system"},accessibility:{description:"How freely available the software is for use.",label:"Accessibility"},cmd:{description:"Relevant command, command-line fragment or option for executing this function or running the tool in this mode.",label:"Command"},linkURL:{description:"A link of some relevance to the software (URL).",label:"linkURL"},linkType:{description:"The type of data, information or system that is obtained when the link is resolved.",label:"linkType"},linkNote:{description:"Comment about the link.",label:"linkNote"},downloadURL:{description:"Link to download (or repository providing a download) for the software.",label:"downloadURL"},downloadType:{description:"Type of downloadable resource.",label:"downloadType"},downloadNote:{description:"Comment about the download.",label:"downloadNote"},downloadVersion:{description:"Version information (typically a version number) of the software applicable to this download.",label:"linkNote"},documentationURL:{description:"Link to documentation for the tool (URL).",label:"documentationURL"},documentationType:{description:"Type of documentation that is linked to.",label:"documentationType"},documentationNote:{description:"Comment about the documentation.",label:"documentationNote"},publicationPMCID:{description:"PubMed Central Identifier (PMCID) of a publication about the software.",label:"publicationPMCID"},publicationPMID:{description:"PubMed Identifier (PMID) of a publication about the software.",label:"publicationPMID"},publicationDOI:{description:"Digital Object Identifier (DOI) of a publication about the software.",label:"publicationDOI"},publicationType:{description:"Type of publication.",label:"publicationType"},publicationVersion:{description:"Version information (typically a version number) of the software applicable to this publication.",label:"publicationVersion"},creditName:{description:"Name of the entity that is credited.",label:"creditName"},creditEmail:{description:"Email address of the entity that is credited.",label:"creditEmail"},creditURL:{description:"URL for the entity that is credited, e.g. homepage of an institute.",label:"creditURL"},creditOrcidID:{description:"Unique identifier (ORCID iD) of a person that is credited.",label:"creditOrcidID"},creditEntityType:{description:"Type of entity that is credited.",label:"creditEntityType"},creditEntityRole:{description:"Role performed by entity that is credited.",label:"creditEntityRole"},creditNote:{description:"A comment about the credit.",label:"creditNote"},elixirPlatfrom:{description:"Name of one of countries participating in ELIXIR",label:"elixirPlatform"},otherID:{description:"A unique identifier of the software, typically assigned by an ID-assignment authority other than bio.tools, e.g. RRID:SCR_015644",label:"otherID"},otherIDValue:{description:"Value of tool identifier, e.g. RRID:SCR_001156",label:"otherIDValue"},otherIDType:{description:"Type of tool identifier, e.g. rrid",label:"otherIDType"},otherIDVersion:{description:"Version information (typically a version number) of the software applicable to this identifier, e.g. 1.4",label:"otherIDVersion"}}}).factory("CheckUserEditingRights",["User",function(User){return{canEdit:function(resource){if(User.isSuperuser())return!0;if(User.getUsername()==resource.owner)return!0;if(void 0!=resource.editPermission){if("public"==resource.editPermission.type)return!0;if("group"==resource.editPermission.type)for(var index in resource.editPermission.authors)if(User.getUsername()==resource.editPermission.authors[index])return!0}return!1},isOwner:function(resource){return User.getUsername()==resource.owner}}}]).factory("ToolVersionProvider",["$http",function($http){return{getVersions:function(toolId){return $http({method:"GET",url:"/api/tool/"+toolId+"/version"}).then(function(response){return response.data},function(response){return[]})}}}]).factory("EnvironmentChecker",["$http",function($http){return{getEnvironment:function(){return $http({method:"GET",url:"/api/env/"}).then(function(response){return response.data},function(response){return[]})}}}]),angular.module("elixir_front.controllers").controller("SubdomainAdminController",["$scope","$stateParams","DomainConnection","DomainDetailConnection",function($scope,$stateParams,DomainConnection,DomainDetailConnection){var vm=this;$scope.isLoadingSubdomains=!0,$scope.subdomains=[],$scope.deleteSubdomainAtIndex=function(index){var deleteSubdomain=$scope.subdomains[index];$scope.subdomains.splice(index,1);DomainDetailConnection["delete"]({domain:deleteSubdomain.name},function(data){},function(error){})},vm.loadSubdomains=function(){$scope.isLoadingSubdomains=!0,$scope.subdomains=[];DomainConnection.query({},function(data){$scope.subdomains=data,$scope.isLoadingSubdomains=!1},function(errorData){})},vm.loadSubdomains()}]).controller("SubdomainController",["$scope","$stateParams","ToolListOverviewConnection","DomainDetailConnection","DomainConnection",function($scope,$stateParams,ToolListOverviewConnection,DomainDetailConnection,DomainConnection){var vm=this;$scope.ToolListOverviewConnection=ToolListOverviewConnection,$scope.updating=!1,$scope.loading=""!=$stateParams.id,$scope.toolsPerPageCount=10,$scope.search={},$scope.search.searchOption="name",$scope.search.loadingSearchResults=!1,$scope.search.searchResults=[],$scope.search.searchString="",$scope.search.noResults=!1,$scope.search.currentPage=1,$scope.search.totalPages=1,$scope.subdomain={},$scope.subdomain.exists=""!=$stateParams.id,$scope.subdomain.domain=$stateParams.id,$scope.subdomain.title="",$scope.subdomain.subtitle="",$scope.subdomain.description="",$scope.subdomain.toolList=[],$scope.subdomain.resources=[],$scope.subdomain.currentPage=1,$scope.subdomain.totalPages=1,$scope.errors={},$scope.errors.general="",$scope.errors.domain="",$scope.errors.loading="",$scope.response={},$scope.response.general="",$scope.clearButtonPressed=function(){$scope.search.currentPage=1;var searchQuery={};searchQuery[$scope.search.searchOption]=$scope.search.searchString,$scope.search.searchResults=[]},$scope.searchButtonPressed=function(){$scope.search.currentPage=1;var searchQuery={};searchQuery[$scope.search.searchOption]=$scope.search.searchString,vm.performSearch(searchQuery)},$scope.toolInSubdomain=function(toolID,versionID){for(var index in $scope.subdomain.resources){var currentTool=$scope.subdomain.resources[index];if(currentTool.biotoolsID==toolID)return!0}return!1},$scope.addToSubdomain=function(index){var selectedTool=$scope.search.searchResults[index],selectedDict={biotoolsID:selectedTool.biotoolsID,versionId:selectedTool.versionId};$scope.subdomain.toolList.push(selectedTool),$scope.subdomain.resources.push(selectedDict),$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.addAllToSubdomain=function(){for(var tool in $scope.search.searchResults){var selectedTool=$scope.search.searchResults[tool];selectedTool.biotoolsID&&0==$scope.toolInSubdomain(selectedTool.biotoolsID,selectedTool.versionId)&&($scope.subdomain.toolList.push(selectedTool),$scope.subdomain.resources.push({biotoolsID:selectedTool.biotoolsID,versionId:selectedTool.versionId}))}$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.removeFromSubdomain=function(index){$scope.subdomain.toolList.splice(index,1),$scope.subdomain.resources.splice(index,1),$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.saveSubdomain=function(){$scope.updating=!0,$scope.errors.general="",$scope.response.general="";DomainConnection.create(vm.subdomainQuery(),function(data){$scope.subdomain.exists=!0,$scope.response.general="Domain '"+$scope.subdomain.domain+"' was created.",$scope.updating=!1},function(error){$scope.errors.general=error.data.details,$scope.updating=!1})},vm.fetchSubdomain=function(){$scope.errors.general="",$scope.response.general="";DomainDetailConnection.query({domain:$scope.subdomain.domain},function(data){$scope.subdomain.title=data.data.title,$scope.subdomain.subtitle=data.data.sub_title,$scope.subdomain.description=data.data.description;for(var index in data.data.resources){var tool=data.data.resources[index];tool.biotoolsID=tool.biotoolsID,$scope.subdomain.toolList.push(tool),$scope.subdomain.resources.push(tool)}$scope.loading=!1,$scope.updating=!1,$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},function(error){$scope.errors.loading="Data failed to load. Please try to refresh this website. "+error.data.details})},$scope.updateSubdomain=function(){$scope.updating=!0,$scope.errors.general="",$scope.response.general="";DomainDetailConnection.update(vm.subdomainQuery(),function(data){$scope.response.general="Domain '"+$scope.subdomain.domain+"' was updated with "+$scope.subdomain.resources.length+" entries.",$scope.updating=!1},function(error){$scope.errors.general=error.data.details,$scope.updating=!1})},$scope.makeIdURLSafe=function(value){if($scope.errors.domain="","undefined"!=typeof value)var id=value.replace(/[^a-zA-Z0-9_~ .-]*/g,"").replace(/[ ]+/g,"_");value!=id&&($scope.errors.domain="Entered value '"+value+"' has been modified. Only URL safe characters can be used for the identifier."),$scope.subdomain.domain=id},vm.performSearch=function(query){$scope.search.loadingSearchResults=!0,$scope.search.noResults=!1;var response=ToolListOverviewConnection.query(query,function(){$scope.search.currentPage=1,$scope.search.searchResults=response,$scope.search.loadingSearchResults=!1,$scope.search.totalPages=$scope.search.searchResults.length/$scope.toolsPerPageCount*10,0==response.length&&($scope.search.noResults=!0)})},vm.subdomainQuery=function(){return{domain:$scope.subdomain.domain,title:$scope.subdomain.title,sub_title:$scope.subdomain.subtitle,description:$scope.subdomain.description,resources:$scope.subdomain.resources}},$scope.loading&&vm.fetchSubdomain()}]),angular.module("elixir_front.controllers").controller("WorkflowController",["$scope","$stateParams","$modal","WorkflowProvider",function($scope,$stateParams,$modal,WorkflowProvider){var vm=this;$scope.loading=!0,$scope.filteredWorkflows=[],$scope.workflows=[],vm.loadRequests=function($item,$model,$label){$scope.loading=!0,WorkflowProvider.getWorkflows().then(function(response){$scope.workflows=response.data,$scope.filterWorkflows(),$scope.loading=!1},function(response){})},$scope.filterWorkflows=function(){var searchString=$scope.search.searchString;void 0==searchString||""==searchString?$scope.filteredWorkflows=$scope.workflows:$scope.filteredWorkflows=$scope.workflows.filter(function(x){var foundAnnotations=x.annotations.filter(function(annotation){var regularExpression=new RegExp(searchString,"i");return!!(annotation.title.match(regularExpression)||annotation.title.match(regularExpression)||annotation.edam_term.match(regularExpression))});return foundAnnotations.length>0})},$scope.openModal=function(workflow){$modal.open({templateUrl:"partials/workflows/modal.html",controller:["$modalInstance","workflow",WorkflowModalCtrl],controllerAs:"vm",windowClass:"workflow-modal-window",resolve:{workflow:function(){return workflow}}})},$scope.handleAnnotationClick=function(annotation){console.log(annotation)},$scope.search=function(){console.log(string)},vm.loadRequests()}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("WorkflowProvider",["$http",function($http){return{getWorkflows:function(){return $http({method:"GET",url:"/api/w",params:{}})}}}]),function(){var module,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};module=angular.module("angularBootstrapNavTree",[]),module.directive("abnTree",["$timeout",function($timeout){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li tooltips tooltip-side="right" tooltip-content="{{ resourceModel[row.branch.name].description }}" ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label"> {{ resourceModel[row.branch.name].label }} </span></a></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"=",resourceModel:"="},link:function(scope,element,attrs){var error,expand_all_parents,expand_level,for_all_ancestors,for_each_branch,get_parent,n,on_treeData_change,select_branch,selected_branch,tree;if(error=function(s){},null==attrs.iconExpand&&(attrs.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"),null==attrs.iconCollapse&&(attrs.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"),null==attrs.iconLeaf&&(attrs.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),!scope.treeData)return void alert("no treeData defined for the tree!");if(null==scope.treeData.length){if(null==treeData.label)return void alert("treeData should be an array of root branches");scope.treeData=[treeData]}return for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(f(branch,level),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},selected_branch=null,select_branch=function(branch){if(!branch)return null!=selected_branch&&(selected_branch.selected=!1),void(selected_branch=null);if(branch!==selected_branch){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,expand_all_parents(branch),null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.user_clicks_branch=function(branch){if(branch!==selected_branch)return select_branch(branch)},get_parent=function(child){var parent;return parent=void 0,child.parent_uid&&for_each_branch(function(b){if(b.uid===child.parent_uid)return parent=b}),parent},for_all_ancestors=function(child,fn){var parent;if(parent=get_parent(child),null!=parent)return fn(parent),for_all_ancestors(parent,fn)},expand_all_parents=function(child){return for_all_ancestors(child,function(b){return b.expanded=!0})},scope.tree_rows=[],on_treeData_change=function(){var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(for_each_branch(function(b,level){if(!b.uid)return b.uid=""+Math.random()}),for_each_branch(function(b){var child,_i,_len,_ref,_results;if(angular.isArray(b.children)){for(_ref=b.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(child.parent_uid=b.uid);return _results}}),scope.tree_rows=[],for_each_branch(function(branch){var child,f;return branch.children?branch.children.length>0?(f=function(e){return"string"==typeof e?{label:e,children:[]}:e},branch.children=function(){var _i,_len,_ref,_results;for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(f(child));return _results}()):void 0:branch.children=[]}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded&&(branch.expanded=!1),null==branch.classes&&(branch.classes=[]),branch.noLeaf||branch.children&&0!==branch.children.length?tree_icon=branch.expanded?attrs.iconCollapse:attrs.iconExpand:(tree_icon=attrs.iconLeaf,__indexOf.call(branch.classes,"leaf")<0&&branch.classes.push("leaf")),scope.tree_rows.push({level:level,branch:branch,label:branch.label,classes:branch.classes,tree_icon:tree_icon,visible:visible}),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return _results},scope.$watch("treeData",on_treeData_change,!0),null!=attrs.initialSelection&&for_each_branch(function(b){if(b.label===attrs.initialSelection)return $timeout(function(){return select_branch(b)})}),n=scope.treeData.length,for_each_branch(function(b,level){return b.level=level,b.expanded=b.level<expand_level}),null!=scope.treeControl&&angular.isObject(scope.treeControl)?(tree=scope.treeControl,tree.expand_all=function(){return for_each_branch(function(b,level){return b.expanded=!0})},tree.collapse_all=function(){return for_each_branch(function(b,level){return b.expanded=!1})},tree.get_first_branch=function(){if(n=scope.treeData.length,n>0)return scope.treeData[0]},tree.select_first_branch=function(){var b;return b=tree.get_first_branch(),tree.select_branch(b)},tree.get_selected_branch=function(){return selected_branch},tree.get_parent_branch=function(b){return get_parent(b)},tree.select_branch=function(b){return select_branch(b),b},tree.get_children=function(b){return b.children},tree.select_parent_branch=function(b){var p;if(null==b&&(b=tree.get_selected_branch()),null!=b&&(p=tree.get_parent_branch(b),null!=p))return tree.select_branch(p),p},tree.add_branch=function(parent,new_branch){return null!=parent?(parent.children.push(new_branch),parent.expanded=!0):scope.treeData.push(new_branch),new_branch},tree.add_root_branch=function(new_branch){return tree.add_branch(null,new_branch),new_branch},tree.expand_branch=function(b){if(null==b&&(b=tree.get_selected_branch()),null!=b)return b.expanded=!0,b},tree.collapse_branch=function(b){if(null==b&&(b=selected_branch),null!=b)return b.expanded=!1,b},tree.get_siblings=function(b){var p,siblings;if(null==b&&(b=selected_branch),null!=b)return p=tree.get_parent_branch(b),siblings=p?p.children:scope.treeData},tree.get_next_sibling=function(b){var i,siblings;if(null==b&&(b=selected_branch),null!=b&&(siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),i<n))return siblings[i+1]},tree.get_prev_sibling=function(b){var i,siblings;if(null==b&&(b=selected_branch),siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),i>0)return siblings[i-1]},tree.select_next_sibling=function(b){var next;if(null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_sibling(b),null!=next))return tree.select_branch(next)},tree.select_prev_sibling=function(b){var prev;if(null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_sibling(b),null!=prev))return tree.select_branch(prev)},tree.get_first_child=function(b){var _ref;if(null==b&&(b=selected_branch),null!=b&&(null!=(_ref=b.children)?_ref.length:void 0)>0)return b.children[0]},tree.get_closest_ancestor_next_sibling=function(b){var next,parent;return next=tree.get_next_sibling(b),
null!=next?next:(parent=tree.get_parent_branch(b),tree.get_closest_ancestor_next_sibling(parent))},tree.get_next_branch=function(b){var next;if(null==b&&(b=selected_branch),null!=b)return next=tree.get_first_child(b),null!=next?next:next=tree.get_closest_ancestor_next_sibling(b)},tree.select_next_branch=function(b){var next;if(null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_branch(b),null!=next))return tree.select_branch(next),next},tree.last_descendant=function(b){var last_child;return n=b.children.length,0===n?b:(last_child=b.children[n-1],tree.last_descendant(last_child))},tree.get_prev_branch=function(b){var parent,prev_sibling;if(null==b&&(b=selected_branch),null!=b)return prev_sibling=tree.get_prev_sibling(b),null!=prev_sibling?tree.last_descendant(prev_sibling):parent=tree.get_parent_branch(b)},tree.select_prev_branch=function(b){var prev;if(null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_branch(b),null!=prev))return tree.select_branch(prev),prev}):void 0}}}])}.call(this),angular.module("angularDjangoRegistrationAuthApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).run(function(djangoAuth){djangoAuth.initialize("/api/rest-auth",!1)}),angular.module("angularDjangoRegistrationAuthApp").service("djangoAuth",function($q,$http,$cookies,$rootScope){var service={API_URL:"/api/rest-auth",use_session:!1,authenticated:null,authPromise:null,request:function(args){localStorage.token&&($http.defaults.headers.common.Authorization="Token "+localStorage.token),params=args.params||{},args=args||{};var deferred=$q.defer(),url=this.API_URL+args.url,method=args.method||"GET",params=params,data=args.data||{};return $http({url:url,withCredentials:this.use_session,method:method.toUpperCase(),headers:{"X-CSRFToken":$cookies.csrftoken},params:params,data:data}).success(angular.bind(this,function(data,status,headers,config){deferred.resolve(data,status)})).error(angular.bind(this,function(data,status,headers,config){console.log("error syncing with: "+url),data&&(data.status=status),0==status&&(""==data&&(data={},data.status=0,data.non_field_errors=["Could not connect. Please try again."]),null==data&&(data={},data.status=0,data.non_field_errors=["Server timed out. Please try again."])),deferred.reject(data,status,headers,config)})),deferred.promise},register:function(username,password1,password2,email,more){var data={username:username,password1:password1,password2:password2,email:email};return data=angular.extend(data,more),this.request({method:"POST",url:"/registration/",data:data})},login:function(username,password){var djangoAuth=this;return this.request({method:"POST",url:"/login/",data:{username:username,password:password}}).then(function(data){djangoAuth.use_session||($http.defaults.headers.common.Authorization="Token "+data.key,localStorage.token=data.key),djangoAuth.authenticated=!0,$rootScope.$broadcast("djangoAuth.logged_in",data)})},logout:function(){var djangoAuth=this;return this.request({method:"POST",url:"/logout/"}).then(function(data){delete $http.defaults.headers.common.Authorization,delete localStorage.token,djangoAuth.authenticated=!1,$rootScope.$broadcast("djangoAuth.logged_out")})},changePassword:function(password1,password2){return this.request({method:"POST",url:"/password/change/",data:{new_password1:password1,new_password2:password2}})},resetPassword:function(email){return this.request({method:"POST",url:"/password/reset/",data:{email:email}})},profile:function(){return this.request({method:"GET",url:"/user/"})},updateProfile:function(data){return this.request({method:"PATCH",url:"/user/",data:data})},verify:function(key){return this.request({method:"POST",url:"/registration/verify-email/",data:{key:key}})},confirmReset:function(uid,token,password1,password2){return this.request({method:"POST",url:"/password/reset/confirm/",data:{uid:uid,token:token,new_password1:password1,new_password2:password2}})},authenticationStatus:function(restrict,force){restrict=restrict||!1,force=force||!1,(null==this.authPromise||force)&&(this.authPromise=this.request({method:"GET",url:"/user/"}));var da=this,getAuthStatus=$q.defer();return null==this.authenticated||force?this.authPromise.then(function(){da.authenticated=!0,getAuthStatus.resolve()},function(){da.authenticated=!1,restrict?getAuthStatus.reject("User is not logged in."):getAuthStatus.resolve()}):0==this.authenticated&&restrict?getAuthStatus.reject("User is not logged in."):getAuthStatus.resolve(),getAuthStatus.promise},initialize:function(url,sessions){return this.API_URL=url,this.use_session=sessions,this.authenticationStatus()}};return service}),function(){var KEYS={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},MAX_SAFE_INTEGER=9007199254740991,SUPPORTED_INPUT_TYPES=["text","email","url"],tagsInput=angular.module("ngTagsInput",[]);tagsInput.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function($timeout,$document,$window,tagsInputConfig,tiUtil){function TagList(options,events,onTagAdding,onTagRemoving){var getTagText,setTagText,tagIsValid,self={};return getTagText=function(tag){return tiUtil.safeToString(tag[options.displayProperty])},setTagText=function(tag,text){tag[options.displayProperty]=text},tagIsValid=function(tag){var tagText=getTagText(tag);return tagText&&tagText.length>=options.minLength&&tagText.length<=options.maxLength&&options.allowedTagsPattern.test(tagText)&&!tiUtil.findInObjectArray(self.items,tag,options.keyProperty||options.displayProperty)&&onTagAdding({$tag:tag})},self.items=[],self.addText=function(text){var tag={};return setTagText(tag,text),self.add(tag)},self.add=function(tag){var tagText=getTagText(tag);return options.replaceSpacesWithDashes&&(tagText=tiUtil.replaceSpacesWithDashes(tagText)),setTagText(tag,tagText),tagIsValid(tag)?(self.items.push(tag),events.trigger("tag-added",{$tag:tag})):tagText&&events.trigger("invalid-tag",{$tag:tag}),tag},self.remove=function(index){var tag=self.items[index];if(onTagRemoving({$tag:tag}))return self.items.splice(index,1),self.clearSelection(),events.trigger("tag-removed",{$tag:tag}),tag},self.select=function(index){index<0?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index]},self.selectPrior=function(){self.select(--self.index)},self.selectNext=function(){self.select(++self.index)},self.removeSelected=function(){return self.remove(self.index)},self.clearSelection=function(){self.selected=null,self.index=-1},self.clearSelection(),self}function validateType(type){return SUPPORTED_INPUT_TYPES.indexOf(type)!==-1}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&",attributeList:"="},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function($scope,$attrs,$element){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("tagsInput",$scope,$attrs,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",validateType],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,MAX_SAFE_INTEGER],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,MAX_SAFE_INTEGER],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),$scope.tagList=new TagList($scope.options,$scope.events,tiUtil.handleUndefinedResult($scope.onTagAdding,!0),tiUtil.handleUndefinedResult($scope.onTagRemoving,!0)),this.registerAutocomplete=function(){var input=$element.find("input");return{addTag:function(tag){return $scope.tagList.add(tag)},focusInput:function(){input[0].focus()},getTags:function(){return $scope.tagList.items},getCurrentTagText:function(){return $scope.newTag.text()},getOptions:function(){return $scope.options},on:function(name,handler){return $scope.events.on(name,handler),this}}},this.registerTagItem=function(){return{getOptions:function(){return $scope.options},removeTag:function(index){$scope.disabled||$scope.tagList.remove(index)}}}}],link:function(scope,element,attrs,ngModelCtrl){var setElementValidity,hotkeys=[KEYS.enter,KEYS.comma,KEYS.space,KEYS.backspace,KEYS["delete"],KEYS.left,KEYS.right],tagList=scope.tagList,events=scope.events,options=scope.options,input=element.find("input"),validationOptions=["minTags","maxTags","allowLeftoverText"];setElementValidity=function(){ngModelCtrl.$setValidity("maxTags",tagList.items.length<=options.maxTags),ngModelCtrl.$setValidity("minTags",tagList.items.length>=options.minTags),ngModelCtrl.$setValidity("leftoverText",!(!scope.hasFocus&&!options.allowLeftoverText)||!scope.newTag.text())},ngModelCtrl.$isEmpty=function(value){return!value||!value.length},scope.newTag={text:function(value){return angular.isDefined(value)?(scope.text=value,void events.trigger("input-change",value)):scope.text||""},invalid:null},scope.track=function(tag){return tag[options.keyProperty||options.displayProperty]},scope.$watch("tags",function(value){value?(tagList.items=tiUtil.makeObjectArray(value,options.displayProperty),scope.tags=tagList.items):tagList.items=[]}),scope.$watch("tags.length",function(){setElementValidity(),ngModelCtrl.$validate()}),attrs.$observe("disabled",function(value){scope.disabled=value}),scope.eventHandlers={input:{keydown:function($event){events.trigger("input-keydown",$event)},focus:function(){scope.hasFocus||(scope.hasFocus=!0,events.trigger("input-focus"))},blur:function(){$timeout(function(){var activeElement=$document.prop("activeElement"),lostFocusToBrowserWindow=activeElement===input[0],lostFocusToChildElement=element[0].contains(activeElement);!lostFocusToBrowserWindow&&lostFocusToChildElement||(scope.hasFocus=!1,events.trigger("input-blur"))})},paste:function($event){$event.getTextData=function(){var clipboardData=$event.clipboardData||$event.originalEvent&&$event.originalEvent.clipboardData;return clipboardData?clipboardData.getData("text/plain"):$window.clipboardData.getData("Text")},events.trigger("input-paste",$event)}},host:{click:function(){scope.disabled||input[0].focus()}},tag:{click:function(tag){events.trigger("tag-clicked",{$tag:tag})}}},events.on("tag-added",scope.onTagAdded).on("invalid-tag",scope.onInvalidTag).on("tag-removed",scope.onTagRemoved).on("tag-clicked",scope.onTagClicked).on("tag-added",function(){scope.newTag.text("")}).on("tag-added tag-removed",function(){scope.tags=tagList.items,ngModelCtrl.$setDirty()}).on("invalid-tag",function(){scope.newTag.invalid=!0}).on("option-change",function(e){validationOptions.indexOf(e.name)!==-1&&setElementValidity()}).on("input-change",function(){tagList.clearSelection(),scope.newTag.invalid=null}).on("input-focus",function(){element.triggerHandler("focus"),ngModelCtrl.$setValidity("leftoverText",!0)}).on("input-blur",function(){options.addOnBlur&&!options.addFromAutocompleteOnly&&tagList.addText(scope.newTag.text()),element.triggerHandler("blur"),setElementValidity()}).on("input-keydown",function(event){var shouldAdd,shouldRemove,shouldSelect,shouldEditLastTag,key=event.keyCode,addKeys={};if(!tiUtil.isModifierOn(event)&&hotkeys.indexOf(key)!==-1){if(addKeys[KEYS.enter]=options.addOnEnter,addKeys[KEYS.comma]=options.addOnComma,addKeys[KEYS.space]=options.addOnSpace,shouldAdd=!options.addFromAutocompleteOnly&&addKeys[key],shouldRemove=(key===KEYS.backspace||key===KEYS["delete"])&&tagList.selected,shouldEditLastTag=key===KEYS.backspace&&0===scope.newTag.text().length&&options.enableEditingLastTag,shouldSelect=(key===KEYS.backspace||key===KEYS.left||key===KEYS.right)&&0===scope.newTag.text().length&&!options.enableEditingLastTag,shouldAdd)tagList.addText(scope.newTag.text());else if(shouldEditLastTag){var tag;tagList.selectPrior(),tag=tagList.removeSelected(),tag&&scope.newTag.text(tag[options.displayProperty])}else shouldRemove?tagList.removeSelected():shouldSelect&&(key===KEYS.left||key===KEYS.backspace?tagList.selectPrior():key===KEYS.right&&tagList.selectNext());(shouldAdd||shouldSelect||shouldRemove||shouldEditLastTag)&&event.preventDefault()}}).on("input-paste",function(event){if(options.addOnPaste){var data=event.getTextData(),tags=data.split(options.pasteSplitPattern);tags.length>1&&(tags.forEach(function(tag){tagList.addText(tag)}),event.preventDefault())}})}}}]),tagsInput.directive("tiTagItem",["tiUtil",function(tiUtil){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,tagsInputCtrl){var tagsInput=tagsInputCtrl.registerTagItem(),options=tagsInput.getOptions();scope.$$template=options.template,scope.$$removeTagSymbol=options.removeTagSymbol,scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty])},scope.$removeTag=function(){tagsInput.removeTag(scope.$index)},scope.$watch("$parent.$index",function(value){scope.$index=value})}}}]),tagsInput.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function($document,$timeout,$sce,$q,tagsInputConfig,tiUtil){function SuggestionList(loadFn,options,events){var getDifference,lastPromise,getTagId,self={};return getTagId=function(){return options.tagsInput.keyProperty||options.tagsInput.displayProperty},getDifference=function(array1,array2){return array1.filter(function(item){return!tiUtil.findInObjectArray(array2,item,getTagId(),function(a,b){return options.tagsInput.replaceSpacesWithDashes&&(a=tiUtil.replaceSpacesWithDashes(a),b=tiUtil.replaceSpacesWithDashes(b)),tiUtil.defaultComparer(a,b)})})},self.reset=function(){lastPromise=null,self.items=[],self.visible=!1,self.index=-1,self.selected=null,self.query=null},self.show=function(){options.selectFirstMatch?self.select(0):self.selected=null,self.visible=!0},self.load=tiUtil.debounce(function(query,tags){self.query=query;var promise=$q.when(loadFn({$query:query}));lastPromise=promise,promise.then(function(items){promise===lastPromise&&(items=tiUtil.makeObjectArray(items.data||items,getTagId()),items=getDifference(items,tags),self.items=items.slice(0,options.maxResultsToShow),self.items.length>0?self.show():(self.reset(),self.visible=!0))})},options.debounceDelay),self.selectNext=function(){self.select(++self.index)},self.selectPrior=function(){self.select(--self.index)},self.select=function(index){index<0?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index],events.trigger("suggestion-selected",index)},self.reset(),self}function scrollToElement(root,index){var element=root.find("li").eq(index),parent=element.parent(),elementTop=element.prop("offsetTop"),elementHeight=element.prop("offsetHeight"),parentHeight=parent.prop("clientHeight"),parentScrollTop=parent.prop("scrollTop");elementTop<parentScrollTop?parent.prop("scrollTop",elementTop):elementTop+elementHeight>parentHeight+parentScrollTop&&parent.prop("scrollTop",elementTop+elementHeight-parentHeight)}return{restrict:"E",require:"^tagsInput",scope:{source:"&",filter:"=",attributeList:"="},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("autoComplete",$scope,$attrs,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),$scope.suggestionList=new SuggestionList($scope.source,$scope.options,$scope.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return $scope.options},getQuery:function(){return $scope.suggestionList.query}}}}],link:function(scope,element,attrs,tagsInputCtrl){var shouldLoadSuggestions,hotkeys=[KEYS.enter,KEYS.tab,KEYS.escape,KEYS.up,KEYS.down],suggestionList=scope.suggestionList,tagsInput=tagsInputCtrl.registerAutocomplete(),options=scope.options,events=scope.events;options.tagsInput=tagsInput.getOptions(),shouldLoadSuggestions=function(value){return value&&value.length>=options.minLength||!value&&options.loadOnEmpty},scope.addSuggestionByIndex=function(index){suggestionList.select(index),scope.addSuggestion()},scope.addSuggestion=function(){var added=!1;return suggestionList.selected&&(suggestionList.selected.text="'"+suggestionList.selected.text+"'",tagsInput.addTag(angular.copy(suggestionList.selected)),suggestionList.reset(),tagsInput.focusInput(),added=!0),added},scope.track=function(item){return item[options.tagsInput.keyProperty||options.tagsInput.displayProperty]},tagsInput.on("tag-added tag-removed invalid-tag input-blur",function(){suggestionList.reset()}).on("input-change",function(value){shouldLoadSuggestions(value)?suggestionList.load(value,tagsInput.getTags()):suggestionList.reset()}).on("input-focus",function(){var value=tagsInput.getCurrentTagText();options.loadOnFocus&&shouldLoadSuggestions(value)&&suggestionList.load(value,tagsInput.getTags())}).on("input-keydown",function(event){var key=event.keyCode,handled=!1;if(!tiUtil.isModifierOn(event)&&hotkeys.indexOf(key)!==-1)return suggestionList.visible?key===KEYS.down?(suggestionList.selectNext(),handled=!0):key===KEYS.up?(suggestionList.selectPrior(),handled=!0):key===KEYS.escape?(suggestionList.reset(),handled=!0):key!==KEYS.enter&&key!==KEYS.tab||(handled=scope.addSuggestion()):key===KEYS.down&&scope.options.loadOnDownArrow&&(suggestionList.load(tagsInput.getCurrentTagText(),tagsInput.getTags()),handled=!0),handled?(event.preventDefault(),event.stopImmediatePropagation(),!1):void 0}),events.on("suggestion-selected",function(index){scrollToElement(element,index)});var initializing=!0;scope.$watch("filter.selected",function(){$timeout(initializing?function(){initializing=!1}:function(){suggestionList.load(tagsInput.getCurrentTagText(),tagsInput.getTags())})})}}}]),tagsInput.directive("tiAutocompleteMatch",["$sce","tiUtil",function($sce,tiUtil){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,autoCompleteCtrl){var autoComplete=autoCompleteCtrl.registerAutocompleteMatch(),options=autoComplete.getOptions();scope.$$template=options.template,scope.$index=scope.$parent.$index,scope.$highlight=function(text){return options.highlightMatchedText&&(text=tiUtil.safeHighlight(text,autoComplete.getQuery())),$sce.trustAsHtml(text)},scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty||options.tagsInput.displayProperty])}}}}]),tagsInput.directive("tiTranscludeAppend",function(){return function(scope,element,attrs,ctrl,transcludeFn){transcludeFn(function(clone){element.append(clone)})}}),tagsInput.directive("tiAutosize",["tagsInputConfig",function(tagsInputConfig){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var span,resize,threshold=tagsInputConfig.getTextAutosizeThreshold();span=angular.element('<span class="input"></span>'),span.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),element.parent().append(span),resize=function(originalValue){var width,value=originalValue;return angular.isString(value)&&0===value.length&&(value=attrs.placeholder),value&&(span.text(value),span.css("display",""),width=span.prop("offsetWidth"),span.css("display","none")),element.css("width",width?width+threshold+"px":""),originalValue},ctrl.$parsers.unshift(resize),ctrl.$formatters.unshift(resize),attrs.$observe("placeholder",function(value){ctrl.$modelValue||resize(value)})}}}]),tagsInput.directive("tiBindAttrs",function(){return function(scope,element,attrs){scope.$watch(attrs.tiBindAttrs,function(value){angular.forEach(value,function(value,key){attrs.$set(key,value)})},!0)}}),tagsInput.provider("tagsInputConfig",function(){var globalDefaults={},interpolationStatus={},autosizeThreshold=3;this.setDefaults=function(directive,defaults){return globalDefaults[directive]=defaults,this},this.setActiveInterpolation=function(directive,options){return interpolationStatus[directive]=options,this},this.setTextAutosizeThreshold=function(threshold){return autosizeThreshold=threshold,this},this.$get=["$interpolate",function($interpolate){var converters={};return converters[String]=function(value){return value},converters[Number]=function(value){return parseInt(value,10)},converters[Boolean]=function(value){return"true"===value.toLowerCase()},converters[RegExp]=function(value){return new RegExp(value)},{load:function(directive,scope,attrs,options){var defaultValidator=function(){return!0};scope.options={},angular.forEach(options,function(value,key){var type,localDefault,validator,converter,getDefault,updateValue;type=value[0],localDefault=value[1],validator=value[2]||defaultValidator,converter=converters[type],getDefault=function(){var globalValue=globalDefaults[directive]&&globalDefaults[directive][key];return angular.isDefined(globalValue)?globalValue:localDefault},updateValue=function(value){scope.options[key]=value&&validator(value)?converter(value):getDefault()},interpolationStatus[directive]&&interpolationStatus[directive][key]?attrs.$observe(key,function(value){updateValue(value),scope.events.trigger("option-change",{name:key,newValue:value})}):updateValue(attrs[key]&&$interpolate(attrs[key])(scope.$parent))})},getTextAutosizeThreshold:function(){return autosizeThreshold}}}]}),tagsInput.factory("tiUtil",["$timeout",function($timeout){var self={};return self.debounce=function(fn,delay){var timeoutId;return function(){var args=arguments;$timeout.cancel(timeoutId),timeoutId=$timeout(function(){fn.apply(null,args)},delay)}},self.makeObjectArray=function(array,key){if(!angular.isArray(array)||0===array.length||angular.isObject(array[0]))return array;var newArray=[];return array.forEach(function(item){var obj={};obj[key]=item,newArray.push(obj)}),newArray},self.findInObjectArray=function(array,obj,key,comparer){var item=null;return comparer=comparer||self.defaultComparer,array.some(function(element){if(comparer(element[key],obj[key]))return item=element,!0}),item},self.defaultComparer=function(a,b){return self.safeToString(a).toLowerCase()===self.safeToString(b).toLowerCase()},self.safeHighlight=function(str,value){function escapeRegexChars(str){return str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!value)return str;str=self.encodeHTML(str),value=self.encodeHTML(value);var expression=new RegExp("&[^;]+;|"+escapeRegexChars(value),"gi");return str.replace(expression,function(match){return match.toLowerCase()===value.toLowerCase()?"<em>"+match+"</em>":match})},self.safeToString=function(value){return angular.isUndefined(value)||null==value?"":value.toString().trim()},self.encodeHTML=function(value){return self.safeToString(value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},self.handleUndefinedResult=function(fn,valueIfUndefined){return function(){var result=fn.apply(null,arguments);return angular.isUndefined(result)?valueIfUndefined:result}},self.replaceSpacesWithDashes=function(str){return self.safeToString(str).replace(/\s/g,"-")},self.isModifierOn=function(event){return event.shiftKey||event.ctrlKey||event.altKey||event.metaKey},self.simplePubSub=function(){var events={};return{on:function(names,handler){return names.split(" ").forEach(function(name){events[name]||(events[name]=[]),events[name].push(handler)}),this},trigger:function(name,args){var handlers=events[name]||[];return handlers.every(function(handler){return self.handleUndefinedResult(handler,!0)(args)}),this}}},self}]),tagsInput.run(["$templateCache",function($templateCache){$templateCache.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),$templateCache.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),$templateCache.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="filter-list"><li class="filter-item" ng-class="{selected: $parent.filter.selected == filter}" ng-repeat="filter in filter.list" ng-click="$parent.filter.selected=filter">{{attributeList[filter].label}}</li></ul><hr class="hr-slim"><div class="clearfix" style="height:10px;"></div><ul class="suggestion-list"><li class="suggestion-item" ng-show="suggestionList.items.length < 1">No suggestions</li></ul><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),$templateCache.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),angular.module("angularDjangoRegistrationAuthApp").service("Validate",function(){return{message:{minlength:"This value is not long enough.",maxlength:"This value is too long.",email:"A properly formatted email address is required.",required:"This field is required."},more_messages:{demo:{required:"Here is a sample alternative required message."}},check_more_messages:function(name,error){return(this.more_messages[name]||[])[error]||null},validation_messages:function(field,form,error_bin){var messages=[];for(var e in form[field].$error)if(form[field].$error[e]){var special_message=this.check_more_messages(field,e);special_message?messages.push(special_message):this.message[e]?messages.push(this.message[e]):messages.push("Error: "+e)}var deduped_messages=[];angular.forEach(messages,function(el,i){deduped_messages.indexOf(el)===-1&&deduped_messages.push(el)}),error_bin&&(error_bin[field]=deduped_messages)},form_validation:function(form,error_bin){for(var field in form)"$"!=field.substr(0,1)&&this.validation_messages(field,form,error_bin)}}}),angular.module("elixir_front").controller("AboutController",["$scope",function($scope){}]),angular.module("elixir_front").directive("aboutContact",["$state","$stateParams",function($state,$stateParams){return{restrict:"EA",templateUrl:"components/about/aboutContact.html",scope:!0,link:function(scope,element,attrs){scope.name=attrs.name,scope.initials=attrs.initials,scope.role=attrs.role,scope.image=attrs.image}}}]),angular.module("elixir_front").directive("detailsBar",[function(){return{restrict:"A",templateUrl:"components/detailsBar/detailsBar.html",link:function(scope,element,attrs){scope.showToolbar="search"==scope.toState.name,scope.$watch(function(){return scope.toState.name},function(newVal,oldVal){scope.showToolbar="search"==scope.toState.name||"home"==scope.toState.name})}}}]).controller("DetailsBarController",["$rootScope","$scope","$state","$stateParams",function($rootScope,$scope,$state,$stateParams){}]),angular.module("elixir_front").controller("DomainBarController",["$scope","djangoAuth","$stateParams","$timeout","Domain",function($scope,djangoAuth,$stateParams,$timeout,Domain){var vm=this;vm.Domain=Domain,$timeout(function(){Domain.load($stateParams.domain)},500)}]).service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection",function(DomainDetailConnection){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description}}]),angular.module("elixir_front").service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection","$rootScope",function(DomainDetailConnection,$rootScope){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description},this.unload=function(){1==this.isLoaded()&&(this.current={},this.loaded=!1)}}]),angular.module("elixir_front").directive("navigationBar",[function(){return{restrict:"A",templateUrl:"components/navigationBar/navigationBar.html",link:function(scope,element,attrs){}}}]).controller("NavbarController",["$scope","djangoAuth","User","$stateParams","$timeout","Domain","$state",function($scope,djangoAuth,User,$stateParams,$timeout,Domain,$state){$scope.User=User,$scope.Domain=Domain,$timeout(function(){Domain.load($stateParams.domain)},500),$scope.logoutButtonClick=function(){djangoAuth.logout()},$scope.homeButtonClicked=function(){$scope.Domain.unload(),$state.go("home")}}]),angular.module("elixir_front").directive("pageFooter",[function(){return{restrict:"A",templateUrl:"components/pageFooter/pageFooter.html",link:function(scope,element,attrs){}}}]),angular.module("elixir_front").controller("ProfileController",["$scope","$state","djangoAuth","DisownToolService","User",function($scope,$state,djangoAuth,DisownToolService,User){$scope.profile={},$scope.loading=!0,$scope.User=User,djangoAuth.profile().then(function(response){$scope.profile=response,$scope.loading=!1},function(response){$scope.loading=!1}),$scope.disownEntry=function(entry){DisownToolService.disown({id:entry.id,version:entry.versionId},function(response){$scope.profile.resources=_.difference($scope.profile.resources,[entry])},function(response){
alert("Failed to disown "+entry.name+". Please check your connection and try again later.")})}}]),angular.module("elixir_front").directive("searchBar",["Query","ToolList","Highlighting","Attribute","$state","$stateParams","$timeout","UsedTerms","$q","filterFilter","Domain","$rootScope",function(Query,ToolList,Highlighting,Attribute,$state,$stateParams,$timeout,UsedTerms,$q,filterFilter,Domain,$rootScope){return{restrict:"A",templateUrl:"components/searchBar/searchBar.html",link:function(scope,element,attrs){function updateQuery(){Query.current=[];for(var prop in $stateParams)if($stateParams.hasOwnProperty(prop)&&!_.includes(["page","sort","ord","domain"],prop)&&"undefined"!=typeof $stateParams[prop])if("q"==prop){var list=$stateParams[prop].split("+");for(var i in list)0==_.isEmpty(list[i])&&Query.current.push({text:list[i],filter:"everything"})}else Query.current.push({text:$stateParams[prop],filter:prop});Highlighting.set(Query.current)}function getUsedTerms(term,params){var d=$q.defer();return params.usedTermName=term,UsedTerms.get(params,function(response){d.resolve(response.data)}),d.promise}function getSuggestions(){scope.usedTerms={};var params=_.clone($stateParams);params.page=null,params.sort=null,params.ord=null,scope.usedTerms.name=getUsedTerms("name",params),scope.usedTerms.topic=getUsedTerms("topic",params),scope.usedTerms["function"]=getUsedTerms("operation",params),scope.usedTerms.input=getUsedTerms("input",params),scope.usedTerms.output=getUsedTerms("output",params),scope.usedTerms.credit=getUsedTerms("credit",params),scope.usedTerms.collectionID=getUsedTerms("collectionID",params),scope.usedTerms.everything=getUsedTerms("all",params)}scope.Query=Query,scope.Attribute=Attribute,scope.ToolList=ToolList;$rootScope.$on("$stateChangeSuccess",function(event,toState,toStateParams,fromState,fromStateParams){"tool"===toState.name||"home"===toState.name?Query.current=[]:"search"===toState.name&&updateQuery()}),updateQuery(),scope.loadSuggestions=function(term,query){var deferred=$q.defer();return scope.usedTerms[term].then(function(list){deferred.resolve(filterFilter(list,query))}),deferred.promise},scope.filter={},scope.filter.selected="everything",scope.filter.list=["everything","name","topic","function","input","output","credit","collectionID"],getSuggestions(),scope.tagAdded=function(tag){tag.text=scope.normalizeTag(tag),tag.filter=scope.filter.selected,scope.filter.selected="everything"},scope.normalizeTag=function(tag){return tag.text.replace(/\+/g,"")},scope.tagsChanged=function(){$rootScope.$emit("search-bar-tags-changed",{}),$timeout(function(){var params={};params.page=1,params.sort=$stateParams.sort,void 0==params.sort&&(params.sort="score"),0==scope.Query.current.length&&(params.sort=void 0,params.page=void 0),params.ord=$stateParams.ord,params.domain=$stateParams.domain;for(var i in scope.Query.current)"everything"==scope.Query.current[i].filter?params.q&&params.q.length>0?params.q+="+"+scope.Query.current[i].text:params.q=scope.Query.current[i].text:params[scope.Query.current[i].filter]=scope.Query.current[i].text;$state.transitionTo("search",params,{notify:!0}),Highlighting.set(Query.current),$timeout(function(){getSuggestions(),ToolList.refresh()})})}}}}]),angular.module("elixir_front.services").factory("Stats",["$resource",function($resource){return $resource("/api/stats",null,{query:{isArray:!1,method:"GET"}})}]).factory("StatsTotalEntries",["$resource",function($resource){return $resource("/api/stats/total-entries",null,{query:{isArray:!0,method:"GET"}})}]).factory("StatsUserData",["$resource",function($resource){return $resource("/api/stats/users",null,{query:{isArray:!0,method:"GET"}})}]).factory("TotalAnnotationsStatsData",["$resource",function($resource){return $resource("/api/stats/annotation-count",null,{query:{isArray:!0,method:"GET"}})}]).service("StatsDataSource",["$stateParams","Stats","StatsTotalEntries","StatsUserData","TotalAnnotationsStatsData",function($stateParams,Stats,StatsTotalEntries,StatsUserData,TotalAnnotationsStatsData){var _this=this;this.isLoadingData=!0,this.isLoadingTotalEntriesData=!0,this.isLoadingUserStatsData=!0,this.isLoadingTotalAnnotationsStats=!0,this.statsData={},this.totalEntriesData={},this.userStatsData={},this.totalAnnotationsStatsData={},this.totalAnnotationsCount=function(){var totalCount=0;for(var key in this.statsData.totalAnnotationCount){var value=this.statsData.totalAnnotationCount[key];totalCount+=value}return totalCount},this.fetchStatsData=function(completion){this.isLoadingData=!0;var response=Stats.query($stateParams,function(){_this.statsData=response,_this.isLoadingData=!1,completion()})},this.fetchTotalEntriesData=function(completion){this.isLoadingTotalEntriesData=!0;var response=StatsTotalEntries.query($stateParams,function(){_this.totalEntriesData=response,_this.isLoadingTotalEntriesData=!1,completion()})},this.fetchUserStatsData=function(completion){this.isLoadingUserStatsData=!0;var response=StatsUserData.query($stateParams,function(){_this.userStatsData=response,_this.isLoadingUserStatsData=!1,completion()})},this.fetchTotalAnnotationsStatsData=function(completion){this.isLoadingTotalAnnotationsStats=!0;var response=TotalAnnotationsStatsData.query($stateParams,function(){_this.totalAnnotationsStatsData=response,_this.isLoadingTotalAnnotationsStats=!1,completion()})}}]),angular.module("elixir_front.controllers").controller("StatsController",["$scope","$http","StatsDataSource",function($scope,$http,StatsDataSource){var _this=this;$scope.labels=[],$scope.labelsUsers=[],$scope.series=["Total entries"],$scope.seriesEDAM=["EDAM annotations"],$scope.seriesEDAMBreakdown=["Data Type annotations","Topic annotations","Function annotations","Format annotations"],$scope.seriesUsers=["Total contributors count","New contributors this month"],$scope.seriesTotalAnnotationDetail=["Name","Description","Homepage","Tool Type","Unique Id","Topic","Publication","Contact","Operation","Documentation","Operating System","Input output","Code availability","Accessibility","Data format","Community","Downloads","Total"],$scope.seriesTotalAnnotation=["Total"],$scope.data=[[]],$scope.dataEDAM=[[]],$scope.dataEDAMBreakdown=[[]],$scope.dataUsers=[[]],$scope.dataTotalAnnotation=[[]],$scope.dataTotalAnnotationDetail=[[]],$scope.totalAnnotationOptions={tooltips:{titleFontSize:10,bodyFontSize:9,bodySpacing:0}},$scope.statsDataSource=StatsDataSource,$scope.statsDataSource.fetchStatsData(function(){_this.initializeTopContributorsStatsGraph()}),$scope.statsDataSource.fetchTotalEntriesData(function(){_this.initializeTotalEntriesGraph()}),$scope.statsDataSource.fetchUserStatsData(function(){_this.initializeUserStatsGraph()}),$scope.statsDataSource.fetchTotalAnnotationsStatsData(function(){_this.initializeTotalAnnotationsStatsGraph(),_this.initializeTotalAnnotationsDetailStatsGraph()}),$scope.topContributorsLabels=[],$scope.topContributorsData=[],$scope.topContributorsOptions={legend:{display:!0}},this.initializeTotalEntriesGraph=function(){var data=$scope.statsDataSource.totalEntriesData;$scope.labels=_.map(data,function(x){var date=x.date.split("T")[0];return moment(date).format("MMM YY")}),$scope.data=[_.map(data,function(x){return x.entriesCount})],$scope.dataEDAM=[_.map(data,function(x){return x.edamAnnotationsCount})],$scope.dataEDAMBreakdown=[_.map(data,function(x){return x.dataTypeAnnotationsCount}),_.map(data,function(x){return x.topicAnnotationsCount}),_.map(data,function(x){return x.functionAnnotationsCount}),_.map(data,function(x){return x.formatAnnotationsCount})]},this.initializeUserStatsGraph=function(){var data=$scope.statsDataSource.userStatsData;$scope.labelsUsers=_.map(data,function(x){var date=x.date.split("T")[0];return moment(date).format("MMM YY")}),$scope.dataUsers=[_.map(data,function(x){return x.totalUsersCount}),_.map(data,function(x){return x.newUsersCount})]},this.initializeTopContributorsStatsGraph=function(){var contributorData=$scope.statsDataSource.statsData.topContributors;$scope.topContributorsLabels=_.map(contributorData,function(x){return x.domain}),$scope.topContributorsData=_.map(contributorData,function(x){return x.count})},this.initializeTotalAnnotationsStatsGraph=function(){var annotationData=$scope.statsDataSource.totalAnnotationsStatsData;$scope.dataTotalAnnotation=[_.map(annotationData,function(x){var data=x,totalCount=0;for(var key in data)"date"==key||isNaN(data[key])||(totalCount+=data[key]);return totalCount})]},this.initializeTotalAnnotationsDetailStatsGraph=function(){var annotationData=$scope.statsDataSource.totalAnnotationsStatsData;$scope.dataTotalAnnotationDetail=[_.map(annotationData,function(x){return x.nameAnnotationCount}),_.map(annotationData,function(x){return x.descriptionAnnotationCount}),_.map(annotationData,function(x){return x.homepageAnnotationCount}),_.map(annotationData,function(x){return x.toolTypeAnnotationCount}),_.map(annotationData,function(x){return x.uniqueIDAnnotationCount}),_.map(annotationData,function(x){return x.topicAnnotationCount}),_.map(annotationData,function(x){return x.publicationAnnotationCount}),_.map(annotationData,function(x){return x.contactAnnotationCount}),_.map(annotationData,function(x){return x.operationAnnotationCount}),_.map(annotationData,function(x){return x.documentationAnnotationCount}),_.map(annotationData,function(x){return x.operatingSystemAnnotationCount}),_.map(annotationData,function(x){return x.inputOutputAnnotationCount}),_.map(annotationData,function(x){return x.codeAvailabilityAnnotationCount}),_.map(annotationData,function(x){return x.accessibilityAnnotationCount}),_.map(annotationData,function(x){return x.dataFormatsAnnotationCount}),_.map(annotationData,function(x){return x.communityAnnotationCount}),_.map(annotationData,function(x){return x.downloadsAnnotationCount})]}}]),angular.module("elixir_front").controller("ToolPageController",["$scope","$state","$timeout","$stateParams","Tool","User","CheckUserEditingRights","ResourceRequestProvider","ngMeta","Query",function($scope,$state,$timeout,$stateParams,Tool,User,CheckUserEditingRights,ResourceRequestProvider,ngMeta,Query){function cleanNulls(object){for(var key in object)if(null==object[key])delete object[key];else if(object[key].constructor===Array)if(0==object[key].length)delete object[key];else for(var i in object[key])cleanNulls(object[key][i]);else"object"==typeof object[key]&&cleanNulls(object[key])}$scope.notFound=!1,$scope.versions=[],$scope.CheckUserEditingRights=CheckUserEditingRights,$scope.editingRequestedSuccess=null,$scope.User=User,0==$stateParams.id.length&&$state.go("404"),$scope.topicNameClicked=function(topic){$state.go("search",{topic:topic.term})},$scope.functionNameClicked=function(functionName){$state.go("search",{operation:functionName.term})},$scope.inputNameClicked=function(inputName){$state.go("search",{input:inputName.data.term})},$scope.inputFormatNameClicked=function(formatName){$state.go("search",{input:formatName.term})},$scope.outputFormatNameClicked=function(formatName){$state.go("search",{output:formatName.term})},$scope.outputNameClicked=function(outputName){$state.go("search",{output:outputName.data.term})},$scope.toolsNameClicked=function(functionName){$state.go("search",{name:$scope.software.name})},$scope.publicationDetailsExist=function(){for(var index in $scope.software.publication)if(null!=$scope.software.publication[index].metadata)return!0;return!1};var initAltmetricsScore=function(){var script=document.createElement("script");script.type="text/javascript",script.src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js",document.body.appendChild(script)};$scope.altMetricsScorePublication=function(){var publication="";for(var index in $scope.software.publication){var publication=$scope.software.publication[index];if("Primary"==publication.type&&publication.doi){publication=publication;break}publication=publication}return publication},$scope.versionSelected=function(versionId){$state.go("tool",{id:$scope.software.id,version:versionId})},$scope.shouldLicenseBeALink=function(license){return!_.includes(["Proprietary","Other","Unlicensed"],license)},$scope.setMetadataForSoftware=function(software){ngMeta.setTitle(software.name," 路 bio.tools"),ngMeta.setTag("description",software.description),ngMeta.setTag("og:title",software.name),ngMeta.setTag("og:description",software.description)},$scope.software=Tool.get($stateParams,function(response){initAltmetricsScore(),cleanNulls($scope.software),$scope.setMetadataForSoftware($scope.software),$timeout(function(){window.OpEB_widgets.OpEB.apply()},100)},function(response){404==response.status&&($scope.notFound=!0)}),$scope.requestOwnership=function(resourceId){$scope.ownershipRequestedSuccess=null,ResourceRequestProvider.requestOwnership(resourceId).then(function(response){$scope.ownershipRequestedSuccess=!0},function(response){$scope.ownershipRequestedSuccess=!1})},$scope.requestEditing=function(resourceId){$scope.editingRequestedSuccess=null,ResourceRequestProvider.requestEditingRights(resourceId).then(function(response){$scope.editingRequestedSuccess=!0},function(response){$scope.editingRequestedSuccess=!1})}}]).directive("publicationDetailCallout",function(){return{restrict:"A",templateUrl:"components/toolPage/partials/publicationDetailCallout.html"}}).directive("toolPageLinkCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){return'<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';"><div class="tool-page-callout-header" style="color: black;"><a href="'+attr.url+'" tooltips tooltip-side="top" tooltip-content="'+attr.url+'">'+attr.name+'  </a><i ng-show="'+attr.toshow+'" class="fa fa-question-circle" aria-hidden="true" style="font-size: 100%; margin-left: 0.5em; color: '+attr.color+';" tooltips tooltip-side="top" tooltip-content="'+attr.comment+'"></i></div></div>'},replace:!0}}).directive("toolPagePublicationCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+'">';return callout+='<span ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{::'+attr.name+"}}<br>",callout+="</span>",callout+='<span ng-show="'+attr.pmcid+'"><a href="http://www.ncbi.nlm.nih.gov/pmc/{{::'+attr.pmcid+'}}">PMC  </a>',callout+='<span ng-show="'+attr.pmid+" || "+attr.doi+' " style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.pmid+'"><a href="http://www.ncbi.nlm.nih.gov/pubmed/{{::'+attr.pmid+'}}">PUBMED  </a><span class="pull-right">Cited by <a href=" http://europepmc.org/search?query=CITES%3A{{::'+attr.pmid+'}}_MED" class="fa fa-external-link" style="padding-top: 3px; text-color='+attr.color+';" aria-hidden="true"></a></span></span>',callout+='<span ng-show="('+attr.pmid+" || "+attr.pmcid+") && "+attr.doi+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.doi+'"><a href="https://dx.doi.org/{{::'+attr.doi+'}}">DOI  </a></span>',callout+="</div>"},replace:!0}}).directive("toolPageContactCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';">';return callout+='<div ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{::'+attr.name+"}}</div>",callout+='<div class="tool-page-callout-text">',callout+='<span ng-show="'+attr.phone+'">{{::'+attr.phone+"}}",callout+='<span ng-show="'+attr.email+" || "+attr.url+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.email+'"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{'+attr.email+".replace('@', ' at ') }}",callout+='<span ng-show="'+attr.url+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.url+'"><a href="{{::'+attr.url+'}}">Link  </a></span>',callout+="</div>",callout+="</div>"},replace:!0}}).directive("toolPageCreditCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';">';return callout+='<div ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{'+attr.name+"}}",callout+='<i ng-show="'+attr.toshow+'" class="fa fa-question-circle" aria-hidden="true" style="font-size: 100%; margin-left: 0.5em; color: '+attr.color+';" tooltips tooltip-side="top" tooltip-content="'+attr.comment+'"></i>',callout+='<span ng-show="'+attr.typeentity+" && "+attr.typeentity+" != 'Person'\">",callout+='<span ng-show="'+attr.typeentity+'" style="color: #CCCCCC;"> | </span>',callout+='<span ng-show="'+attr.typeentity+'">{{'+attr.typeentity+"}}</span>",callout+="</div>",callout+='<div class="tool-page-callout-text">',callout+='<span ng-show="'+attr.typerole.count+' != 0" ng-repeat="role in '+attr.typerole+'">{{role}}{{$last ? "" : ", "}}',callout+='<span ng-show="'+attr.email+" || "+attr.url+" || "+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.email+'"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{'+attr.email+".replace('@', ' at ') }}",callout+='<span ng-show="'+attr.url+" || "+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.url+'"><a href="{{'+attr.url+'}}">Link  </a>',callout+='<span ng-show="'+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.orcidid+'">ORCID {{'+attr.orcidid+"}}",callout+='<span ng-show="'+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.gridid+'">GRIDID {{'+attr.gridid+"}}",callout+="</div>",callout+="</div>"},replace:!0}});
=======
"use strict";function LoginModalController($uibModalInstance,djangoAuth,$rootScope,$state){var vm=this;vm.error={},vm.loginButtonPressed=function(username,password){vm.error.username="",vm.error.password="",vm.error.general=[],username||password?username?password?djangoAuth.login(username,password).then(function(response){"undefined"==typeof $rootScope.toState||/signup/.test($rootScope.toState.name)||/reset-password/.test($rootScope.toState.name)?$state.go("search"):$state.go($rootScope.toState.name,$rootScope.toStateParams),$uibModalInstance.close()},function(response){vm.error.general=response.general_errors}):(vm.error.password="Password is required",vm.error.general=["Password is required"]):(vm.error.username="Username is required",vm.error.general=["Username is required"]):(vm.error.username="Username is required",vm.error.password="Password is required",vm.error.general=["Username and password are required"])},vm.registerButtonPressed=function(){$uibModalInstance.close(),$state.go("signup")},vm.forgotButtonPressed=function(){$uibModalInstance.close(),$state.go("reset-password")}}function WorkflowModalCtrl($modalInstance,workflow){var vm=this;vm.workflow=workflow,vm.currentTitle="",vm.currentDescription="",vm.currentEdam="",vm.mapDimensions=function(annotation){return vm.mapXDimension(annotation.startX)+","+vm.mapYDimension(annotation.startY)+","+vm.mapXDimension(annotation.endX)+","+vm.mapYDimension(annotation.endY)},vm.imageHeight=function(){var img=document.getElementById("image");return img.clientHeight},vm.imageWidth=function(){var img=document.getElementById("image");return img.clientWidth},vm.mapXDimension=function(dim_x){var multiplier_x=vm.imageWidth()/vm.workflow.width;return dim_x*multiplier_x},vm.mapYDimension=function(dim_y){var multiplier_y=vm.imageHeight()/vm.workflow.height;return dim_y*multiplier_y},vm.hover=function(annotation){vm.currentTitle=annotation.title,vm.currentDescription=annotation.description,vm.currentEdam=annotation.edam_term},vm.endHover=function(annotation){vm.currentTitle="",vm.currentDescription="",vm.currentEdam=""}}var elixir_front=angular.module("elixir_front",["elixir_front.filters","elixir_front.services","elixir_front.directives","elixir_front.controllers","ui.bootstrap","ngCookies","ngRoute","ngSanitize","ngAnimate","ngResource","ui.router","angularBootstrapNavTree","treeControl","720kb.tooltips","yaru22.angular-timeago","angularDjangoRegistrationAuthApp","ngTagsInput","pasvaz.bindonce","ui.grid","ui.grid.resizeColumns","ui.grid.autoResize","ui.grid.saveState","ui.grid.moveColumns","chart.js","ngMeta"],function($rootScopeProvider){}).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.when("","/search"),$urlRouterProvider.otherwise("/404"),$stateProvider.state("404",{url:"/404",templateUrl:"partials/404.html",data:{meta:{title:"Page not found"},roles:[]},resolve:{}}).state("home",{url:"/search",templateUrl:"partials/search_results.html",data:{meta:{title:"bio.tools 路 Bioinformatics Tools and Services Discovery Portal",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services",titleSuffix:"","og:title":"bio.tools 路 Bioinformatics Tools and Services Discovery Portal","og:description":"A registry of bioinformatics software resources including biological databases, analytical tools and data services","og:image":"https://bio.tools/img/ELIXIR_logo_white_background_small.png"},roles:[]},controller:"SearchResultController"}).state("about",{url:"/about",templateUrl:"components/about/about.html",data:{meta:{title:"About",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services"},roles:[]},resolve:{}}).state("schema",{url:"/schema",templateUrl:"partials/schema.html",data:{roles:[]},resolve:{}}).state("stats",{url:"/stats",templateUrl:"components/stats/stats.html",data:{meta:{title:"Stats",description:"bio.tools content statistics."},roles:[]},controller:"StatsController",resolve:{}}).state("search",{url:"/?page&q&id&name&topic&function&operation&input&inputDataFormat&inputDataType&output&outputDataFormat&outputDataType&homepage&description&version&accessibility&toolType&collectionID&contact&elixirInfo&maturity&operatingSystem&language&cost&license&documentation&link&download&publication&credit&owner&sort&ord&domain",templateUrl:"partials/search_results.html",data:{meta:{title:"bio.tools 路 Bioinformatics Tools and Services Discovery Portal",description:"A registry of bioinformatics software resources including biological databases, analytical tools and data services",titleSuffix:"","og:title":"bio.tools 路 Bioinformatics Tools and Services Discovery Portal","og:description":"A registry of bioinformatics software resources including biological databases, analytical tools and data services","og:image":"https://bio.tools/img/ELIXIR_logo_white_background_small.png"},roles:[]},controller:"SearchResultController"}).state("register",{url:"/register",templateUrl:"partials/toolEdit.html",data:{meta:{title:"Register new resource",description:"Register a tool or database in bio.tools.","og:title":"Register new resource","og:description":"Register a tool or database in bio.tools."},roles:["User"]},controller:"ToolCreateController",resolve:{}}).state("edit-subdomain",{url:"/edit-subdomain/:id",templateUrl:"partials/subdomains/subdomainEdit.html",data:{meta:{title:"Edit subdomain","og:title":"Edit subdomain"},roles:["User"]},controller:"SubdomainController",resolve:{}}).state("admin-subdomain",{url:"/subdomain",templateUrl:"partials/subdomains/subdomainPage.html",data:{meta:{title:"Subdomain","og:title":"Subdomain"},roles:["User"]},controller:"SubdomainAdminController",resolve:{}}).state("login",{url:"/login",templateUrl:"partials/login.html",data:{meta:{title:"Log in",description:"Log in to bio.tools.","og:title":"Log in","og:description":"Log in to bio.tools."},roles:[]},controller:"LoginController",resolve:{}}).state("signup",{url:"/signup",templateUrl:"partials/signup.html",data:{meta:{title:"Sign up",description:"Sign up for bio.tools.","og:title":"Sign up","og:description":"Sign up for bio.tools."},roles:[]},controller:"SignupController"}).state("signup.success",{url:"/success",templateUrl:"partials/signupSuccess.html",data:{meta:{title:"Sign up success"},roles:[]}}).state("signup.verify-email",{"abstract":!0,url:"/verify-email",template:"<ui-view/>",data:{meta:{title:"Verify email"},roles:[]}}).state("signup.verify-email.success",{url:"/success",templateUrl:"partials/signupVerifyEmailSuccess.html",data:{meta:{title:"Verification success"},roles:[]}}).state("signup.verify-email.key",{url:"/:key",templateUrl:"partials/signupVerifyEmailKey.html",data:{meta:{title:"Verify email"},roles:[]},controller:"SignupVerifyEmailKeyController"}).state("reset-password",{url:"/reset-password",templateUrl:"partials/resetPassword.html",data:{meta:{title:"Reset password"},roles:[]},controller:"ResetPasswordController"}).state("reset-password.confirm",{url:"/confirm?uid&token",templateUrl:"partials/resetPasswordConfirm.html",data:{meta:{title:"Reset password"},roles:[]},controller:"ResetPasswordConfirmController"}).state("reset-password.confirm.success",{url:"/success",templateUrl:"partials/resetPasswordConfirmSuccess.html",data:{meta:{title:"Reset password success"},roles:[]}}).state("profile",{url:"/profile",templateUrl:"components/profile/profile.html",data:{meta:{title:"My profile"},roles:[]},controller:"ProfileController"}).state("subdomain",{url:"/?:domain"}).state("requests",{url:"/requests",templateUrl:"partials/requests.html",data:{roles:[]},controller:"RequestsController"}).state("workflows",{url:"/workflows",templateUrl:"partials/workflows/workflows.html",data:{roles:[]},controller:"WorkflowController"}).state("tool-explicit",{url:"/tool/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool-explicit-short",{url:"/t/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool",{url:"/:id",templateUrl:"components/toolPage/toolPage.html",data:{roles:[]},controller:"ToolPageController",resolve:{}}).state("tool.edit",{url:"/edit",templateUrl:"partials/toolEdit.html",data:{roles:["User"]},controller:"ToolUpdateController",resolve:{}}).state("governance",{url:"/governance",redirect:"http://biotools.readthedocs.io/en/latest/governance.html",external:!0,data:{roles:[]},resolve:{}}).state("events",{url:"/events",redirect:"https://docs.google.com/document/d/1K-6IG_7a-4amstSSOxYjjJ3uDUEg4-WGSSt9jvvO7Ik/edit#heading=h.twop51kvyu80",external:!0,data:{roles:[]},resolve:{}}).state("mail",{url:"/mail",redirect:"http://elixirmail.cbs.dtu.dk/mailman/listinfo",external:!0,data:{roles:[]},resolve:{}}).state("faq",{url:"/faq",redirect:"https://docs.google.com/document/d/1WdcY0WQJVdRHz0BAhII7s8gygxKRJaHZC4gOnAC1eqs/edit",external:!0,data:{roles:[]},resolve:{}}).state("apidoc",{url:"/apidoc",redirect:"https://docs.google.com/document/d/1c1zridWLBNSrWcYyR2fnBfgjWfrUSrT7HJ6Ql6ZCkS4/edit#heading=h.9a2zbl9ka0z0",external:!0,data:{roles:[]},resolve:{}}).state("changelog",{url:"/changelog",redirect:"https://docs.google.com/document/d/1C5KFu2t4OIAuUpx6dS7Djsa9y3zgicd8naOsAs9QPAY/edit#heading=h.eu5jkfa77et",external:!0,data:{roles:[]},resolve:{}}).state("helpdesk",{url:"/helpdesk",redirect:"https://elixir-registry.atlassian.net/servicedesk/customer/portal/2/user/login?destination=portal%2F2",external:!0,data:{roles:[]},resolve:{}}).state("projects",{url:"/projects",redirect:"https://docs.google.com/document/d/1QBIZHBzHxxmvSnOG3xK6t3SCeft5g4AH2rVICLRLmDw/edit#heading=h.a6i4b9p7xdw7",external:!0,data:{roles:[]},resolve:{}}).state("roadmap",{url:"/roadmap",redirect:"https://docs.google.com/document/d/17iH72hmwVo205QVEkptv7GTMlqFojatIwMmxVOyuPy8/edit#heading=h.m1jhkecru8xq",external:!0,data:{roles:[]},resolve:{}})}]).config(function($locationProvider){$locationProvider.html5Mode(!0).hashPrefix("!")}).config(function(tooltipsConfigProvider){tooltipsConfigProvider.options({speed:"fast","try":0})}).run(function($rootScope,$window){$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){toState.external&&(event.preventDefault(),$window.open(toState.redirect,"_self"))})}).run(["ngMeta",function(ngMeta){ngMeta.init()}]).config(function(ngMetaProvider){ngMetaProvider.useTitleSuffix(!0),ngMetaProvider.setDefaultTitle("bio.tools")}).run(["$rootScope","$state","$timeout","User","djangoAuth","$http",function($rootScope,$state,$timeout,User,djangoAuth,$http){User.authenticated=!1;var logInCallback=function(){User.authenticated=!0,djangoAuth.profile().then(function(response){User.current=response})},wrongAuthCallback=function(){delete $http.defaults.headers.common.Authorization,delete localStorage.token,User.authenticated=!1,User.current={}},logOutCallback=function(){wrongAuthCallback(),$state.go("search")},authenticationPromise=djangoAuth.authenticationStatus(!0).then(logInCallback,wrongAuthCallback);$rootScope.$on("djangoAuth.logged_in",logInCallback),$rootScope.$on("djangoAuth.logged_out",logOutCallback),$rootScope.$on("$stateChangeStart",function(event,toState,toStateParams,fromState,fromStateParams){"login"!=toState.name&&($rootScope.toState=toState,$rootScope.toStateParams=toStateParams),$rootScope.fromState=fromState,"undefined"==typeof toState.resolve&&(toState.resolve={}),toState.resolve.pauseStateChange=["$q",function($q){var defer=$q.defer();return authenticationPromise.then(function(){!User.authenticated&&_.includes(toState.data.roles,"User")&&(event.preventDefault(),$rootScope.returnToState=$rootScope.toState,$rootScope.returnToStateParams=$rootScope.toStateParams,$state.go("login")),defer.resolve()}),defer.promise}]}),$rootScope.$on("$stateChangeError",function(event){$state.go("404")})}]).run(["$rootScope","$timeout","$state",function($rootScope,$timeout,$state){function getTextValue(text){return angular.isFunction(text)?text():text}$rootScope.$on("$stateChangeSuccess",function(){var title=getTextValue($state.$current.locals.globals.$title),description=getTextValue($state.$current.locals.globals.$description);title&&$timeout(function(){$rootScope.$title=title}),description&&$timeout(function(){$rootScope.$description=description})})}]);angular.module("elixir_front.controllers",[]).controller("ToolGridController",["$scope","$timeout","ToolList","ToolTableDataSource",function($scope,$timeout,ToolList,ToolTableDataSource){$scope.ToolList=ToolList,$scope.savedStateExists=function(){return!!localStorage.getItem("gridState")},$scope.saveState=function(){var state=$scope.gridApi.saveState.save();localStorage.setItem("gridState",JSON.stringify(state))},$scope.restoreState=function(){$timeout(function(){var state=localStorage.getItem("gridState");state&&$scope.gridApi.saveState.restore($scope,JSON.parse(state))})},$scope.gridOptions={enableSorting:!1,enableColumnMenus:!1,enableColumnResizing:!0,enableVerticalScrollbar:0,enableHorizontalScrollbar:!0,columnVirtualizationThreshold:ToolTableDataSource.columnsDescription([]).length,data:ToolList.list,columnDefs:ToolTableDataSource.columnsDescription(1==$scope.savedStateExists()?[]:["Name","Description","Homepage","Credits","Operation","Topic","Input","Output"]),rowHeight:135,enableGridMenu:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,$scope.restoreState(),$scope.gridApi.core.on.columnVisibilityChanged($scope,function(column){$scope.saveState()}),$scope.gridApi.colResizable.on.columnSizeChanged($scope,function(column){$scope.saveState()}),$scope.gridApi.colMovable.on.columnPositionChanged($scope,function(column){$scope.saveState()})}},$scope.tableHeight=function(){return{height:Math.min($scope.ToolList.count,10)*$scope.gridOptions.rowHeight+33+"px"}}}]).controller("ToolGridCellController",["$scope",function($scope){function CellWidthDescription(){return $scope.CellWidth()+2+"px"}function CellColorDescription(){return $scope.rowIndex%2!=0?"#f8f8f8":"white"}$scope.init=function(columnName,rowIndex){$scope.columnName=columnName,$scope.rowIndex=rowIndex},$scope.RowIdentifier=function(){return $scope.columnName+$scope.rowIndex},$scope.RowName=function(){return $scope.columnName},$scope.RowHeight=function(){var element=document.getElementById($scope.RowIdentifier());return element?element.offsetHeight:0},$scope.DefaultRowHeight=function(){return 135},$scope.CellWidth=function(){return document.getElementById($scope.RowIdentifier()).offsetWidth},$scope.CellStyle=function(){return{width:CellWidthDescription(),"background-color":CellColorDescription()}}}]).controller("SearchResultController",["$scope","ToolList","ToolTableDataSource","DisplayModeSelector","Domain",function($scope,ToolList,ToolTableDataSource,DisplayModeSelector,Domain){$scope.Domain=Domain,$scope.ToolTableDataSource=ToolTableDataSource,$scope.ToolList=ToolList,$scope.DisplayModeSelector=DisplayModeSelector,ToolList.refresh()}]).controller("AlertsController",["$scope","Alert","EnvironmentChecker",function($scope,Alert,EnvironmentChecker){$scope.Alert=Alert,$scope.dev_alert=!1,EnvironmentChecker.getEnvironment().then(function(data){"Development"==data&&($scope.dev_alert=!0)}),"cookie_alert"in localStorage?$scope.cookie_alert="true"===localStorage.cookie_alert:$scope.cookie_alert=!0,"welcome_message"in localStorage?$scope.welcome_message="true"===localStorage.welcome_message:$scope.welcome_message=!0,$scope.closeCookieInfoButtonClick=function(){$scope.cookie_alert=!1,localStorage.cookie_alert=!1},$scope.closeWelcomeMessageButtonClick=function(){$scope.welcome_message=!1,localStorage.welcome_message=!1}}]).controller("ToolEditController",["$scope","$controller","$state","$stateParams","Ontology","Attribute","CheckUserEditingRights","User","$timeout",function($scope,$controller,$state,$stateParams,Ontology,Attribute,CheckUserEditingRights,User,$timeout){$scope.Attribute=Attribute,$scope.CheckUserEditingRights=CheckUserEditingRights,$scope.$state=$state,$scope.form={},$scope.canEditTool=!1,$scope.canEditToolPermissions=!1,$scope.User=User,$scope.registeringInProgress=!1,$scope.validationProgress={},$scope.savingProgress={},$scope.deletingProgress={},$scope.initializePermissions=function(){$scope.canEditTool=!1,$scope.canEditToolPermissions=!1,_.isEmpty($scope.software)||($scope.software.owner==$scope.User.getUsername()?($scope.canEditTool=!0,$scope.canEditToolPermissions=!0):void 0!=$scope.software.editPermission&&($scope.canEditTool=$scope.CheckUserEditingRights.canEdit($scope.software),$scope.canEditToolPermissions=!1,delete $scope.software.editPermission))},$scope.sendResource=function(service,progress,isRemoval){progress.success=!1,progress.error=!1,progress.inProgress=!0,$scope.registrationErrorPayload=null,service($stateParams,$scope.software,function(response){progress.inProgress=!1,progress.success=!0,isRemoval&&(alert("Resource removed succesfully."),$state.go("search"))},function(response){progress.error=!0,progress.inProgress=!1,$scope.registrationErrorPayload=response.data})},$scope.addButtonClick=function(_what,_where,_isList,_isObject){_isList?("undefined"==typeof _where[_what]&&(_where[_what]=[]),_where[_what].push(_isObject?{}:"")):"undefined"==typeof _where[_what]&&(_where[_what]=_isObject?{}:"")},$scope.removeButtonClick=function(_what,_parent,_index,_event){(_parent[_what][_index]?confirm("Are you sure you want to remove this element?"):1)&&(_event&&$(_event.target).closest("div").find(".jstree").jstree("destroy").remove(),_parent[_what].splice(_index,1),0==_parent[_what].length&&delete _parent[_what])},$scope.errorConnections={name:["id"]},$scope.resetError=function(_what,_parent,_index){if(void 0!=_index&&_index>=0)$scope.resetListError(_what,_parent,_index);else{var whatConnections=$scope.errorConnections[_what];whatConnections&&whatConnections.forEach(function(connection){void 0!=_parent&&_parent[connection]&&delete _parent[connection]}),void 0!=_parent&&_parent[_what]&&delete _parent[_what]}},$scope.resetListError=function(_what,_parent,_index){_parent[_what]&&_parent[_what][_index]&&(_parent[_what][_index]={})},$scope.isString=function(value){return"string"==typeof value},Ontology.get({name:"EDAM_topic"},function(response){$scope.EDAM_topic=response.data.children}),Ontology.get({name:"EDAM_data"},function(response){$scope.EDAM_data=response.data.children}),Ontology.get({name:"EDAM_format"},function(response){$scope.EDAM_format=response.data.children}),Ontology.get({name:"EDAM_operation"},function(response){$scope.EDAM_operation=response.data.children}),$scope.$watch("software",function(newVal,oldVal){$scope.jsonEdit.model=angular.toJson($scope.software,2),0==$scope.canEditTool&&$scope.initializePermissions()},!0),$scope.jsonEdit={};var initializing=!0;$scope.$watch("jsonEdit.model",function(newVal,oldVal){if(initializing)initializing=!1;else try{$scope.software=angular.fromJson($scope.jsonEdit.model),$scope.jsonEdit.error=null}catch(exp){$scope.jsonEdit.error=exp.message}}),$scope.downloadTool=function(_pretty){var hiddenElement=document.createElement("a");_pretty?hiddenElement.href="data:attachment/json,"+encodeURI(angular.toJson($scope.software,2)):hiddenElement.href="data:attachment/json,"+encodeURI(angular.toJson($scope.software)),hiddenElement.target="_blank",hiddenElement.download=($scope.software.name?$scope.software.name:"resource")+".json",document.body.appendChild(hiddenElement),hiddenElement.click()},$scope.treeOptions={nodeChildren:"children",dirSelectable:!0},$scope.ontologyOnSelect=function(_object,_index,_node){_object[_index]!==Object(_object[_index])&&(_object[_index]={}),_object[_index].term=_node.text,_object[_index].uri=_node.data.uri},$scope.latestOptions=[{value:1,text:"Yes"},{value:0,text:"No"}],$scope.contactRoleOptions=[{value:"General",text:"General"},{value:"Developer",text:"Developer"},{value:"Technical",text:"Technical"},{value:"Scientific",text:"Scientific"},{value:"Helpdesk",text:"Helpdesk"},{value:"Maintainer",text:"Maintainer"}],$scope.licenseOptions=[{value:"0BSD",text:"0BSD"},{value:"AAL",text:"AAL"},{value:"ADSL",text:"ADSL"},{value:"AFL-1.1",text:"AFL-1.1"},{value:"AFL-1.2",text:"AFL-1.2"},{value:"AFL-2.0",text:"AFL-2.0"},{value:"AFL-2.1",text:"AFL-2.1"},{value:"AFL-3.0",text:"AFL-3.0"},{value:"AGPL-1.0",text:"AGPL-1.0"},{value:"AGPL-3.0",text:"AGPL-3.0"},{value:"AMDPLPA",text:"AMDPLPA"},{value:"AML",text:"AML"},{value:"AMPAS",text:"AMPAS"},{value:"ANTLR-PD",text:"ANTLR-PD"},{value:"APAFML",text:"APAFML"},{value:"APL-1.0",text:"APL-1.0"},{value:"APSL-1.0",text:"APSL-1.0"},{value:"APSL-1.1",text:"APSL-1.1"},{value:"APSL-1.2",text:"APSL-1.2"},{value:"APSL-2.0",text:"APSL-2.0"},{value:"Abstyles",text:"Abstyles"},{value:"Adobe-2006",text:"Adobe-2006"},{value:"Adobe-Glyph",text:"Adobe-Glyph"},{value:"Afmparse",text:"Afmparse"},{value:"Aladdin",text:"Aladdin"},{value:"Apache-1.0",text:"Apache-1.0"},{value:"Apache-1.1",text:"Apache-1.1"},{value:"Apache-2.0",text:"Apache-2.0"},{value:"Artistic-1.0",text:"Artistic-1.0"},{value:"Artistic-1.0-Perl",text:"Artistic-1.0-Perl"},{value:"Artistic-1.0-cl8",text:"Artistic-1.0-cl8"},{value:"Artistic-2.0",text:"Artistic-2.0"},{value:"BSD-2-Clause",text:"BSD-2-Clause"},{value:"BSD-2-Clause-FreeBSD",text:"BSD-2-Clause-FreeBSD"},{value:"BSD-2-Clause-NetBSD",text:"BSD-2-Clause-NetBSD"},{value:"BSD-3-Clause",text:"BSD-3-Clause"},{value:"BSD-3-Clause-Attribution",text:"BSD-3-Clause-Attribution"},{value:"BSD-3-Clause-Clear",text:"BSD-3-Clause-Clear"},{value:"BSD-3-Clause-LBNL",text:"BSD-3-Clause-LBNL"},{value:"BSD-3-Clause-No-Nuclear-License",text:"BSD-3-Clause-No-Nuclear-License"},{value:"BSD-3-Clause-No-Nuclear-License-2014",text:"BSD-3-Clause-No-Nuclear-License-2014"},{value:"BSD-3-Clause-No-Nuclear-Warranty",text:"BSD-3-Clause-No-Nuclear-Warranty"},{value:"BSD-4-Clause",text:"BSD-4-Clause"},{value:"BSD-4-Clause-UC",text:"BSD-4-Clause-UC"},{value:"BSD-Protection",text:"BSD-Protection"},{value:"BSD-Source-Code",text:"BSD-Source-Code"},{value:"BSL-1.0",text:"BSL-1.0"},{value:"Bahyph",text:"Bahyph"},{value:"Barr",text:"Barr"},{value:"Beerware",text:"Beerware"},{value:"BitTorrent-1.0",text:"BitTorrent-1.0"},{value:"BitTorrent-1.1",text:"BitTorrent-1.1"},{value:"Borceux",text:"Borceux"},{value:"CATOSL-1.1",text:"CATOSL-1.1"},{value:"CC-BY-1.0",text:"CC-BY-1.0"},{value:"CC-BY-2.0",text:"CC-BY-2.0"},{value:"CC-BY-2.5",text:"CC-BY-2.5"},{value:"CC-BY-3.0",text:"CC-BY-3.0"},{value:"CC-BY-4.0",text:"CC-BY-4.0"},{value:"CC-BY-NC-1.0",text:"CC-BY-NC-1.0"},{value:"CC-BY-NC-2.0",text:"CC-BY-NC-2.0"},{value:"CC-BY-NC-2.5",text:"CC-BY-NC-2.5"},{value:"CC-BY-NC-3.0",text:"CC-BY-NC-3.0"},{value:"CC-BY-NC-4.0",text:"CC-BY-NC-4.0"},{value:"CC-BY-NC-ND-1.0",text:"CC-BY-NC-ND-1.0"},{value:"CC-BY-NC-ND-2.0",text:"CC-BY-NC-ND-2.0"},{value:"CC-BY-NC-ND-2.5",text:"CC-BY-NC-ND-2.5"},{value:"CC-BY-NC-ND-3.0",text:"CC-BY-NC-ND-3.0"},{value:"CC-BY-NC-ND-4.0",text:"CC-BY-NC-ND-4.0"},{value:"CC-BY-NC-SA-1.0",text:"CC-BY-NC-SA-1.0"},{value:"CC-BY-NC-SA-2.0",text:"CC-BY-NC-SA-2.0"},{value:"CC-BY-NC-SA-2.5",text:"CC-BY-NC-SA-2.5"},{value:"CC-BY-NC-SA-3.0",text:"CC-BY-NC-SA-3.0"},{value:"CC-BY-NC-SA-4.0",text:"CC-BY-NC-SA-4.0"},{value:"CC-BY-ND-1.0",text:"CC-BY-ND-1.0"},{value:"CC-BY-ND-2.0",text:"CC-BY-ND-2.0"},{value:"CC-BY-ND-2.5",text:"CC-BY-ND-2.5"},{value:"CC-BY-ND-3.0",text:"CC-BY-ND-3.0"},{value:"CC-BY-ND-4.0",text:"CC-BY-ND-4.0"},{value:"CC-BY-SA-1.0",text:"CC-BY-SA-1.0"},{value:"CC-BY-SA-2.0",text:"CC-BY-SA-2.0"},{value:"CC-BY-SA-2.5",text:"CC-BY-SA-2.5"},{value:"CC-BY-SA-3.0",text:"CC-BY-SA-3.0"},{value:"CC-BY-SA-4.0",text:"CC-BY-SA-4.0"},{value:"CC0-1.0",text:"CC0-1.0"},{value:"CDDL-1.0",text:"CDDL-1.0"},{value:"CDDL-1.1",text:"CDDL-1.1"},{value:"CECILL-1.0",text:"CECILL-1.0"},{value:"CECILL-1.1",text:"CECILL-1.1"},{value:"CECILL-2.0",text:"CECILL-2.0"},{value:"CECILL-2.1",text:"CECILL-2.1"},{value:"CECILL-B",text:"CECILL-B"},{value:"CECILL-C",text:"CECILL-C"},{value:"CNRI-Jython",text:"CNRI-Jython"},{value:"CNRI-Python",text:"CNRI-Python"},{value:"CNRI-Python-GPL-Compatible",text:"CNRI-Python-GPL-Compatible"},{value:"CPAL-1.0",text:"CPAL-1.0"},{value:"CPL-1.0",text:"CPL-1.0"},{value:"CPOL-1.02",text:"CPOL-1.02"},{value:"CUA-OPL-1.0",text:"CUA-OPL-1.0"},{value:"Caldera",text:"Caldera"},{value:"ClArtistic",text:"ClArtistic"},{value:"Condor-1.1",text:"Condor-1.1"},{value:"Crossword",text:"Crossword"},{value:"CrystalStacker",text:"CrystalStacker"},{value:"Cube",text:"Cube"},{value:"D-FSL-1.0",text:"D-FSL-1.0"},{value:"DOC",text:"DOC"},{value:"DSDP",text:"DSDP"},{value:"Dotseqn",text:"Dotseqn"},{value:"ECL-1.0",text:"ECL-1.0"},{value:"ECL-2.0",text:"ECL-2.0"},{value:"EFL-1.0",text:"EFL-1.0"},{value:"EFL-2.0",text:"EFL-2.0"},{value:"EPL-1.0",text:"EPL-1.0"},{value:"EUDatagrid",text:"EUDatagrid"},{value:"EUPL-1.0",text:"EUPL-1.0"},{value:"EUPL-1.1",text:"EUPL-1.1"},{value:"Entessa",text:"Entessa"},{value:"ErlPL-1.1",text:"ErlPL-1.1"},{value:"Eurosym",text:"Eurosym"},{value:"FSFAP",text:"FSFAP"},{value:"FSFUL",text:"FSFUL"},{value:"FSFULLR",text:"FSFULLR"},{value:"FTL",text:"FTL"},{value:"Fair",text:"Fair"},{value:"Frameworx-1.0",text:"Frameworx-1.0"},{value:"FreeImage",text:"FreeImage"},{value:"GFDL-1.1",text:"GFDL-1.1"},{value:"GFDL-1.2",text:"GFDL-1.2"},{value:"GFDL-1.3",text:"GFDL-1.3"},{value:"GL2PS",text:"GL2PS"},{value:"GPL-1.0",text:"GPL-1.0"},{value:"GPL-2.0",text:"GPL-2.0"},{value:"GPL-3.0",text:"GPL-3.0"},{value:"Giftware",text:"Giftware"},{value:"Glide",text:"Glide"},{value:"Glulxe",text:"Glulxe"},{value:"HPND",text:"HPND"},{value:"HaskellReport",text:"HaskellReport"},{value:"IBM-pibs",text:"IBM-pibs"},{value:"IC",text:"IC"},{value:"IJG",text:"IJG"},{value:"IPA",text:"IPA"},{value:"IPL-1.0",text:"IPL-1.0"},{value:"ISC",text:"ISC"},{value:"ImageMagick",text:"ImageMagick"},{value:"Imlib2",text:"Imlib2"},{value:"Info-ZIP",text:"Info-ZIP"},{value:"Intel",text:"Intel"},{value:"Intel-ACPI",text:"Intel-ACPI"},{value:"Interbase-1.0",text:"Interbase-1.0"},{value:"JSON",text:"JSON"},{value:"JasPer-2.0",text:"JasPer-2.0"},{value:"LAL-1.2",text:"LAL-1.2"},{value:"LAL-1.3",text:"LAL-1.3"},{value:"LGPL-2.0",text:"LGPL-2.0"},{value:"LGPL-2.1",text:"LGPL-2.1"},{value:"LGPL-3.0",text:"LGPL-3.0"},{value:"LGPLLR",text:"LGPLLR"},{value:"LPL-1.0",text:"LPL-1.0"},{value:"LPL-1.02",text:"LPL-1.02"},{value:"LPPL-1.0",text:"LPPL-1.0"},{value:"LPPL-1.1",text:"LPPL-1.1"},{value:"LPPL-1.2",text:"LPPL-1.2"},{value:"LPPL-1.3a",text:"LPPL-1.3a"},{value:"LPPL-1.3c",text:"LPPL-1.3c"},{value:"Latex2e",text:"Latex2e"},{value:"Leptonica",text:"Leptonica"},{value:"LiLiQ-P-1.1",text:"LiLiQ-P-1.1"},{value:"LiLiQ-R-1.1",text:"LiLiQ-R-1.1"},{value:"LiLiQ-Rplus-1.1",text:"LiLiQ-Rplus-1.1"},{value:"Libpng",text:"Libpng"},{value:"MIT",text:"MIT"},{value:"MIT-CM",text:"MIT-CM"},{value:"MIT-advertising",text:"MIT-advertising"},{value:"MIT-enna",text:"MIT-enna"},{value:"MIT-feh",text:"MIT-feh"},{value:"MITNFA",text:"MITNFA"},{value:"MPL-1.0",text:"MPL-1.0"},{value:"MPL-1.1",text:"MPL-1.1"},{value:"MPL-2.0",text:"MPL-2.0"},{value:"MPL-2.0-no-copyleft-exception",text:"MPL-2.0-no-copyleft-exception"},{value:"MS-PL",text:"MS-PL"},{value:"MS-RL",text:"MS-RL"},{value:"MTLL",text:"MTLL"},{value:"MakeIndex",text:"MakeIndex"},{value:"MirOS",text:"MirOS"},{value:"Motosoto",text:"Motosoto"},{value:"Multics",text:"Multics"},{value:"Mup",text:"Mup"},{value:"NASA-1.3",text:"NASA-1.3"},{value:"NBPL-1.0",text:"NBPL-1.0"},{value:"NCSA",text:"NCSA"},{value:"NGPL",text:"NGPL"},{value:"NLOD-1.0",text:"NLOD-1.0"},{value:"NLPL",text:"NLPL"},{value:"NOSL",text:"NOSL"},{value:"NPL-1.0",text:"NPL-1.0"},{value:"NPL-1.1",text:"NPL-1.1"},{value:"NPOSL-3.0",text:"NPOSL-3.0"},{value:"NRL",text:"NRL"},{value:"NTP",text:"NTP"},{value:"Naumen",text:"Naumen"},{value:"NetCDF",text:"NetCDF"},{value:"Newsletr",text:"Newsletr"},{value:"Nokia",text:"Nokia"},{value:"Noweb",text:"Noweb"},{value:"Nunit",text:"Nunit"},{value:"OCCT-PL",text:"OCCT-PL"},{value:"OCLC-2.0",text:"OCLC-2.0"},{value:"ODbL-1.0",text:"ODbL-1.0"},{value:"OFL-1.0",text:"OFL-1.0"},{value:"OFL-1.1",text:"OFL-1.1"},{value:"OGTSL",text:"OGTSL"},{value:"OLDAP-1.1",text:"OLDAP-1.1"},{value:"OLDAP-1.2",text:"OLDAP-1.2"},{value:"OLDAP-1.3",text:"OLDAP-1.3"},{value:"OLDAP-1.4",text:"OLDAP-1.4"},{value:"OLDAP-2.0",text:"OLDAP-2.0"},{value:"OLDAP-2.0.1",text:"OLDAP-2.0.1"},{value:"OLDAP-2.1",text:"OLDAP-2.1"},{value:"OLDAP-2.2",text:"OLDAP-2.2"},{value:"OLDAP-2.2.1",text:"OLDAP-2.2.1"},{value:"OLDAP-2.2.2",text:"OLDAP-2.2.2"},{value:"OLDAP-2.3",text:"OLDAP-2.3"},{value:"OLDAP-2.4",text:"OLDAP-2.4"},{value:"OLDAP-2.5",text:"OLDAP-2.5"},{value:"OLDAP-2.6",text:"OLDAP-2.6"},{value:"OLDAP-2.7",text:"OLDAP-2.7"},{value:"OLDAP-2.8",text:"OLDAP-2.8"},{value:"OML",text:"OML"},{value:"OPL-1.0",text:"OPL-1.0"},{value:"OSET-PL-2.1",text:"OSET-PL-2.1"},{value:"OSL-1.0",text:"OSL-1.0"},{value:"OSL-1.1",text:"OSL-1.1"},{value:"OSL-2.0",text:"OSL-2.0"},{value:"OSL-2.1",text:"OSL-2.1"},{value:"OSL-3.0",text:"OSL-3.0"},{value:"OpenSSL",text:"OpenSSL"},{value:"PDDL-1.0",text:"PDDL-1.0"},{value:"PHP-3.0",text:"PHP-3.0"},{value:"PHP-3.01",text:"PHP-3.01"},{value:"Plexus",text:"Plexus"},{value:"PostgreSQL",text:"PostgreSQL"},{value:"Python-2.0",text:"Python-2.0"},{value:"QPL-1.0",text:"QPL-1.0"},{value:"Qhull",text:"Qhull"},{value:"RHeCos-1.1",text:"RHeCos-1.1"},{value:"RPL-1.1",text:"RPL-1.1"},{value:"RPL-1.5",text:"RPL-1.5"},{value:"RPSL-1.0",text:"RPSL-1.0"},{value:"RSA-MD",text:"RSA-MD"},{value:"RSCPL",text:"RSCPL"},{value:"Rdisc",text:"Rdisc"},{value:"Ruby",text:"Ruby"},{value:"SAX-PD",text:"SAX-PD"},{value:"SCEA",text:"SCEA"},{value:"SGI-B-1.0",text:"SGI-B-1.0"},{value:"SGI-B-1.1",text:"SGI-B-1.1"},{value:"SGI-B-2.0",text:"SGI-B-2.0"},{value:"SISSL",text:"SISSL"},{value:"SISSL-1.2",text:"SISSL-1.2"},{value:"SMLNJ",text:"SMLNJ"},{value:"SMPPL",text:"SMPPL"},{value:"SNIA",text:"SNIA"},{value:"SPL-1.0",text:"SPL-1.0"},{value:"SWL",text:"SWL"},{value:"Saxpath",text:"Saxpath"},{value:"Sendmail",text:"Sendmail"},{value:"SimPL-2.0",text:"SimPL-2.0"},{value:"Sleepycat",text:"Sleepycat"},{value:"Spencer-86",text:"Spencer-86"},{value:"Spencer-94",text:"Spencer-94"},{value:"Spencer-99",text:"Spencer-99"},{value:"SugarCRM-1.1.3",text:"SugarCRM-1.1.3"},{value:"TCL",text:"TCL"},{value:"TMate",text:"TMate"},{value:"TORQUE-1.1",text:"TORQUE-1.1"},{value:"TOSL",text:"TOSL"},{value:"UPL-1.0",text:"UPL-1.0"},{value:"Unicode-TO",text:"Unicode-TO"},{value:"Unlicense",text:"Unlicense"},{value:"VOSTROM",text:"VOSTROM"},{value:"VSL-1.0",text:"VSL-1.0"},{value:"Vim",text:"Vim"},{value:"W3C",text:"W3C"},{value:"W3C-19980720",text:"W3C-19980720"},{value:"WTFPL",text:"WTFPL"},{value:"Watcom-1.0",text:"Watcom-1.0"},{value:"Wsuipa",text:"Wsuipa"},{value:"X11",text:"X11"},{value:"XFree86-1.1",text:"XFree86-1.1"},{value:"XSkat",text:"XSkat"},{value:"Xerox",text:"Xerox"},{value:"Xnet",text:"Xnet"},{value:"YPL-1.0",text:"YPL-1.0"},{value:"YPL-1.1",text:"YPL-1.1"},{value:"ZPL-1.1",text:"ZPL-1.1"},{value:"ZPL-2.0",text:"ZPL-2.0"},{value:"ZPL-2.1",text:"ZPL-2.1"},{value:"Zed",text:"Zed"},{value:"Zend-2.0",text:"Zend-2.0"},{value:"Zimbra-1.3",text:"Zimbra-1.3"},{value:"Zimbra-1.4",text:"Zimbra-1.4"},{value:"Zlib",text:"Zlib"},{value:"bzip2-1.0.5",text:"bzip2-1.0.5"},{value:"bzip2-1.0.6",text:"bzip2-1.0.6"},{value:"curl",text:"curl"},{value:"diffmark",text:"diffmark"},{value:"dvipdfm",text:"dvipdfm"},{value:"eGenix",text:"eGenix"},{value:"gSOAP-1.3b",text:"gSOAP-1.3b"},{value:"gnuplot",text:"gnuplot"},{value:"iMatix",text:"iMatix"},{value:"libtiff",text:"libtiff"},{value:"mpich2",text:"mpich2"},{value:"psfrag",text:"psfrag"},{value:"psutils",text:"psutils"},{value:"xinetd",text:"xinetd"},{value:"xpp",text:"xpp"},{value:"zlib-acknowledgement",text:"zlib-acknowledgement"},{value:"Proprietary",text:"Proprietary"},{value:"Other",text:"Other"},{value:"Unlicensed",text:"Unlicensed"}],$scope.costOptions=[{value:"Free of charge",text:"Free of charge"},{
value:"Free of charge (with restrictions)",text:"Free of charge (with restrictions)"},{value:"Commercial",text:"Commercial"}],$scope.languageOptions=[{value:"ActionScript",text:"ActionScript"},{value:"Ada",text:"Ada"},{value:"AppleScript",text:"AppleScript"},{value:"Assembly language",text:"Assembly language"},{value:"AWK",text:"AWK"},{value:"Bash",text:"Bash"},{value:"C",text:"C"},{value:"C#",text:"C#"},{value:"C++",text:"C++"},{value:"COBOL",text:"COBOL"},{value:"ColdFusion",text:"ColdFusion"},{value:"CWL",text:"CWL"},{value:"D",text:"D"},{value:"Delphi",text:"Delphi"},{value:"Dylan",text:"Dylan"},{value:"Eiffel",text:"Eiffel"},{value:"Forth",text:"Forth"},{value:"Fortran",text:"Fortran"},{value:"Groovy",text:"Groovy"},{value:"Haskell",text:"Haskell"},{value:"Icarus",text:"Icarus"},{value:"Java",text:"Java"},{value:"JavaScript",text:"JavaScript"},{value:"JSP",text:"JSP"},{value:"LabVIEW",text:"LabVIEW"},{value:"Lisp",text:"Lisp"},{value:"Lua",text:"Lua"},{value:"Maple",text:"Maple"},{value:"Mathematica",text:"Mathematica"},{value:"MATLAB",text:"MATLAB"},{value:"MLXTRAN",text:"MLXTRAN"},{value:"NMTRAN",text:"NMTRAN"},{value:"OCaml",text:"OCaml"},{value:"Pascal",text:"Pascal"},{value:"Perl",text:"Perl"},{value:"PHP",text:"PHP"},{value:"Prolog",text:"Prolog"},{value:"PyMOL",text:"PyMOL"},{value:"Python",text:"Python"},{value:"R",text:"R"},{value:"Racket",text:"Racket"},{value:"REXX",text:"REXX"},{value:"Ruby",text:"Ruby"},{value:"SAS",text:"SAS"},{value:"Scala",text:"Scala"},{value:"Scheme",text:"Scheme"},{value:"Shell",text:"Shell"},{value:"Smalltalk",text:"Smalltalk"},{value:"SQL",text:"SQL"},{value:"Turing",text:"Turing"},{value:"Verilog",text:"Verilog"},{value:"VHDL",text:"VHDL"},{value:"Visual Basic",text:"Visual Basic"},{value:"XAML",text:"XAML"},{value:"Other",text:"Other"}],$scope.platformOptions=[{value:"Mac",text:"Mac"},{value:"Linux",text:"Linux"},{value:"Windows",text:"Windows"}],$scope.accessibilityOptions=[{value:"Open access",text:"Open access"},{value:"Restricted access",text:"Restricted access"},{value:"Proprietary",text:"Proprietary"},{value:"Freeware",text:"Freeware"}],$scope.maturityOptions=[{value:"Emerging",text:"Emerging"},{value:"Mature",text:"Mature"},{value:"Legacy",text:"Legacy"}],$scope.toolTypeOptions=[{value:"Command-line tool",text:"Command-line tool"},{value:"Database portal",text:"Database portal"},{value:"Desktop application",text:"Desktop application"},{value:"Library",text:"Library"},{value:"Ontology",text:"Ontology"},{value:"Plug-in",text:"Plug-in"},{value:"Script",text:"Script"},{value:"SPARQL endpoint",text:"SPARQL endpoint"},{value:"Suite",text:"Suite"},{value:"Web application",text:"Web application"},{value:"Web API",text:"Web API"},{value:"Web service",text:"Web service"},{value:"Workbench",text:"Workbench"},{value:"Workflow",text:"Workflow"}],$scope.linkTypeOptions=[{value:"Browser",text:"Browser"},{value:"Helpdesk",text:"Helpdesk"},{value:"Issue tracker",text:"Issue tracker"},{value:"Mailing list",text:"Mailing list"},{value:"Mirror",text:"Mirror"},{value:"Registry",text:"Registry"},{value:"Repository",text:"Repository"},{value:"Social media",text:"Social media"},{value:"Scientific benchmark",text:"Scientific benchmark"},{value:"Technical monitoring",text:"Technical monitoring"}],$scope.downloadTypeOptions=[{value:"API specification",text:"API specification"},{value:"Biological data",text:"Biological data"},{value:"Binaries",text:"Binaries"},{value:"Binary package",text:"Binary package"},{value:"Command-line specification",text:"Command-line specification"},{value:"Container file",text:"Container file"},{value:"CWL file",text:"CWL file"},{value:"Icon",text:"Icon"},{value:"Ontology",text:"Ontology"},{value:"Screenshot",text:"Screenshot"},{value:"Source code",text:"Source code"},{value:"Source package",text:"Source package"},{value:"Test data",text:"Test data"},{value:"Test script",text:"Test script"},{value:"Tool wrapper (galaxy)",text:"Tool wrapper (galaxy)"},{value:"Tool wrapper (taverna)",text:"Tool wrapper (taverna)"},{value:"Tool wrapper (other)",text:"Tool wrapper (other)"},{value:"VM Image",text:"VM Image"}],$scope.documentationTypeOptions=[{value:"API documentation",text:"API documentation"},{value:"Citation instructions",text:"Citation instructions"},{value:"Contributions policy",text:"Contributions policy"},{value:"General",text:"General"},{value:"Governance",text:"Governance"},{value:"Installation instructions",text:"Installation instructions"},{value:"Manual",text:"Manual"},{value:"Terms of use",text:"Terms of use"},{value:"Training material",text:"Training material"},{value:"Tutorial",text:"Tutorial"},{value:"Other",text:"Other"}],$scope.publicationTypeOptions=[{value:"Primary",text:"Primary"},{value:"Comparison",text:"Comparison"},{value:"Method",text:"Method"},{value:"Usage",text:"Usage"},{value:"Review",text:"Review"},{value:"Other",text:"Other"}],$scope.entityTypeOptions=[{value:"Person",text:"Person"},{value:"Project",text:"Project"},{value:"Division",text:"Division"},{value:"Institute",text:"Institute"},{value:"Consortium",text:"Consortium"},{value:"Funding agency",text:"Funding agency"}],$scope.roleTypeOptions=[{value:"Primary contact",text:"Primary contact"},{value:"Contributor",text:"Contributor"},{value:"Developer",text:"Developer"},{value:"Documentor",text:"Documentor"},{value:"Maintainer",text:"Maintainer"},{value:"Provider",text:"Provider"},{value:"Support",text:"Support"}]}]).controller("ToolUpdateController",["$scope","$controller","$timeout","$state","$stateParams","Tool","ToolUpdateValidator",function($scope,$controller,$timeout,$state,$stateParams,Tool,ToolUpdateValidator){$controller("ToolEditController",{$scope:$scope}),$scope.controller="update",$scope.autoUpdateId=!1,$scope.validateButtonClick=function(){$timeout(function(){$scope.sendResource(ToolUpdateValidator.update,$scope.validationProgress)},100)},$scope.registerButtonClick=function(){$timeout(function(){confirm("Are you sure you want to update the resource? ")&&$scope.sendResource(Tool.update,$scope.savingProgress)},100)},$scope.deleteButtonClick=function(){$timeout(function(){confirm("Are you sure you want to remove the resource? ")&&confirm("This will remove the resource and cannot be undone. Are you sure you want to continue? ")&&$scope.sendResource(Tool.remove,$scope.deletingProgress,!0)},100)}}]).controller("ToolCreateController",["$scope","$controller","$timeout","ToolListConnection","ToolCreateValidator","User","$stateParams",function($scope,$controller,$timeout,ToolListConnection,ToolCreateValidator,User,$stateParams){function cleanNulls(object){for(var key in object)if(null==object[key])delete object[key];else if(object[key].constructor===Array)if(0==object[key].length)delete object[key];else for(var i in object[key])cleanNulls(object[key][i]);else"object"==typeof object[key]&&cleanNulls(object[key])}$controller("ToolEditController",{$scope:$scope}),$scope.controller="create",$scope.autoUpdateId=!0,$scope.editIdToggleButtonClick=function(){$scope.autoUpdateId=!$scope.autoUpdateId,$scope.makeIdURLSafe($scope.software.name)},$scope.validateButtonClick=function(){$timeout(function(){$scope.sendResource(ToolCreateValidator.save,$scope.validationProgress)},100)},$scope.registerButtonClick=function(){confirm("Are you sure you want to save the resource? ")&&$timeout(function(){$scope.sendResource(ToolListConnection.save,$scope.savingProgress)},100)},"undefined"!=typeof $stateParams.newVersionOf?($scope.newVersion=!0,$scope.software=ToolLatest.get({id:$stateParams.newVersionOf},function(response){cleanNulls($scope.software),$scope.software.version=null},function(response){404==response.status&&($scope.notFound=!0)})):($scope.newVersion=!1,$timeout(function(){$scope.software={owner:$scope.User.getUsername(),name:"",description:"",homepage:""}},100))}]).controller("LoginController",["$scope","$state","djangoAuth","$rootScope",function($scope,$state,djangoAuth,$rootScope){$scope.credentials={},$scope.loginButtonClick=function(){djangoAuth.login($scope.credentials.username,$scope.credentials.password).then(function(response){"undefined"==typeof $rootScope.toState||/signup/.test($rootScope.toState.name)||/reset-password/.test($rootScope.toState.name)?$state.go("search"):$state.go($rootScope.toState.name,$rootScope.toStateParams)},function(response){$scope.loginErrors=response.general_errors})},$scope.$watch("credentials",function(){$scope.loginErrors&&($scope.loginErrors.pop(),delete $scope.loginErrors)},!0)}]).controller("SignupController",["$scope","$state","djangoAuth","$rootScope","$timeout",function($scope,$state,djangoAuth,$rootScope,$timeout){$scope.credentials={},$scope.error_message={},$scope.error_message.username="",$scope.error_message.email="",$scope.error_message.creation="";var initializing_username=!0;$scope.$watch("credentials.username",function(newValue,oldValue,scope){initializing_username?initializing_username=!1:($scope.error_message.username="",djangoAuth.register($scope.credentials.username,null,null,null,null).then(function(response){},function(response){response.hasOwnProperty("username")&&($scope.error_message.username="Username is already taken.")}))});var initializing_email=!0;$scope.$watch("credentials.email",function(newValue,oldValue,scope){initializing_email?initializing_email=!1:($scope.error_message.email="",djangoAuth.register(null,null,null,$scope.credentials.email,null).then(function(response){},function(response){response.hasOwnProperty("email")&&($scope.error_message.email="Email is invalid or already taken.")}))}),$scope.signupButtonClick=function(){$scope.loading=!0,$timeout(function(){djangoAuth.register($scope.credentials.username,$scope.credentials.password,$scope.credentials.password,$scope.credentials.email,null).then(function(response){$state.go("signup.success"),$scope.loading=!1},function(response){$scope.error_message.email=response.email.join(),$scope.error_message.username=response.username.join(),$scope.error_message.creation=response.message,$scope.loading=!1})},100)}}]).controller("SignupVerifyEmailKeyController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.error_message="",djangoAuth.verify($stateParams.key).then(function(response){$state.go("signup.verify-email.success")},function(response){$scope.error_message=response.message})}]).controller("ResetPasswordController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.credentials={},$scope.error_message="",$scope.success_message="",$scope.loading=!1,$scope.resetButtonClick=function(){$scope.error_message="",$scope.success_message="",$scope.loading=!0,djangoAuth.resetPassword($scope.credentials.email).then(function(response){$scope.success_message=response.success,$scope.loading=!1},function(response){$scope.error_message=response,$scope.loading=!1})}}]).controller("ResetPasswordConfirmController",["$scope","$state","$stateParams","djangoAuth",function($scope,$state,$stateParams,djangoAuth){$scope.credentials={},$scope.error_message=!1;var uid=$stateParams.uid,token=$stateParams.token;$scope.loading=!1,$scope.resetButtonClick=function(){$scope.error_message=!1,$scope.loading=!0,djangoAuth.confirmReset(uid,token,$scope.credentials.password,$scope.credentials.password).then(function(response){$state.go("reset-password.confirm.success"),$scope.loading=!1},function(response){$scope.error_message=!0,$scope.loading=!1})}}]),angular.module("elixir_front.directives",[]).directive("toolList",["ToolList","Highlighting",function(ToolList,Highlighting){return{restrict:"A",templateUrl:"partials/directives/toolList.html",link:function(scope,element,attrs){scope.ToolList=ToolList,scope.Highlighting=Highlighting}}}]).directive("showMore",[function(){return{templateUrl:"showMore.html",restrict:"A",transclude:!0,scope:{showMoreHeight:"@"},controller:["$scope","$element","$interval",function($scope,$element,$interval){function renderStyles(){$element.height()>=$scope.showMoreHeight&&$scope.expanded===!1&&($scope.expandable=!0)}$scope.expanded=!1,$interval(function(){renderStyles()},300),$scope.expandable=!1,$scope.showLessStyle={"max-height":$scope.showMoreHeight+"px",overflow:"hidden"}}]}}]).directive("toolListTable",["ToolList","ToolTableDataSource","Highlighting",function(ToolList,ToolTableDataSource,Highlighting){return{restrict:"A",templateUrl:"partials/directives/toolListTable.html",link:function(scope,element,attrs){scope.Highlighting=Highlighting,scope.ToolTableDataSource=ToolTableDataSource}}}]).directive("toolSorter",["ToolList","$state","$stateParams","$timeout","ToolSorter","Query","$rootScope",function(ToolList,$state,$stateParams,$timeout,ToolSorter,Query,$rootScope){return{restrict:"A",templateUrl:"partials/directives/sorter.html",link:function(scope,element,attrs){scope.ToolSorter=ToolSorter,scope.addToURL=function(){var params=$stateParams;"lastUpdate"==ToolSorter.sortBy.attrName&&1==ToolSorter.order?(params.sort=null,params.ord=null):(params.sort=ToolSorter.sortBy.attrName,params.ord=ToolSorter.order?"desc":"asc"),$state.transitionTo("search",params,{notify:!1})},scope.sortingChangedByDropdown=function(){scope.addToURL(),$timeout(function(){ToolList.refresh()})},scope.validateSelectedSortOption=function(){Query.current.length>0?ToolSorter.addScore():ToolSorter.removeScore(),ToolSorter.setSortOption($stateParams.sort)},null!=$stateParams.sort&&("score"==$stateParams.sort&&ToolSorter.addScore(),ToolSorter.sortBy=ToolSorter.list[_.findIndex(ToolSorter.list,{attrName:$stateParams.sort})||0]),null!=$stateParams.ord&&("desc"==$stateParams.ord?ToolSorter.order=!0:"asc"==$stateParams.ord&&(ToolSorter.order=!1)),$rootScope.$on("$stateChangeSuccess",function(event,toState,toStateParams,fromState,fromStateParams){scope.validateSelectedSortOption()}),$rootScope.$on("search-bar-tags-changed",function(){scope.validateSelectedSortOption()})}}}]).directive("displayModeSelector",["ToolList","$state","$stateParams","$timeout","DisplayModeSelector",function(ToolList,$state,$stateParams,$timeout,DisplayModeSelector){return{restrict:"A",templateUrl:"partials/directives/displaySelector.html",link:function(scope,element,attrs){scope.DisplayModeSelector=DisplayModeSelector,scope.modeChanged=function(){$timeout(function(){ToolList.refresh()})}}}}]).directive("toolPaginator",["ToolList","$state","$stateParams","Query","$timeout","ToolPaginator",function(ToolList,$state,$stateParams,Query,$timeout,ToolPaginator){return{restrict:"A",template:'<uib-pagination style="margin-bottom:25px; margin-top:25px;" total-items="ToolList.count" ng-model="ToolPaginator.currentPage" items-per-page="ToolPaginator.pageSize" max-size="ToolPaginator.maxSize" ng-change="pageChanged()" class="pagination-sm pagination-top" ng-disabled="ToolList.loading"></uib-pagination>',link:function(scope,element,attrs){scope.Query=Query,scope.ToolPaginator=ToolPaginator,null!=$stateParams.page?ToolPaginator.currentPage=parseInt($stateParams.page):ToolPaginator.currentPage=1,scope.pageChanged=function(){var params=$stateParams;$timeout(function(){params.page=1!=ToolPaginator.currentPage?ToolPaginator.currentPage:null,$state.transitionTo("search",params,{notify:!1}),ToolList.refresh()})};var initializing=!0;scope.$watch("ToolPaginator.currentPage",function(newVal,oldVal){initializing&&(newVal!=oldVal&&1==newVal&&(ToolPaginator.currentPage=oldVal),$timeout(function(){initializing=!1}))}),scope.$watch("Query.current",function(){ToolPaginator.currentPage=1},!0)}}}]).directive("insertPublicationLink",function($compile){return{restrict:"A",scope:{publication:"="},compile:function($templateElement,$templateAttributes){return function($scope,$element,$attrs){var html="";if(/^\d{7,8}$/.test($scope.publication))html='<span>PUBMED:</span> <a href="http://www.ncbi.nlm.nih.gov/pubmed/'+$scope.publication+'">'+$scope.publication+"</a>";else if(/^PMC\d{6,8}$/.test($scope.publication))html='<span>PMC:</span> <a href="http://www.ncbi.nlm.nih.gov/pmc/'+$scope.publication+'">'+$scope.publication+"</a>";else if(/^(doi:)?\d{2}.\d{4}/.test($scope.publication)){var publication=$scope.publication.replace("doi:","");html='<span>DOI:</span> <a href="https://dx.doi.org/'+publication+'">'+publication+"</a>"}var e=$compile(html)($scope);$element.replaceWith(e)}}}}).directive("insertPublicationLinkIcon",function($compile){return{restrict:"A",scope:{publication:"="},compile:function($templateElement,$templateAttributes){return function($scope,$element,$attrs){var html="";if(/^\d{7,8}$/.test($scope.publication))html='<a href="http://www.ncbi.nlm.nih.gov/pubmed/'+$scope.publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="PUBMED" tooltip-append-to-body="true"></i></a>';else if(/^PMC\d{6,8}$/.test($scope.publication))html='<a href="http://www.ncbi.nlm.nih.gov/pmc/'+$scope.publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="PMC" tooltip-append-to-body="true"></i></a>';else if(/^(doi:)?\d{2}.\d{4}/.test($scope.publication)){var publication=$scope.publication.replace("doi:","");html='<a href="https://dx.doi.org/'+publication+'"><i class="fa fa-external-link" aria-hidden="true" uib-tooltip="DOI" tooltip-append-to-body="true"></i></a>'}var e=$compile(html)($scope);$element.replaceWith(e)}}}}).directive("focus",function(){return{restrict:"A",link:function(scope,iElm,iAttrs,controller){iElm[0].focus()}}}).directive("spinner",function(){return{restrict:"A",replace:"true",template:'<div class="adjust"><div class="spinner"></div></div>'}}).directive("resourceNotFoundDialog",function(){return{restrict:"A",replace:"true",template:'<div class="col-md-12 info-dialog-background info-dialog info-dialog-text">We\'re sorry but we couldn\'t find what you were looking for. You can try searching for the resource you need <a ui-sref="search()">here</a>.</div>'}}).directive("errorDialog",function(){return{restrict:"A",replace:!0,template:function(elem,attr){return'<div class="col-md-offset-2 col-md-8 bs-callout bs-callout-danger" style="margin-top: 80px;"><h4><i class="fa fa-exclamation-circle" aria-hidden="true"></i> Error {{'+attr.errorcode+"}}</h4>{{"+attr.errormessage+"}}</div>"},transclude:!0}}).directive("ignoreEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&event.preventDefault()})}}).directive("validateEditResourceField",function(){return{restrict:"A",require:["^form","ngModel"],link:function(scope,element,attrs,ctrls){var ngForm=ctrls[0],ngModel=ctrls[1],dataPath=attrs.ngModel.replace("software.","").replace("$parent.$index",attrs.parentIndex).replace("$index",attrs.index).replace("[",".").replace("]","").split(".");ngModel.$parsers.push(function(value){return _.set(scope.registrationErrorPayload,dataPath,null),ngModel.errorMessages=[],ngModel.$setValidity("server_validation_passed",!0),value}),ngModel.$viewChangeListeners.push(function(){var value=_.get(scope.software,dataPath);""===value&&_.unset(scope.software,dataPath)}),scope.$watch("registrationErrorPayload",function(date){var error=_.result(scope.registrationErrorPayload,dataPath);0==_.isEmpty(error)?(ngModel.$setValidity("server_validation_passed",!1),ngModel.errorMessages=error):(ngModel.$setValidity("server_validation_passed",!0),ngModel.errorMessages=[]);var formError=extractFormErrors();formError.length>0?(ngForm.$setValidity("server_validation_passed",!1),ngForm.errorMessages=_.union(ngForm.errorMessages,formError)):(ngForm.$setValidity("server_validation_passed",!0),ngForm.errorMessages=[])});var extractFormErrors=function(){for(var formErrors=[],i=1;i<dataPath.length;i++){var subDataPath=dataPath.slice(0,i);subDataPath.push("general_errors");var error=_.result(scope.registrationErrorPayload,subDataPath);0==_.isEmpty(error)&&(formErrors=formErrors.concat(error))}return formErrors}}}}).directive("dividerLabel",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='class="tool-page-diver-label"';return callout},replace:!0}}).directive("smallSpinner",function(){return{restrict:"A",replace:"true",template:'<div style="text-align:center; color: #7f7f7f; font-size: 12px;"><i class="fa fa-circle-o-notch fa-spin"></i> Processing...</div>'}}).directive("largeSpinner",function(){return{restrict:"A",replace:"true",template:'<div style="text-align:center; color: #cccccc; font-size: 60px;"><i class="fa fa-circle-o-notch fa-spin"></i></div>'}}),angular.module("elixir_front.filters",[]).filter("startFrom",function(){return function(input,start){return start=+start,input?input.slice(start):void 0}}).filter("filterByObject",function($filter){return function(list,filter){function filterMatch(entry,filter){if("undefined"==typeof filter)return!0;if(null==entry)return!1;var result=!1;for(var _key in filter){if(result=!1,"undefined"==typeof filter[_key]||""==filter[_key])result=!0;else if("undefined"==typeof entry[_key])result=!1;else if("object"!=typeof filter[_key]){if("object"!=typeof entry[_key])result=entry[_key].toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else if(Array.isArray(entry[_key]))for(var result_inner=!1,j=0;j<entry[_key].length;j++){if("string"==typeof entry[_key][j])result_inner=entry[_key][j].toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else if("term"in entry[_key][j])result_inner=entry[_key][j].term.toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else for(var property in entry[_key][j])if(entry[_key][j].hasOwnProperty(property)&&JSON.stringify(entry[_key][j][property]).toLowerCase().indexOf(filter[_key].toLowerCase())>-1){result_inner=!0;break}if(result_inner){result=!0;break}}else if("term"in entry[_key])result=entry[_key].term.toLowerCase().indexOf(filter[_key].toLowerCase())>-1;else for(var property in entry[_key])if(entry[_key].hasOwnProperty(property)&&JSON.stringify(entry[_key][property]).toLowerCase().indexOf(filter[_key].toLowerCase())>-1){result=!0;break}}else if(Array.isArray(entry[_key])){for(var j=0;j<entry[_key].length;j++)if(filterMatch(entry[_key][j],filter[_key])){result=!0;break}}else result=filterMatch(entry[_key],filter[_key]);if(!result)return!1}return!0}var return_list=[];if(list)for(var i=0;i<list.length;i++)1==filterMatch(list[i],filter)&&return_list.push(list[i]);return return_list}}).filter("filterQuery",function(){return function(list,filter){if(""==filter||null==filter)return list;var return_list=[];if(list&&list.length>0)for(var i=0;i<list.length;i++)if(!_.isEmpty(list[i])){var search_score=(list[i].name+" "+list[i].description+" "+list[i].topic+" "+list[i]["function"]+" "+list[i].affiliation).score(filter);search_score>0&&(list[i].search_score=1-search_score,return_list.push(list[i]))}return return_list}}).filter("highlight",function($sce){return function(str,termsToHighlight){if(str&&termsToHighlight.length>0){termsToHighlight.sort(function(a,b){return b.length-a.length});var regex=new RegExp("("+termsToHighlight.join("|")+")","gi");return $sce.trustAsHtml(str.replace(regex,'<span class="highlightedTerm">$&</span>'))}return str}}),angular.module("elixir_front.controllers").controller("LoginMangerController",["$scope","$uibModal","$rootScope","$state",function($scope,$uibModal,$rootScope,$state){var vm=this;vm.openLoginModal=function(){$uibModal.open({templateUrl:"partials/modals/loginModal.html",controller:["$uibModalInstance","djangoAuth","$rootScope","$state",LoginModalController],controllerAs:"vm",windowClass:"login-modal-window"})}}]),angular.module("elixir_front.controllers").controller("PermissionsController",["$scope","UserSuggestionsProvider",function($scope,UserSuggestionsProvider){$scope.userSuggestions=function(prefix){return UserSuggestionsProvider.getSuggestions(prefix).then(function(data){var suggestions=_.map(data,function(obj){return obj.username});return _.difference(suggestions,$scope.software.editPermission.authors)})},$scope.userSelected=function($item,$model,$label){void 0==$scope.software.editPermission.authors&&($scope.software.editPermission.authors=[]),$scope.userSuggestion="",$scope.software.editPermission.authors.push($model)},$scope.isSoftwareOwner=function(){return $scope.software.owner==$scope.User.getUsername()},$scope.deleteUser=function(index){$scope.software.editPermission.authors.splice(index,1)}}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("UserSuggestionsProvider",["$http",function($http){return{getSuggestions:function(prefix){return $http({method:"GET",url:"/api/user-list",params:{term:prefix}}).then(function(response){return response.data},function(response){return{}})}}}]),angular.module("elixir_front.controllers").controller("RequestsController",["$scope","ResourceRequestProvider","User",function($scope,ResourceRequestProvider,User){var vm=this;$scope.requests={},$scope.received=[],$scope.sent=[],$scope.loading=!0,$scope.error={},$scope.error.status=0,$scope.error.message="",$scope.filters={},$scope.filters.showCompletedReceived=!1,$scope.filters.showCompletedSent=!1,vm.loadRequests=function($item,$model,$label){$scope.loading=!0,ResourceRequestProvider.getRequests().then(function(response){$scope.requests=response.data.requests,$scope.filterSentRequests(),$scope.filterReceivedRequests(),$scope.loading=!1},function(response){$scope.error.status=response.status,$scope.error.message="There was an error communicating with the server. Try refreshing this website.",$scope.loading=!1})},$scope.filterSentRequests=function(){0==$scope.filters.showCompletedSent?$scope.sent=$scope.requests.sent.filter(vm.checkIfNotCompleted):$scope.sent=$scope.requests.sent},$scope.filterReceivedRequests=function(){0==$scope.filters.showCompletedReceived?$scope.received=$scope.requests.received.filter(vm.checkIfNotCompleted):$scope.received=$scope.requests.received},vm.checkIfNotCompleted=function(request){return!request.completed},vm.requestsAffectedByAcceptingRequest=function(request){if("ownership"==request.type&&request.username!=User.current.username){for(var affectedRequests=[],index=0;index<$scope.requests.received.length;++index){var checkRequest=$scope.requests.received[index];0==checkRequest.completed&&checkRequest.requestId!=request.requestId&&checkRequest.resourceId==request.resourceId&&affectedRequests.push(checkRequest)}return affectedRequests}return[]},$scope.typeDescription=function(type){return"editing"==type?"Editing rights":"Resource ownership"},$scope.acceptRequest=function(request){var affectedRequests=vm.requestsAffectedByAcceptingRequest(request),resourceIndex=$scope.requests.received.indexOf(request);0==affectedRequests.length?vm.processAcceptRequest(resourceIndex,request,affectedRequests):confirm("Are you sure you want to accept this request? "+affectedRequests.length+" of the exisitng requests will be sent to the new owner.")&&vm.processAcceptRequest(resourceIndex,request,affectedRequests)},vm.processAcceptRequest=function(index,request,affectedRequests){var resourceIndex=index;$scope.requests.received[resourceIndex].processing=!0,request.processing=!1,ResourceRequestProvider.acceptRequest(request.requestId).then(function(response){$scope.requests.received[resourceIndex].processing=!1,$scope.requests.received[resourceIndex].completed=!0,$scope.requests.received[resourceIndex].accepted=!0,$scope.requests.received=_.difference($scope.requests.received,affectedRequests),$scope.received=_.difference($scope.received,affectedRequests),request.processing=!1,request.completed=!0,request.accepted=!0,User.current.requests_count=User.current.requests_count-1-affectedRequests.length},function(response){vm.loadRequests()})},$scope.declineRequest=function(request){var resourceIndex=$scope.requests.received.indexOf(request);request.processing=!1,$scope.requests.received[resourceIndex].processing=!0,ResourceRequestProvider.declineRequest(request.requestId).then(function(response){$scope.requests.received[resourceIndex].processing=!1,$scope.requests.received[resourceIndex].completed=!0,$scope.requests.received[resourceIndex].accepted=!1,request.processing=!1,request.completed=!0,request.accepted=!1,User.current.requests_count=User.current.requests_count-1},function(response){vm.loadRequests()})},vm.loadRequests()}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("ResourceRequestProvider",["$http",function($http){return{getRequests:function(){return $http({method:"GET",url:"/api/request",params:{}})},acceptRequest:function(requestId){return $http({method:"POST",url:"/api/request/conclude",data:{requestId:requestId,accept:!0}})},declineRequest:function(requestId){return $http({method:"POST",url:"/api/request/conclude",data:{requestId:requestId,accept:!1}})},requestOwnership:function(resourceId){return $http({method:"PUT",url:"/api/request",data:{resourceId:resourceId,type:"ownership"}})},requestEditingRights:function(resourceId){return $http({method:"PUT",url:"/api/request",data:{resourceId:resourceId,type:"editing"}})}}}]),angular.module("elixir_front.services",[]).service("Alert",function(){this.list=[],this.add=function(_message,_type){this.list.push({msg:_message,type:_type,ttl:2})},this.remove=function(_index){this.list.splice(_index,1)}}).service("User",[function(){return this.current={},{isLoggedIn:function(){return 1==this.authenticated},getUsername:function(){if(!_.isEmpty(this.current))return this.current.username},isSuperuser:function(){if(!_.isEmpty(this.current))return this.current.is_superuser}}}]).service("Query",[function(){this.current=[]}]).service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection",function(DomainDetailConnection){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description}}]).service("Highlighting",[function(){var _this=this;this.terms=[],this.purge=function(){for(;_this.terms.length>0;)_this.terms.pop()},this.set=function(query_array){_this.purge();for(var i in query_array)_this.terms.push(query_array[i].text.replace(/['"]/g,""))}}]).service("ToolListConnection",["$resource",function($resource){return $resource("/api/t/",null,{query:{isArray:!1,method:"GET"},update:{method:"PUT"}})}]).service("ToolListOverviewConnection",["$resource",function($resource){return $resource("/api/tool-list/",null,{query:{isArray:!0,method:"GET"}})}]).service("ToolList",["$stateParams","ToolListConnection",function($stateParams,ToolListConnection){var _this=this;this.count=0,this.list=[],this.loading=!0,this.refresh=function(){this.loading=!0;var response=ToolListConnection.query($stateParams,function(){_this.loading=!1,_this.count=response.count,_this.list=response.list})}}]).factory("ToolTableDataSource",function(){var columnDescriptionForKey=function(key,hidden){var widthCharMultiplier=12,columnDescription={};return columnDescription="Name"==key?{field:"name",displayName:"Name",cellTemplate:"/partials/grid_cells/nameCell.html",width:"150",resizable:!0}:"Operating System"==key?{field:"operatingSystem",displayName:"Operating System",cellTemplate:"/partials/grid_cells/platformCell.html",width:"100",resizable:!0}:"Description"==key?{field:"description",displayName:"Description",width:"*",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"
}:"Operation"==key?{field:"function",displayName:"Operation",width:"220",resizable:!0,cellTemplate:"/partials/grid_cells/functionCell.html"}:"Input"==key?{field:"function",displayName:"Input",width:"240",resizable:!0,cellTemplate:"/partials/grid_cells/inputCell.html"}:"Output"==key?{field:"function",displayName:"Output",width:"240",resizable:!0,cellTemplate:"/partials/grid_cells/outputCell.html"}:"Topic"==key?{field:"topic",displayName:"Topic",width:"200",resizable:!0,cellTemplate:"/partials/grid_cells/topicCell.html"}:"Homepage"==key?{field:"homepage",displayName:"Homepage",resizable:!0,width:"100",cellTemplate:"/partials/grid_cells/urlCell.html"}:"Tool Type"==key?{field:"toolType",displayName:"Tool Type",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Publications"==key?{field:"publication",displayName:"Publications",width:"250",resizable:!0,cellTemplate:"/partials/grid_cells/publicationsCell.html"}:"Collection"==key?{field:"collectionID",displayName:"Collection",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"bio.tools ID"==key?{field:"biotoolsID",displayName:"bio.tools ID",width:"120",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"}:"Documentation"==key?{field:"documentation",displayName:"Documentation",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Link"==key?{field:"link",displayName:"Links",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Download"==key?{field:"download",displayName:"Downloads",width:"160",resizable:!0,cellTemplate:"/partials/grid_cells/linkListCell.html"}:"Language"==key?{field:"language",displayName:"Language",width:"120",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Credits"==key?{field:"credit",displayName:"Credits",width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/creditsCell.html"}:"Accessibility"==key?{field:key.toLowerCase(),displayName:key,width:"150",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:"Cost"==key?{field:key.toLowerCase(),displayName:key,width:"90",resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"}:"Version"==key?{field:key.toLowerCase(),displayName:key,width:"90",resizable:!0,cellTemplate:"/partials/grid_cells/listCell.html"}:{field:key.toLowerCase(),displayName:key,width:key.length*widthCharMultiplier,resizable:!0,cellTemplate:"/partials/grid_cells/defaultCell.html"},columnDescription.enableHiding=!0,columnDescription.visible=hidden,columnDescription.minWidth=120,columnDescription};return{columnsDescription:function(visibleColumns){return[columnDescriptionForKey("Name",visibleColumns.indexOf("Name")!=-1),columnDescriptionForKey("Description",visibleColumns.indexOf("Description")!=-1),columnDescriptionForKey("Homepage",visibleColumns.indexOf("Homepage")!=-1),columnDescriptionForKey("Version",visibleColumns.indexOf("Homepage")!=-1),columnDescriptionForKey("bio.tools ID",visibleColumns.indexOf("bio.tools ID")!=-1),columnDescriptionForKey("Tool Type",visibleColumns.indexOf("Tool Type")!=-1),columnDescriptionForKey("Topic",visibleColumns.indexOf("Topic")!=-1),columnDescriptionForKey("Publications",visibleColumns.indexOf("Publications")!=-1),columnDescriptionForKey("Credits",visibleColumns.indexOf("Credits")!=-1),columnDescriptionForKey("Operation",visibleColumns.indexOf("Operation")!=-1),columnDescriptionForKey("Input",visibleColumns.indexOf("Input")!=-1),columnDescriptionForKey("Output",visibleColumns.indexOf("Output")!=-1),columnDescriptionForKey("Documentation",visibleColumns.indexOf("Documentation")!=-1),columnDescriptionForKey("Operating System",visibleColumns.indexOf("Operating System")!=-1),columnDescriptionForKey("Language",visibleColumns.indexOf("Language")!=-1),columnDescriptionForKey("License",visibleColumns.indexOf("License")!=-1),columnDescriptionForKey("Link",visibleColumns.indexOf("Link")!=-1),columnDescriptionForKey("Accessibility",visibleColumns.indexOf("Accessibility")!=-1),columnDescriptionForKey("Download",visibleColumns.indexOf("Download")!=-1),columnDescriptionForKey("Collection",visibleColumns.indexOf("Collection")!=-1),columnDescriptionForKey("Cost",visibleColumns.indexOf("Cost")!=-1),columnDescriptionForKey("Maturity",visibleColumns.indexOf("Maturity")!=-1)]}}}).service("ToolPaginator",function(){this.currentPage=1,this.maxSize=5,this.pageSize=10}).service("ToolSorter",function(){var _this=this;this.order=!0,this.list=[{attrName:"lastUpdate",text:"Updated"},{attrName:"additionDate",text:"Added"},{attrName:"name",text:"Name"},{attrName:"citationCount",text:"Citation Count"},{attrName:"citationDate",text:"Publication Date"}],this.sortBy=this.list[0];var scoreEntry={attrName:"score",text:"Score"};this.setSortOption=function(parameter){if(void 0==parameter)this.sortBy=this.list[0];else for(var i=0;i<this.list.length;i++)this.list[i].attrName==parameter&&(this.sortBy=this.list[i])},this.addScore=function(){_.isEqual(scoreEntry,_this.list[0])||(_this.list.unshift(scoreEntry),_this.sortBy=_this.list[0])},this.removeScore=function(){_.isEqual(scoreEntry,_this.list[0])&&(_this.list.splice(0,1),_this.sortBy=_this.list[0])}}).service("DisplayModeSelector",function(){this.list=[{attrName:"cards",text:"Compact"},{attrName:"grid",text:"Detailed"}],this.mode=this.list[0]}).factory("Tool",["$resource",function($resource){return $resource("/api/t/:id",null,{query:{isArray:!1,method:"GET"},update:{method:"PUT"}})}]).factory("DisownToolService",["$resource",function($resource){return $resource("/api/t/:id/disown",{id:"@id"},{disown:{method:"POST"}})}]).factory("ToolCreateValidator",["$resource",function($resource){return $resource("/api/t/:id/validate",null,{update:{method:"PUT"}})}]).factory("ToolUpdateValidator",["$resource",function($resource){return $resource("/api/t/:id/validate",null,{update:{method:"PUT"}})}]).factory("Ontology",["$resource",function($resource){return $resource("/api/o/:name",null,{})}]).factory("UsedTerms",["$resource",function($resource){return $resource("/api/used-terms/:usedTermName",null,{query:{isArray:!0,method:"GET"}})}]).service("Attribute",function(){this.description={everything:{label:"Everything"},name:{description:"Sofware name.",label:"Name"},toolType:{description:"A type of application software: a tool can have more than one type.",label:"Tool type"},version:{description:"Software version information. Use 'Add version' to enter individual version numbers (if practical).",label:"Current version"},description:{description:"Software description, e.g. a few sentences adapted from the software publication abstract or homepage.",label:"Description"},operation:{description:"A basic operation performed by this software function.",label:"Function"},functionNote:{description:"Concise comment about this function, if not apparent from the description and EDAM annotations.",label:"Function description"},functionName:{description:"Name of the function (EDAM term)",label:"Function Name"},input:{description:"Details of input data for this function.",label:"Input"},inputDataType:{description:"Type of input data.",label:"Data type"},inputDataFormat:{description:"Allowed format(s) of the input data.",label:"Data format"},outputDataType:{description:"Type of output data.",label:"Data type"},outputDataFormat:{description:"Allowed format(s) of the output data.",label:"Data format"},dataDescription:{description:"Free text description of the data.",label:"Data description"},output:{description:"Details of output data for this function.",label:"Output"},topic:{description:"A scientific domain that the tool serves, or another general category.",label:"Topic"},homepage:{description:"Homepage of the software, or some URL that best serves this purpose.",label:"Homepage URL"},contact:{description:"Primary points of contact, e.g. helpdesk or an individual",label:"Contact"},contactName:{description:"Name of contact",label:"Name"},contactEmail:{description:"Email address of contact",label:"E-mail"},resourceType:{description:"Basic resource type: Tool, Database etc.",label:"Resource type"},"interface":{description:"Resource interfaces: Web UI, Command line etc.",label:"Interface"},publications:{description:"Publications relevant to the resource (PMCID, PMID or DOI)",label:"Publications"},publicationsPrimaryID:{description:"PMCID, PMID or DOI of the publication",label:"ID of the primary publication"},publicationsOtherID:{description:"PMCID, PMID or DOI of other relevant publications",label:"ID of other publications"},docs:{description:"Links to the documentation",label:"Documentation"},docsHome:{description:"Main page of documentation",label:"Main page"},docsTermsOfUse:{description:"Link to the Terms Of Use",label:"Terms of Use"},docsDownload:{description:"Link to the download instructions",label:"Download"},docsCitationInstructions:{description:"Link to the citation instructions",label:"Citation instructions"},docsDownloadSource:{description:"Source code downloads page (URL)",label:"Download source"},docsDownloadBinaries:{description:"Software binaries downloads page (URL)",label:"Download binaries"},docsGithub:{description:"Github page (URL)",label:"Github page"},affiliation:{description:"Entry owner",label:"Affiliation"},mirror:{description:"Mirror homepage (URL)",label:"Mirror"},collectionID:{description:"A tag which assigns the software to a collection in bio.tools.",label:"Collection"},sourceRegistry:{description:"Link to the registry (or other collection) from which the software was imported (URL)",label:"Source registry"},canonicalID:{description:"Canonical Identifier (typically a URI) of the resource, if one is available",label:"Canonical ID"},cost:{description:"Monetary cost of acquiring the software.",label:"Cost"},elixirInfo:{description:"Information specific to ELIXIR services",label:"ELIXIR info"},elixirStatus:{description:"ELIXIR Core Service",label:"ELIXIR status"},elixirNode:{description:"Name of one of countries participating in ELIXIR",label:"ELIXIR node"},maturity:{description:"Development stage of the software product.",label:"Maturity"},platform:{description:"Platforms supported by a downloadable software package",label:"Platform"},language:{description:"Name of a programming language, e.g. used for the software source code.",label:"Language"},license:{description:'Software or data usage license. Use "Unlicensed", "Proprietary" (for commercial licenses) or "Other" in special cases. ',label:"License"},credit:{description:"Entities that should be credited",label:"Credit"},creditsDeveloper:{description:"Name of person that developed the resource",label:"Developer"},creditsContributor:{description:"Name of person contributing to the resource",label:"Contributor"},creditsInstitution:{description:"Name of the institution that developed or provide the resource",label:"Institution"},creditsInfrastructure:{description:"Research infrastructure in which the resource was developed or provided",label:"Infrastructure"},creditsFunding:{description:"Details of grant funding supporting the resource",label:"Funding"},uses:{description:"Other resources this resource uses, e.g. as a data source, or auxillary program",label:"Uses"},usesName:{description:"Name of a resource that this resource uses",label:"Name"},usesHomepage:{description:"Homepage of a resource that this resource uses",label:"Homepage"},usesVersion:{description:"Version number of a resource that this resources uses",label:"Version"},operatingSystem:{description:"The operating system supported by a downloadable software.",label:"Operating system"},accessibility:{description:"How freely available the software is for use.",label:"Accessibility"},cmd:{description:"Relevant command, command-line fragment or option for executing this function or running the tool in this mode.",label:"Command"},linkURL:{description:"A link of some relevance to the software (URL).",label:"linkURL"},linkType:{description:"The type of data, information or system that is obtained when the link is resolved.",label:"linkType"},linkNote:{description:"Comment about the link.",label:"linkNote"},downloadURL:{description:"Link to download (or repository providing a download) for the software.",label:"downloadURL"},downloadType:{description:"Type of downloadable resource.",label:"downloadType"},downloadNote:{description:"Comment about the download.",label:"downloadNote"},downloadVersion:{description:"Version information (typically a version number) of the software applicable to this download.",label:"linkNote"},documentationURL:{description:"Link to documentation for the tool (URL).",label:"documentationURL"},documentationType:{description:"Type of documentation that is linked to.",label:"documentationType"},documentationNote:{description:"Comment about the documentation.",label:"documentationNote"},publicationPMCID:{description:"PubMed Central Identifier (PMCID) of a publication about the software.",label:"publicationPMCID"},publicationPMID:{description:"PubMed Identifier (PMID) of a publication about the software.",label:"publicationPMID"},publicationDOI:{description:"Digital Object Identifier (DOI) of a publication about the software.",label:"publicationDOI"},publicationType:{description:"Type of publication.",label:"publicationType"},publicationVersion:{description:"Version information (typically a version number) of the software applicable to this publication.",label:"publicationVersion"},creditName:{description:"Name of the entity that is credited.",label:"creditName"},creditEmail:{description:"Email address of the entity that is credited.",label:"creditEmail"},creditURL:{description:"URL for the entity that is credited, e.g. homepage of an institute.",label:"creditURL"},creditOrcidID:{description:"Unique identifier (ORCID iD) of a person that is credited.",label:"creditOrcidID"},creditEntityType:{description:"Type of entity that is credited.",label:"creditEntityType"},creditEntityRole:{description:"Role performed by entity that is credited.",label:"creditEntityRole"},creditNote:{description:"A comment about the credit.",label:"creditNote"}}}).factory("CheckUserEditingRights",["User",function(User){return{canEdit:function(resource){if(User.isSuperuser())return!0;if(User.getUsername()==resource.owner)return!0;if(void 0!=resource.editPermission){if("public"==resource.editPermission.type)return!0;if("group"==resource.editPermission.type)for(var index in resource.editPermission.authors)if(User.getUsername()==resource.editPermission.authors[index])return!0}return!1},isOwner:function(resource){return User.getUsername()==resource.owner}}}]).factory("ToolVersionProvider",["$http",function($http){return{getVersions:function(toolId){return $http({method:"GET",url:"/api/tool/"+toolId+"/version"}).then(function(response){return response.data},function(response){return[]})}}}]).factory("EnvironmentChecker",["$http",function($http){return{getEnvironment:function(){return $http({method:"GET",url:"/api/env/"}).then(function(response){return response.data},function(response){return[]})}}}]),angular.module("elixir_front.controllers").controller("SubdomainAdminController",["$scope","$stateParams","DomainConnection","DomainDetailConnection",function($scope,$stateParams,DomainConnection,DomainDetailConnection){var vm=this;$scope.isLoadingSubdomains=!0,$scope.subdomains=[],$scope.deleteSubdomainAtIndex=function(index){var deleteSubdomain=$scope.subdomains[index];$scope.subdomains.splice(index,1);DomainDetailConnection["delete"]({domain:deleteSubdomain.name},function(data){},function(error){})},vm.loadSubdomains=function(){$scope.isLoadingSubdomains=!0,$scope.subdomains=[];DomainConnection.query({},function(data){$scope.subdomains=data,$scope.isLoadingSubdomains=!1},function(errorData){})},vm.loadSubdomains()}]).controller("SubdomainController",["$scope","$stateParams","ToolListOverviewConnection","DomainDetailConnection","DomainConnection",function($scope,$stateParams,ToolListOverviewConnection,DomainDetailConnection,DomainConnection){var vm=this;$scope.ToolListOverviewConnection=ToolListOverviewConnection,$scope.updating=!1,$scope.loading=""!=$stateParams.id,$scope.toolsPerPageCount=10,$scope.search={},$scope.search.searchOption="name",$scope.search.loadingSearchResults=!1,$scope.search.searchResults=[],$scope.search.searchString="",$scope.search.noResults=!1,$scope.search.currentPage=1,$scope.search.totalPages=1,$scope.subdomain={},$scope.subdomain.exists=""!=$stateParams.id,$scope.subdomain.domain=$stateParams.id,$scope.subdomain.title="",$scope.subdomain.subtitle="",$scope.subdomain.description="",$scope.subdomain.toolList=[],$scope.subdomain.resources=[],$scope.subdomain.currentPage=1,$scope.subdomain.totalPages=1,$scope.errors={},$scope.errors.general="",$scope.errors.domain="",$scope.errors.loading="",$scope.response={},$scope.response.general="",$scope.clearButtonPressed=function(){$scope.search.currentPage=1;var searchQuery={};searchQuery[$scope.search.searchOption]=$scope.search.searchString,$scope.search.searchResults=[]},$scope.searchButtonPressed=function(){$scope.search.currentPage=1;var searchQuery={};searchQuery[$scope.search.searchOption]=$scope.search.searchString,vm.performSearch(searchQuery)},$scope.toolInSubdomain=function(toolID,versionID){for(var index in $scope.subdomain.resources){var currentTool=$scope.subdomain.resources[index];if(currentTool.biotoolsID==toolID)return!0}return!1},$scope.addToSubdomain=function(index){var selectedTool=$scope.search.searchResults[index],selectedDict={biotoolsID:selectedTool.biotoolsID,versionId:selectedTool.versionId};$scope.subdomain.toolList.push(selectedTool),$scope.subdomain.resources.push(selectedDict),$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.addAllToSubdomain=function(){for(var tool in $scope.search.searchResults){var selectedTool=$scope.search.searchResults[tool];selectedTool.biotoolsID&&0==$scope.toolInSubdomain(selectedTool.biotoolsID,selectedTool.versionId)&&($scope.subdomain.toolList.push(selectedTool),$scope.subdomain.resources.push({biotoolsID:selectedTool.biotoolsID,versionId:selectedTool.versionId}))}$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.removeFromSubdomain=function(index){$scope.subdomain.toolList.splice(index,1),$scope.subdomain.resources.splice(index,1),$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},$scope.saveSubdomain=function(){$scope.updating=!0,$scope.errors.general="",$scope.response.general="";DomainConnection.create(vm.subdomainQuery(),function(data){$scope.subdomain.exists=!0,$scope.response.general="Domain '"+$scope.subdomain.domain+"' was created.",$scope.updating=!1},function(error){$scope.errors.general=error.data.details,$scope.updating=!1})},vm.fetchSubdomain=function(){$scope.errors.general="",$scope.response.general="";DomainDetailConnection.query({domain:$scope.subdomain.domain},function(data){$scope.subdomain.title=data.data.title,$scope.subdomain.subtitle=data.data.sub_title,$scope.subdomain.description=data.data.description;for(var index in data.data.resources){var tool=data.data.resources[index];tool.biotoolsID=tool.biotoolsID,$scope.subdomain.toolList.push(tool),$scope.subdomain.resources.push(tool)}$scope.loading=!1,$scope.updating=!1,$scope.subdomain.totalPages=$scope.subdomain.toolList.length/$scope.toolsPerPageCount*10},function(error){$scope.errors.loading="Data failed to load. Please try to refresh this website. "+error.data.details})},$scope.updateSubdomain=function(){$scope.updating=!0,$scope.errors.general="",$scope.response.general="";DomainDetailConnection.update(vm.subdomainQuery(),function(data){$scope.response.general="Domain '"+$scope.subdomain.domain+"' was updated with "+$scope.subdomain.resources.length+" entries.",$scope.updating=!1},function(error){$scope.errors.general=error.data.details,$scope.updating=!1})},$scope.makeIdURLSafe=function(value){if($scope.errors.domain="","undefined"!=typeof value)var id=value.replace(/[^a-zA-Z0-9_~ .-]*/g,"").replace(/[ ]+/g,"_");value!=id&&($scope.errors.domain="Entered value '"+value+"' has been modified. Only URL safe characters can be used for the identifier."),$scope.subdomain.domain=id},vm.performSearch=function(query){$scope.search.loadingSearchResults=!0,$scope.search.noResults=!1;var response=ToolListOverviewConnection.query(query,function(){$scope.search.currentPage=1,$scope.search.searchResults=response,$scope.search.loadingSearchResults=!1,$scope.search.totalPages=$scope.search.searchResults.length/$scope.toolsPerPageCount*10,0==response.length&&($scope.search.noResults=!0)})},vm.subdomainQuery=function(){return{domain:$scope.subdomain.domain,title:$scope.subdomain.title,sub_title:$scope.subdomain.subtitle,description:$scope.subdomain.description,resources:$scope.subdomain.resources}},$scope.loading&&vm.fetchSubdomain()}]),angular.module("elixir_front.controllers").controller("WorkflowController",["$scope","$stateParams","$modal","WorkflowProvider",function($scope,$stateParams,$modal,WorkflowProvider){var vm=this;$scope.loading=!0,$scope.filteredWorkflows=[],$scope.workflows=[],vm.loadRequests=function($item,$model,$label){$scope.loading=!0,WorkflowProvider.getWorkflows().then(function(response){$scope.workflows=response.data,$scope.filterWorkflows(),$scope.loading=!1},function(response){})},$scope.filterWorkflows=function(){var searchString=$scope.search.searchString;void 0==searchString||""==searchString?$scope.filteredWorkflows=$scope.workflows:$scope.filteredWorkflows=$scope.workflows.filter(function(x){var foundAnnotations=x.annotations.filter(function(annotation){var regularExpression=new RegExp(searchString,"i");return!!(annotation.title.match(regularExpression)||annotation.title.match(regularExpression)||annotation.edam_term.match(regularExpression))});return foundAnnotations.length>0})},$scope.openModal=function(workflow){$modal.open({templateUrl:"partials/workflows/modal.html",controller:["$modalInstance","workflow",WorkflowModalCtrl],controllerAs:"vm",windowClass:"workflow-modal-window",resolve:{workflow:function(){return workflow}}})},$scope.handleAnnotationClick=function(annotation){console.log(annotation)},$scope.search=function(){console.log(string)},vm.loadRequests()}]);var elixir_front=angular.module("elixir_front");elixir_front.factory("WorkflowProvider",["$http",function($http){return{getWorkflows:function(){return $http({method:"GET",url:"/api/w",params:{}})}}}]),function(){var module,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};module=angular.module("angularBootstrapNavTree",[]),module.directive("abnTree",["$timeout",function($timeout){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li tooltips tooltip-side="right" tooltip-content="{{ resourceModel[row.branch.name].description }}" ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label"> {{ resourceModel[row.branch.name].label }} </span></a></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"=",resourceModel:"="},link:function(scope,element,attrs){var error,expand_all_parents,expand_level,for_all_ancestors,for_each_branch,get_parent,n,on_treeData_change,select_branch,selected_branch,tree;if(error=function(s){},null==attrs.iconExpand&&(attrs.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"),null==attrs.iconCollapse&&(attrs.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"),null==attrs.iconLeaf&&(attrs.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"),null==attrs.expandLevel&&(attrs.expandLevel="3"),expand_level=parseInt(attrs.expandLevel,10),!scope.treeData)return void alert("no treeData defined for the tree!");if(null==scope.treeData.length){if(null==treeData.label)return void alert("treeData should be an array of root branches");scope.treeData=[treeData]}return for_each_branch=function(f){var do_f,root_branch,_i,_len,_ref,_results;for(do_f=function(branch,level){var child,_i,_len,_ref,_results;if(f(branch,level),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(do_f(child,level+1));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)root_branch=_ref[_i],_results.push(do_f(root_branch,1));return _results},selected_branch=null,select_branch=function(branch){if(!branch)return null!=selected_branch&&(selected_branch.selected=!1),void(selected_branch=null);if(branch!==selected_branch){if(null!=selected_branch&&(selected_branch.selected=!1),branch.selected=!0,selected_branch=branch,expand_all_parents(branch),null!=branch.onSelect)return $timeout(function(){return branch.onSelect(branch)});if(null!=scope.onSelect)return $timeout(function(){return scope.onSelect({branch:branch})})}},scope.user_clicks_branch=function(branch){if(branch!==selected_branch)return select_branch(branch)},get_parent=function(child){var parent;return parent=void 0,child.parent_uid&&for_each_branch(function(b){if(b.uid===child.parent_uid)return parent=b}),parent},for_all_ancestors=function(child,fn){var parent;if(parent=get_parent(child),null!=parent)return fn(parent),for_all_ancestors(parent,fn)},expand_all_parents=function(child){return for_all_ancestors(child,function(b){return b.expanded=!0})},scope.tree_rows=[],on_treeData_change=function(){var add_branch_to_list,root_branch,_i,_len,_ref,_results;for(for_each_branch(function(b,level){if(!b.uid)return b.uid=""+Math.random()}),for_each_branch(function(b){var child,_i,_len,_ref,_results;if(angular.isArray(b.children)){for(_ref=b.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(child.parent_uid=b.uid);return _results}}),scope.tree_rows=[],for_each_branch(function(branch){var child,f;return branch.children?branch.children.length>0?(f=function(e){return"string"==typeof e?{label:e,children:[]}:e},branch.children=function(){var _i,_len,_ref,_results;for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],_results.push(f(child));return _results}()):void 0:branch.children=[]}),add_branch_to_list=function(level,branch,visible){var child,child_visible,tree_icon,_i,_len,_ref,_results;if(null==branch.expanded&&(branch.expanded=!1),null==branch.classes&&(branch.classes=[]),branch.noLeaf||branch.children&&0!==branch.children.length?tree_icon=branch.expanded?attrs.iconCollapse:attrs.iconExpand:(tree_icon=attrs.iconLeaf,__indexOf.call(branch.classes,"leaf")<0&&branch.classes.push("leaf")),scope.tree_rows.push({level:level,branch:branch,label:branch.label,classes:branch.classes,tree_icon:tree_icon,visible:visible}),null!=branch.children){for(_ref=branch.children,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],child_visible=visible&&branch.expanded,_results.push(add_branch_to_list(level+1,child,child_visible));return _results}},_ref=scope.treeData,_results=[],_i=0,_len=_ref.length;_i<_len;_i++)root_branch=_ref[_i],_results.push(add_branch_to_list(1,root_branch,!0));return _results},scope.$watch("treeData",on_treeData_change,!0),null!=attrs.initialSelection&&for_each_branch(function(b){if(b.label===attrs.initialSelection)return $timeout(function(){return select_branch(b)})}),n=scope.treeData.length,for_each_branch(function(b,level){return b.level=level,b.expanded=b.level<expand_level}),null!=scope.treeControl&&angular.isObject(scope.treeControl)?(tree=scope.treeControl,tree.expand_all=function(){return for_each_branch(function(b,level){return b.expanded=!0})},tree.collapse_all=function(){return for_each_branch(function(b,level){return b.expanded=!1})},tree.get_first_branch=function(){if(n=scope.treeData.length,n>0)return scope.treeData[0]},tree.select_first_branch=function(){var b;return b=tree.get_first_branch(),tree.select_branch(b)},tree.get_selected_branch=function(){return selected_branch},tree.get_parent_branch=function(b){return get_parent(b)},tree.select_branch=function(b){return select_branch(b),b},tree.get_children=function(b){return b.children},tree.select_parent_branch=function(b){var p;if(null==b&&(b=tree.get_selected_branch()),null!=b&&(p=tree.get_parent_branch(b),null!=p))return tree.select_branch(p),p},tree.add_branch=function(parent,new_branch){return null!=parent?(parent.children.push(new_branch),parent.expanded=!0):scope.treeData.push(new_branch),new_branch},tree.add_root_branch=function(new_branch){return tree.add_branch(null,new_branch),new_branch},tree.expand_branch=function(b){if(null==b&&(b=tree.get_selected_branch()),null!=b)return b.expanded=!0,b},tree.collapse_branch=function(b){if(null==b&&(b=selected_branch),null!=b)return b.expanded=!1,b},tree.get_siblings=function(b){var p,siblings;if(null==b&&(b=selected_branch),null!=b)return p=tree.get_parent_branch(b),siblings=p?p.children:scope.treeData},tree.get_next_sibling=function(b){var i,siblings;if(null==b&&(b=selected_branch),null!=b&&(siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),i<n))return siblings[i+1]},tree.get_prev_sibling=function(b){var i,siblings;if(null==b&&(b=selected_branch),siblings=tree.get_siblings(b),n=siblings.length,i=siblings.indexOf(b),i>0)return siblings[i-1]},tree.select_next_sibling=function(b){var next;if(null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_sibling(b),null!=next))return tree.select_branch(next)},tree.select_prev_sibling=function(b){var prev;if(null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_sibling(b),null!=prev))return tree.select_branch(prev)},tree.get_first_child=function(b){var _ref;if(null==b&&(b=selected_branch),null!=b&&(null!=(_ref=b.children)?_ref.length:void 0)>0)return b.children[0]},tree.get_closest_ancestor_next_sibling=function(b){var next,parent;return next=tree.get_next_sibling(b),null!=next?next:(parent=tree.get_parent_branch(b),tree.get_closest_ancestor_next_sibling(parent))},tree.get_next_branch=function(b){var next;if(null==b&&(b=selected_branch),null!=b)return next=tree.get_first_child(b),null!=next?next:next=tree.get_closest_ancestor_next_sibling(b)},tree.select_next_branch=function(b){var next;if(null==b&&(b=selected_branch),null!=b&&(next=tree.get_next_branch(b),null!=next))return tree.select_branch(next),next},tree.last_descendant=function(b){var last_child;return n=b.children.length,0===n?b:(last_child=b.children[n-1],tree.last_descendant(last_child))},tree.get_prev_branch=function(b){var parent,prev_sibling;if(null==b&&(b=selected_branch),null!=b)return prev_sibling=tree.get_prev_sibling(b),null!=prev_sibling?tree.last_descendant(prev_sibling):parent=tree.get_parent_branch(b)},tree.select_prev_branch=function(b){var prev;if(null==b&&(b=selected_branch),null!=b&&(prev=tree.get_prev_branch(b),null!=prev))return tree.select_branch(prev),prev}):void 0}}}])}.call(this),angular.module("angularDjangoRegistrationAuthApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).run(function(djangoAuth){djangoAuth.initialize("/api/rest-auth",!1)}),angular.module("angularDjangoRegistrationAuthApp").service("djangoAuth",function($q,$http,$cookies,$rootScope){var service={API_URL:"/api/rest-auth",use_session:!1,authenticated:null,authPromise:null,request:function(args){localStorage.token&&($http.defaults.headers.common.Authorization="Token "+localStorage.token),params=args.params||{},args=args||{};var deferred=$q.defer(),url=this.API_URL+args.url,method=args.method||"GET",params=params,data=args.data||{};return $http({url:url,withCredentials:this.use_session,method:method.toUpperCase(),headers:{"X-CSRFToken":$cookies.csrftoken
},params:params,data:data}).success(angular.bind(this,function(data,status,headers,config){deferred.resolve(data,status)})).error(angular.bind(this,function(data,status,headers,config){console.log("error syncing with: "+url),data&&(data.status=status),0==status&&(""==data&&(data={},data.status=0,data.non_field_errors=["Could not connect. Please try again."]),null==data&&(data={},data.status=0,data.non_field_errors=["Server timed out. Please try again."])),deferred.reject(data,status,headers,config)})),deferred.promise},register:function(username,password1,password2,email,more){var data={username:username,password1:password1,password2:password2,email:email};return data=angular.extend(data,more),this.request({method:"POST",url:"/registration/",data:data})},login:function(username,password){var djangoAuth=this;return this.request({method:"POST",url:"/login/",data:{username:username,password:password}}).then(function(data){djangoAuth.use_session||($http.defaults.headers.common.Authorization="Token "+data.key,localStorage.token=data.key),djangoAuth.authenticated=!0,$rootScope.$broadcast("djangoAuth.logged_in",data)})},logout:function(){var djangoAuth=this;return this.request({method:"POST",url:"/logout/"}).then(function(data){delete $http.defaults.headers.common.Authorization,delete localStorage.token,djangoAuth.authenticated=!1,$rootScope.$broadcast("djangoAuth.logged_out")})},changePassword:function(password1,password2){return this.request({method:"POST",url:"/password/change/",data:{new_password1:password1,new_password2:password2}})},resetPassword:function(email){return this.request({method:"POST",url:"/password/reset/",data:{email:email}})},profile:function(){return this.request({method:"GET",url:"/user/"})},updateProfile:function(data){return this.request({method:"PATCH",url:"/user/",data:data})},verify:function(key){return this.request({method:"POST",url:"/registration/verify-email/",data:{key:key}})},confirmReset:function(uid,token,password1,password2){return this.request({method:"POST",url:"/password/reset/confirm/",data:{uid:uid,token:token,new_password1:password1,new_password2:password2}})},authenticationStatus:function(restrict,force){restrict=restrict||!1,force=force||!1,(null==this.authPromise||force)&&(this.authPromise=this.request({method:"GET",url:"/user/"}));var da=this,getAuthStatus=$q.defer();return null==this.authenticated||force?this.authPromise.then(function(){da.authenticated=!0,getAuthStatus.resolve()},function(){da.authenticated=!1,restrict?getAuthStatus.reject("User is not logged in."):getAuthStatus.resolve()}):0==this.authenticated&&restrict?getAuthStatus.reject("User is not logged in."):getAuthStatus.resolve(),getAuthStatus.promise},initialize:function(url,sessions){return this.API_URL=url,this.use_session=sessions,this.authenticationStatus()}};return service}),function(){var KEYS={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},MAX_SAFE_INTEGER=9007199254740991,SUPPORTED_INPUT_TYPES=["text","email","url"],tagsInput=angular.module("ngTagsInput",[]);tagsInput.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function($timeout,$document,$window,tagsInputConfig,tiUtil){function TagList(options,events,onTagAdding,onTagRemoving){var getTagText,setTagText,tagIsValid,self={};return getTagText=function(tag){return tiUtil.safeToString(tag[options.displayProperty])},setTagText=function(tag,text){tag[options.displayProperty]=text},tagIsValid=function(tag){var tagText=getTagText(tag);return tagText&&tagText.length>=options.minLength&&tagText.length<=options.maxLength&&options.allowedTagsPattern.test(tagText)&&!tiUtil.findInObjectArray(self.items,tag,options.keyProperty||options.displayProperty)&&onTagAdding({$tag:tag})},self.items=[],self.addText=function(text){var tag={};return setTagText(tag,text),self.add(tag)},self.add=function(tag){var tagText=getTagText(tag);return options.replaceSpacesWithDashes&&(tagText=tiUtil.replaceSpacesWithDashes(tagText)),setTagText(tag,tagText),tagIsValid(tag)?(self.items.push(tag),events.trigger("tag-added",{$tag:tag})):tagText&&events.trigger("invalid-tag",{$tag:tag}),tag},self.remove=function(index){var tag=self.items[index];if(onTagRemoving({$tag:tag}))return self.items.splice(index,1),self.clearSelection(),events.trigger("tag-removed",{$tag:tag}),tag},self.select=function(index){index<0?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index]},self.selectPrior=function(){self.select(--self.index)},self.selectNext=function(){self.select(++self.index)},self.removeSelected=function(){return self.remove(self.index)},self.clearSelection=function(){self.selected=null,self.index=-1},self.clearSelection(),self}function validateType(type){return SUPPORTED_INPUT_TYPES.indexOf(type)!==-1}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&",attributeList:"="},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function($scope,$attrs,$element){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("tagsInput",$scope,$attrs,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",validateType],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,MAX_SAFE_INTEGER],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,MAX_SAFE_INTEGER],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),$scope.tagList=new TagList($scope.options,$scope.events,tiUtil.handleUndefinedResult($scope.onTagAdding,!0),tiUtil.handleUndefinedResult($scope.onTagRemoving,!0)),this.registerAutocomplete=function(){var input=$element.find("input");return{addTag:function(tag){return $scope.tagList.add(tag)},focusInput:function(){input[0].focus()},getTags:function(){return $scope.tagList.items},getCurrentTagText:function(){return $scope.newTag.text()},getOptions:function(){return $scope.options},on:function(name,handler){return $scope.events.on(name,handler),this}}},this.registerTagItem=function(){return{getOptions:function(){return $scope.options},removeTag:function(index){$scope.disabled||$scope.tagList.remove(index)}}}}],link:function(scope,element,attrs,ngModelCtrl){var setElementValidity,hotkeys=[KEYS.enter,KEYS.comma,KEYS.space,KEYS.backspace,KEYS["delete"],KEYS.left,KEYS.right],tagList=scope.tagList,events=scope.events,options=scope.options,input=element.find("input"),validationOptions=["minTags","maxTags","allowLeftoverText"];setElementValidity=function(){ngModelCtrl.$setValidity("maxTags",tagList.items.length<=options.maxTags),ngModelCtrl.$setValidity("minTags",tagList.items.length>=options.minTags),ngModelCtrl.$setValidity("leftoverText",!(!scope.hasFocus&&!options.allowLeftoverText)||!scope.newTag.text())},ngModelCtrl.$isEmpty=function(value){return!value||!value.length},scope.newTag={text:function(value){return angular.isDefined(value)?(scope.text=value,void events.trigger("input-change",value)):scope.text||""},invalid:null},scope.track=function(tag){return tag[options.keyProperty||options.displayProperty]},scope.$watch("tags",function(value){value?(tagList.items=tiUtil.makeObjectArray(value,options.displayProperty),scope.tags=tagList.items):tagList.items=[]}),scope.$watch("tags.length",function(){setElementValidity(),ngModelCtrl.$validate()}),attrs.$observe("disabled",function(value){scope.disabled=value}),scope.eventHandlers={input:{keydown:function($event){events.trigger("input-keydown",$event)},focus:function(){scope.hasFocus||(scope.hasFocus=!0,events.trigger("input-focus"))},blur:function(){$timeout(function(){var activeElement=$document.prop("activeElement"),lostFocusToBrowserWindow=activeElement===input[0],lostFocusToChildElement=element[0].contains(activeElement);!lostFocusToBrowserWindow&&lostFocusToChildElement||(scope.hasFocus=!1,events.trigger("input-blur"))})},paste:function($event){$event.getTextData=function(){var clipboardData=$event.clipboardData||$event.originalEvent&&$event.originalEvent.clipboardData;return clipboardData?clipboardData.getData("text/plain"):$window.clipboardData.getData("Text")},events.trigger("input-paste",$event)}},host:{click:function(){scope.disabled||input[0].focus()}},tag:{click:function(tag){events.trigger("tag-clicked",{$tag:tag})}}},events.on("tag-added",scope.onTagAdded).on("invalid-tag",scope.onInvalidTag).on("tag-removed",scope.onTagRemoved).on("tag-clicked",scope.onTagClicked).on("tag-added",function(){scope.newTag.text("")}).on("tag-added tag-removed",function(){scope.tags=tagList.items,ngModelCtrl.$setDirty()}).on("invalid-tag",function(){scope.newTag.invalid=!0}).on("option-change",function(e){validationOptions.indexOf(e.name)!==-1&&setElementValidity()}).on("input-change",function(){tagList.clearSelection(),scope.newTag.invalid=null}).on("input-focus",function(){element.triggerHandler("focus"),ngModelCtrl.$setValidity("leftoverText",!0)}).on("input-blur",function(){options.addOnBlur&&!options.addFromAutocompleteOnly&&tagList.addText(scope.newTag.text()),element.triggerHandler("blur"),setElementValidity()}).on("input-keydown",function(event){var shouldAdd,shouldRemove,shouldSelect,shouldEditLastTag,key=event.keyCode,addKeys={};if(!tiUtil.isModifierOn(event)&&hotkeys.indexOf(key)!==-1){if(addKeys[KEYS.enter]=options.addOnEnter,addKeys[KEYS.comma]=options.addOnComma,addKeys[KEYS.space]=options.addOnSpace,shouldAdd=!options.addFromAutocompleteOnly&&addKeys[key],shouldRemove=(key===KEYS.backspace||key===KEYS["delete"])&&tagList.selected,shouldEditLastTag=key===KEYS.backspace&&0===scope.newTag.text().length&&options.enableEditingLastTag,shouldSelect=(key===KEYS.backspace||key===KEYS.left||key===KEYS.right)&&0===scope.newTag.text().length&&!options.enableEditingLastTag,shouldAdd)tagList.addText(scope.newTag.text());else if(shouldEditLastTag){var tag;tagList.selectPrior(),tag=tagList.removeSelected(),tag&&scope.newTag.text(tag[options.displayProperty])}else shouldRemove?tagList.removeSelected():shouldSelect&&(key===KEYS.left||key===KEYS.backspace?tagList.selectPrior():key===KEYS.right&&tagList.selectNext());(shouldAdd||shouldSelect||shouldRemove||shouldEditLastTag)&&event.preventDefault()}}).on("input-paste",function(event){if(options.addOnPaste){var data=event.getTextData(),tags=data.split(options.pasteSplitPattern);tags.length>1&&(tags.forEach(function(tag){tagList.addText(tag)}),event.preventDefault())}})}}}]),tagsInput.directive("tiTagItem",["tiUtil",function(tiUtil){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,tagsInputCtrl){var tagsInput=tagsInputCtrl.registerTagItem(),options=tagsInput.getOptions();scope.$$template=options.template,scope.$$removeTagSymbol=options.removeTagSymbol,scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty])},scope.$removeTag=function(){tagsInput.removeTag(scope.$index)},scope.$watch("$parent.$index",function(value){scope.$index=value})}}}]),tagsInput.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function($document,$timeout,$sce,$q,tagsInputConfig,tiUtil){function SuggestionList(loadFn,options,events){var getDifference,lastPromise,getTagId,self={};return getTagId=function(){return options.tagsInput.keyProperty||options.tagsInput.displayProperty},getDifference=function(array1,array2){return array1.filter(function(item){return!tiUtil.findInObjectArray(array2,item,getTagId(),function(a,b){return options.tagsInput.replaceSpacesWithDashes&&(a=tiUtil.replaceSpacesWithDashes(a),b=tiUtil.replaceSpacesWithDashes(b)),tiUtil.defaultComparer(a,b)})})},self.reset=function(){lastPromise=null,self.items=[],self.visible=!1,self.index=-1,self.selected=null,self.query=null},self.show=function(){options.selectFirstMatch?self.select(0):self.selected=null,self.visible=!0},self.load=tiUtil.debounce(function(query,tags){self.query=query;var promise=$q.when(loadFn({$query:query}));lastPromise=promise,promise.then(function(items){promise===lastPromise&&(items=tiUtil.makeObjectArray(items.data||items,getTagId()),items=getDifference(items,tags),self.items=items.slice(0,options.maxResultsToShow),self.items.length>0?self.show():(self.reset(),self.visible=!0))})},options.debounceDelay),self.selectNext=function(){self.select(++self.index)},self.selectPrior=function(){self.select(--self.index)},self.select=function(index){index<0?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index],events.trigger("suggestion-selected",index)},self.reset(),self}function scrollToElement(root,index){var element=root.find("li").eq(index),parent=element.parent(),elementTop=element.prop("offsetTop"),elementHeight=element.prop("offsetHeight"),parentHeight=parent.prop("clientHeight"),parentScrollTop=parent.prop("scrollTop");elementTop<parentScrollTop?parent.prop("scrollTop",elementTop):elementTop+elementHeight>parentHeight+parentScrollTop&&parent.prop("scrollTop",elementTop+elementHeight-parentHeight)}return{restrict:"E",require:"^tagsInput",scope:{source:"&",filter:"=",attributeList:"="},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("autoComplete",$scope,$attrs,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),$scope.suggestionList=new SuggestionList($scope.source,$scope.options,$scope.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return $scope.options},getQuery:function(){return $scope.suggestionList.query}}}}],link:function(scope,element,attrs,tagsInputCtrl){var shouldLoadSuggestions,hotkeys=[KEYS.enter,KEYS.tab,KEYS.escape,KEYS.up,KEYS.down],suggestionList=scope.suggestionList,tagsInput=tagsInputCtrl.registerAutocomplete(),options=scope.options,events=scope.events;options.tagsInput=tagsInput.getOptions(),shouldLoadSuggestions=function(value){return value&&value.length>=options.minLength||!value&&options.loadOnEmpty},scope.addSuggestionByIndex=function(index){suggestionList.select(index),scope.addSuggestion()},scope.addSuggestion=function(){var added=!1;return suggestionList.selected&&(suggestionList.selected.text="'"+suggestionList.selected.text+"'",tagsInput.addTag(angular.copy(suggestionList.selected)),suggestionList.reset(),tagsInput.focusInput(),added=!0),added},scope.track=function(item){return item[options.tagsInput.keyProperty||options.tagsInput.displayProperty]},tagsInput.on("tag-added tag-removed invalid-tag input-blur",function(){suggestionList.reset()}).on("input-change",function(value){shouldLoadSuggestions(value)?suggestionList.load(value,tagsInput.getTags()):suggestionList.reset()}).on("input-focus",function(){var value=tagsInput.getCurrentTagText();options.loadOnFocus&&shouldLoadSuggestions(value)&&suggestionList.load(value,tagsInput.getTags())}).on("input-keydown",function(event){var key=event.keyCode,handled=!1;if(!tiUtil.isModifierOn(event)&&hotkeys.indexOf(key)!==-1)return suggestionList.visible?key===KEYS.down?(suggestionList.selectNext(),handled=!0):key===KEYS.up?(suggestionList.selectPrior(),handled=!0):key===KEYS.escape?(suggestionList.reset(),handled=!0):key!==KEYS.enter&&key!==KEYS.tab||(handled=scope.addSuggestion()):key===KEYS.down&&scope.options.loadOnDownArrow&&(suggestionList.load(tagsInput.getCurrentTagText(),tagsInput.getTags()),handled=!0),handled?(event.preventDefault(),event.stopImmediatePropagation(),!1):void 0}),events.on("suggestion-selected",function(index){scrollToElement(element,index)});var initializing=!0;scope.$watch("filter.selected",function(){$timeout(initializing?function(){initializing=!1}:function(){suggestionList.load(tagsInput.getCurrentTagText(),tagsInput.getTags())})})}}}]),tagsInput.directive("tiAutocompleteMatch",["$sce","tiUtil",function($sce,tiUtil){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,autoCompleteCtrl){var autoComplete=autoCompleteCtrl.registerAutocompleteMatch(),options=autoComplete.getOptions();scope.$$template=options.template,scope.$index=scope.$parent.$index,scope.$highlight=function(text){return options.highlightMatchedText&&(text=tiUtil.safeHighlight(text,autoComplete.getQuery())),$sce.trustAsHtml(text)},scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty||options.tagsInput.displayProperty])}}}}]),tagsInput.directive("tiTranscludeAppend",function(){return function(scope,element,attrs,ctrl,transcludeFn){transcludeFn(function(clone){element.append(clone)})}}),tagsInput.directive("tiAutosize",["tagsInputConfig",function(tagsInputConfig){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var span,resize,threshold=tagsInputConfig.getTextAutosizeThreshold();span=angular.element('<span class="input"></span>'),span.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),element.parent().append(span),resize=function(originalValue){var width,value=originalValue;return angular.isString(value)&&0===value.length&&(value=attrs.placeholder),value&&(span.text(value),span.css("display",""),width=span.prop("offsetWidth"),span.css("display","none")),element.css("width",width?width+threshold+"px":""),originalValue},ctrl.$parsers.unshift(resize),ctrl.$formatters.unshift(resize),attrs.$observe("placeholder",function(value){ctrl.$modelValue||resize(value)})}}}]),tagsInput.directive("tiBindAttrs",function(){return function(scope,element,attrs){scope.$watch(attrs.tiBindAttrs,function(value){angular.forEach(value,function(value,key){attrs.$set(key,value)})},!0)}}),tagsInput.provider("tagsInputConfig",function(){var globalDefaults={},interpolationStatus={},autosizeThreshold=3;this.setDefaults=function(directive,defaults){return globalDefaults[directive]=defaults,this},this.setActiveInterpolation=function(directive,options){return interpolationStatus[directive]=options,this},this.setTextAutosizeThreshold=function(threshold){return autosizeThreshold=threshold,this},this.$get=["$interpolate",function($interpolate){var converters={};return converters[String]=function(value){return value},converters[Number]=function(value){return parseInt(value,10)},converters[Boolean]=function(value){return"true"===value.toLowerCase()},converters[RegExp]=function(value){return new RegExp(value)},{load:function(directive,scope,attrs,options){var defaultValidator=function(){return!0};scope.options={},angular.forEach(options,function(value,key){var type,localDefault,validator,converter,getDefault,updateValue;type=value[0],localDefault=value[1],validator=value[2]||defaultValidator,converter=converters[type],getDefault=function(){var globalValue=globalDefaults[directive]&&globalDefaults[directive][key];return angular.isDefined(globalValue)?globalValue:localDefault},updateValue=function(value){scope.options[key]=value&&validator(value)?converter(value):getDefault()},interpolationStatus[directive]&&interpolationStatus[directive][key]?attrs.$observe(key,function(value){updateValue(value),scope.events.trigger("option-change",{name:key,newValue:value})}):updateValue(attrs[key]&&$interpolate(attrs[key])(scope.$parent))})},getTextAutosizeThreshold:function(){return autosizeThreshold}}}]}),tagsInput.factory("tiUtil",["$timeout",function($timeout){var self={};return self.debounce=function(fn,delay){var timeoutId;return function(){var args=arguments;$timeout.cancel(timeoutId),timeoutId=$timeout(function(){fn.apply(null,args)},delay)}},self.makeObjectArray=function(array,key){if(!angular.isArray(array)||0===array.length||angular.isObject(array[0]))return array;var newArray=[];return array.forEach(function(item){var obj={};obj[key]=item,newArray.push(obj)}),newArray},self.findInObjectArray=function(array,obj,key,comparer){var item=null;return comparer=comparer||self.defaultComparer,array.some(function(element){if(comparer(element[key],obj[key]))return item=element,!0}),item},self.defaultComparer=function(a,b){return self.safeToString(a).toLowerCase()===self.safeToString(b).toLowerCase()},self.safeHighlight=function(str,value){function escapeRegexChars(str){return str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!value)return str;str=self.encodeHTML(str),value=self.encodeHTML(value);var expression=new RegExp("&[^;]+;|"+escapeRegexChars(value),"gi");return str.replace(expression,function(match){return match.toLowerCase()===value.toLowerCase()?"<em>"+match+"</em>":match})},self.safeToString=function(value){return angular.isUndefined(value)||null==value?"":value.toString().trim()},self.encodeHTML=function(value){return self.safeToString(value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},self.handleUndefinedResult=function(fn,valueIfUndefined){return function(){var result=fn.apply(null,arguments);return angular.isUndefined(result)?valueIfUndefined:result}},self.replaceSpacesWithDashes=function(str){return self.safeToString(str).replace(/\s/g,"-")},self.isModifierOn=function(event){return event.shiftKey||event.ctrlKey||event.altKey||event.metaKey},self.simplePubSub=function(){var events={};return{on:function(names,handler){return names.split(" ").forEach(function(name){events[name]||(events[name]=[]),events[name].push(handler)}),this},trigger:function(name,args){var handlers=events[name]||[];return handlers.every(function(handler){return self.handleUndefinedResult(handler,!0)(args)}),this}}},self}]),tagsInput.run(["$templateCache",function($templateCache){$templateCache.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),$templateCache.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),$templateCache.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="filter-list"><li class="filter-item" ng-class="{selected: $parent.filter.selected == filter}" ng-repeat="filter in filter.list" ng-click="$parent.filter.selected=filter">{{attributeList[filter].label}}</li></ul><hr class="hr-slim"><div class="clearfix" style="height:10px;"></div><ul class="suggestion-list"><li class="suggestion-item" ng-show="suggestionList.items.length < 1">No suggestions</li></ul><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),$templateCache.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),angular.module("angularDjangoRegistrationAuthApp").service("Validate",function(){return{message:{minlength:"This value is not long enough.",maxlength:"This value is too long.",email:"A properly formatted email address is required.",required:"This field is required."},more_messages:{demo:{required:"Here is a sample alternative required message."}},check_more_messages:function(name,error){return(this.more_messages[name]||[])[error]||null},validation_messages:function(field,form,error_bin){var messages=[];for(var e in form[field].$error)if(form[field].$error[e]){var special_message=this.check_more_messages(field,e);special_message?messages.push(special_message):this.message[e]?messages.push(this.message[e]):messages.push("Error: "+e)}var deduped_messages=[];angular.forEach(messages,function(el,i){deduped_messages.indexOf(el)===-1&&deduped_messages.push(el)}),error_bin&&(error_bin[field]=deduped_messages)},form_validation:function(form,error_bin){for(var field in form)"$"!=field.substr(0,1)&&this.validation_messages(field,form,error_bin)}}}),angular.module("elixir_front").controller("AboutController",["$scope",function($scope){}]),angular.module("elixir_front").directive("aboutContact",["$state","$stateParams",function($state,$stateParams){return{restrict:"EA",templateUrl:"components/about/aboutContact.html",scope:!0,link:function(scope,element,attrs){scope.name=attrs.name,scope.initials=attrs.initials,scope.role=attrs.role,scope.image=attrs.image}}}]),angular.module("elixir_front").directive("detailsBar",[function(){return{restrict:"A",templateUrl:"components/detailsBar/detailsBar.html",link:function(scope,element,attrs){scope.showToolbar="search"==scope.toState.name,scope.$watch(function(){return scope.toState.name},function(newVal,oldVal){scope.showToolbar="search"==scope.toState.name||"home"==scope.toState.name})}}}]).controller("DetailsBarController",["$rootScope","$scope","$state","$stateParams",function($rootScope,$scope,$state,$stateParams){}]),angular.module("elixir_front").controller("DomainBarController",["$scope","djangoAuth","$stateParams","$timeout","Domain",function($scope,djangoAuth,$stateParams,$timeout,Domain){var vm=this;vm.Domain=Domain,$timeout(function(){Domain.load($stateParams.domain)},500)}]).service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection",function(DomainDetailConnection){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description}}]),angular.module("elixir_front").service("DomainConnection",["$resource",function($resource){return $resource("/api/d/",null,{query:{isArray:!0,method:"GET"},create:{method:"POST"}})}]).service("DomainDetailConnection",["$resource",function($resource){return $resource("/api/d/:domain",{domain:"@domain"},{query:{isArray:!1,method:"GET"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).service("Domain",["DomainDetailConnection","$rootScope",function(DomainDetailConnection,$rootScope){var _this=this;this.current={},this.loaded=!1,this.set=function(domain){_this.current=domain},this.load=function(domain){if("undefined"!=typeof domain){DomainDetailConnection.query({domain:domain},function(response){_this.set(response.data),_this.loaded=!0})}else _this.loaded=!1},this.isLoaded=function(){return _this.loaded},this.hasSubdomain=function(){return!_.isEmpty(_this.current)},this.hasTitle=function(){return void 0!==_this.current.title},this.hasSubTitle=function(){return void 0!==_this.current.sub_title},this.hasDescription=function(){return void 0!==_this.current.description},this.unload=function(){1==this.isLoaded()&&(this.current={},this.loaded=!1)}}]),angular.module("elixir_front").directive("navigationBar",[function(){return{restrict:"A",templateUrl:"components/navigationBar/navigationBar.html",link:function(scope,element,attrs){}}}]).controller("NavbarController",["$scope","djangoAuth","User","$stateParams","$timeout","Domain","$state",function($scope,djangoAuth,User,$stateParams,$timeout,Domain,$state){$scope.User=User,$scope.Domain=Domain,$timeout(function(){Domain.load($stateParams.domain)},500),$scope.logoutButtonClick=function(){djangoAuth.logout()},$scope.homeButtonClicked=function(){$scope.Domain.unload(),$state.go("home")}}]),angular.module("elixir_front").directive("pageFooter",[function(){return{restrict:"A",templateUrl:"components/pageFooter/pageFooter.html",link:function(scope,element,attrs){}}}]),angular.module("elixir_front").controller("ProfileController",["$scope","$state","djangoAuth","DisownToolService","User",function($scope,$state,djangoAuth,DisownToolService,User){$scope.profile={},$scope.loading=!0,$scope.User=User,djangoAuth.profile().then(function(response){$scope.profile=response,$scope.loading=!1},function(response){$scope.loading=!1}),$scope.disownEntry=function(entry){DisownToolService.disown({id:entry.id,version:entry.versionId},function(response){$scope.profile.resources=_.difference($scope.profile.resources,[entry])},function(response){alert("Failed to disown "+entry.name+". Please check your connection and try again later.")})}}]),angular.module("elixir_front").directive("searchBar",["Query","ToolList","Highlighting","Attribute","$state","$stateParams","$timeout","UsedTerms","$q","filterFilter","Domain","$rootScope",function(Query,ToolList,Highlighting,Attribute,$state,$stateParams,$timeout,UsedTerms,$q,filterFilter,Domain,$rootScope){return{restrict:"A",templateUrl:"components/searchBar/searchBar.html",link:function(scope,element,attrs){function updateQuery(){Query.current=[];for(var prop in $stateParams)if($stateParams.hasOwnProperty(prop)&&!_.includes(["page","sort","ord","domain"],prop)&&"undefined"!=typeof $stateParams[prop])if("q"==prop){var list=$stateParams[prop].split("+");for(var i in list)0==_.isEmpty(list[i])&&Query.current.push({text:list[i],filter:"everything"})}else Query.current.push({text:$stateParams[prop],filter:prop});Highlighting.set(Query.current)}function getUsedTerms(term,params){var d=$q.defer();return params.usedTermName=term,UsedTerms.get(params,function(response){d.resolve(response.data)}),d.promise}function getSuggestions(){scope.usedTerms={};var params=_.clone($stateParams);params.page=null,params.sort=null,params.ord=null,scope.usedTerms.name=getUsedTerms("name",params),scope.usedTerms.topic=getUsedTerms("topic",params),scope.usedTerms["function"]=getUsedTerms("operation",params),scope.usedTerms.input=getUsedTerms("input",params),scope.usedTerms.output=getUsedTerms("output",params),scope.usedTerms.credit=getUsedTerms("credit",params),scope.usedTerms.collectionID=getUsedTerms("collectionID",params),scope.usedTerms.everything=getUsedTerms("all",params)}scope.Query=Query,scope.Attribute=Attribute,scope.ToolList=ToolList;$rootScope.$on("$stateChangeSuccess",function(event,toState,toStateParams,fromState,fromStateParams){
"tool"===toState.name||"home"===toState.name?Query.current=[]:"search"===toState.name&&updateQuery()}),updateQuery(),scope.loadSuggestions=function(term,query){var deferred=$q.defer();return scope.usedTerms[term].then(function(list){deferred.resolve(filterFilter(list,query))}),deferred.promise},scope.filter={},scope.filter.selected="everything",scope.filter.list=["everything","name","topic","function","input","output","credit","collectionID"],getSuggestions(),scope.tagAdded=function(tag){tag.text=scope.normalizeTag(tag),tag.filter=scope.filter.selected,scope.filter.selected="everything"},scope.normalizeTag=function(tag){return tag.text.replace(/\+/g,"")},scope.tagsChanged=function(){$rootScope.$emit("search-bar-tags-changed",{}),$timeout(function(){var params={};params.page=1,params.sort=$stateParams.sort,void 0==params.sort&&(params.sort="score"),0==scope.Query.current.length&&(params.sort=void 0,params.page=void 0),params.ord=$stateParams.ord,params.domain=$stateParams.domain;for(var i in scope.Query.current)"everything"==scope.Query.current[i].filter?params.q&&params.q.length>0?params.q+="+"+scope.Query.current[i].text:params.q=scope.Query.current[i].text:params[scope.Query.current[i].filter]=scope.Query.current[i].text;$state.transitionTo("search",params,{notify:!0}),Highlighting.set(Query.current),$timeout(function(){getSuggestions(),ToolList.refresh()})})}}}}]),angular.module("elixir_front.services").factory("Stats",["$resource",function($resource){return $resource("/api/stats",null,{query:{isArray:!1,method:"GET"}})}]).factory("StatsTotalEntries",["$resource",function($resource){return $resource("/api/stats/total-entries",null,{query:{isArray:!0,method:"GET"}})}]).factory("StatsUserData",["$resource",function($resource){return $resource("/api/stats/users",null,{query:{isArray:!0,method:"GET"}})}]).factory("TotalAnnotationsStatsData",["$resource",function($resource){return $resource("/api/stats/annotation-count",null,{query:{isArray:!0,method:"GET"}})}]).service("StatsDataSource",["$stateParams","Stats","StatsTotalEntries","StatsUserData","TotalAnnotationsStatsData",function($stateParams,Stats,StatsTotalEntries,StatsUserData,TotalAnnotationsStatsData){var _this=this;this.isLoadingData=!0,this.isLoadingTotalEntriesData=!0,this.isLoadingUserStatsData=!0,this.isLoadingTotalAnnotationsStats=!0,this.statsData={},this.totalEntriesData={},this.userStatsData={},this.totalAnnotationsStatsData={},this.totalAnnotationsCount=function(){var totalCount=0;for(var key in this.statsData.totalAnnotationCount){var value=this.statsData.totalAnnotationCount[key];totalCount+=value}return totalCount},this.fetchStatsData=function(completion){this.isLoadingData=!0;var response=Stats.query($stateParams,function(){_this.statsData=response,_this.isLoadingData=!1,completion()})},this.fetchTotalEntriesData=function(completion){this.isLoadingTotalEntriesData=!0;var response=StatsTotalEntries.query($stateParams,function(){_this.totalEntriesData=response,_this.isLoadingTotalEntriesData=!1,completion()})},this.fetchUserStatsData=function(completion){this.isLoadingUserStatsData=!0;var response=StatsUserData.query($stateParams,function(){_this.userStatsData=response,_this.isLoadingUserStatsData=!1,completion()})},this.fetchTotalAnnotationsStatsData=function(completion){this.isLoadingTotalAnnotationsStats=!0;var response=TotalAnnotationsStatsData.query($stateParams,function(){_this.totalAnnotationsStatsData=response,_this.isLoadingTotalAnnotationsStats=!1,completion()})}}]),angular.module("elixir_front.controllers").controller("StatsController",["$scope","$http","StatsDataSource",function($scope,$http,StatsDataSource){var _this=this;$scope.labels=[],$scope.labelsUsers=[],$scope.series=["Total entries"],$scope.seriesEDAM=["EDAM annotations"],$scope.seriesEDAMBreakdown=["Data Type annotations","Topic annotations","Function annotations","Format annotations"],$scope.seriesUsers=["Total contributors count","New contributors this month"],$scope.seriesTotalAnnotationDetail=["Name","Description","Homepage","Tool Type","Unique Id","Topic","Publication","Contact","Operation","Documentation","Operating System","Input output","Code availability","Accessibility","Data format","Community","Downloads","Total"],$scope.seriesTotalAnnotation=["Total"],$scope.data=[[]],$scope.dataEDAM=[[]],$scope.dataEDAMBreakdown=[[]],$scope.dataUsers=[[]],$scope.dataTotalAnnotation=[[]],$scope.dataTotalAnnotationDetail=[[]],$scope.totalAnnotationOptions={tooltips:{titleFontSize:10,bodyFontSize:9,bodySpacing:0}},$scope.statsDataSource=StatsDataSource,$scope.statsDataSource.fetchStatsData(function(){_this.initializeTopContributorsStatsGraph()}),$scope.statsDataSource.fetchTotalEntriesData(function(){_this.initializeTotalEntriesGraph()}),$scope.statsDataSource.fetchUserStatsData(function(){_this.initializeUserStatsGraph()}),$scope.statsDataSource.fetchTotalAnnotationsStatsData(function(){_this.initializeTotalAnnotationsStatsGraph(),_this.initializeTotalAnnotationsDetailStatsGraph()}),$scope.topContributorsLabels=[],$scope.topContributorsData=[],$scope.topContributorsOptions={legend:{display:!0}},this.initializeTotalEntriesGraph=function(){var data=$scope.statsDataSource.totalEntriesData;$scope.labels=_.map(data,function(x){var date=x.date.split("T")[0];return moment(date).format("MMM YY")}),$scope.data=[_.map(data,function(x){return x.entriesCount})],$scope.dataEDAM=[_.map(data,function(x){return x.edamAnnotationsCount})],$scope.dataEDAMBreakdown=[_.map(data,function(x){return x.dataTypeAnnotationsCount}),_.map(data,function(x){return x.topicAnnotationsCount}),_.map(data,function(x){return x.functionAnnotationsCount}),_.map(data,function(x){return x.formatAnnotationsCount})]},this.initializeUserStatsGraph=function(){var data=$scope.statsDataSource.userStatsData;$scope.labelsUsers=_.map(data,function(x){var date=x.date.split("T")[0];return moment(date).format("MMM YY")}),$scope.dataUsers=[_.map(data,function(x){return x.totalUsersCount}),_.map(data,function(x){return x.newUsersCount})]},this.initializeTopContributorsStatsGraph=function(){var contributorData=$scope.statsDataSource.statsData.topContributors;$scope.topContributorsLabels=_.map(contributorData,function(x){return x.domain}),$scope.topContributorsData=_.map(contributorData,function(x){return x.count})},this.initializeTotalAnnotationsStatsGraph=function(){var annotationData=$scope.statsDataSource.totalAnnotationsStatsData;$scope.dataTotalAnnotation=[_.map(annotationData,function(x){var data=x,totalCount=0;for(var key in data)"date"==key||isNaN(data[key])||(totalCount+=data[key]);return totalCount})]},this.initializeTotalAnnotationsDetailStatsGraph=function(){var annotationData=$scope.statsDataSource.totalAnnotationsStatsData;$scope.dataTotalAnnotationDetail=[_.map(annotationData,function(x){return x.nameAnnotationCount}),_.map(annotationData,function(x){return x.descriptionAnnotationCount}),_.map(annotationData,function(x){return x.homepageAnnotationCount}),_.map(annotationData,function(x){return x.toolTypeAnnotationCount}),_.map(annotationData,function(x){return x.uniqueIDAnnotationCount}),_.map(annotationData,function(x){return x.topicAnnotationCount}),_.map(annotationData,function(x){return x.publicationAnnotationCount}),_.map(annotationData,function(x){return x.contactAnnotationCount}),_.map(annotationData,function(x){return x.operationAnnotationCount}),_.map(annotationData,function(x){return x.documentationAnnotationCount}),_.map(annotationData,function(x){return x.operatingSystemAnnotationCount}),_.map(annotationData,function(x){return x.inputOutputAnnotationCount}),_.map(annotationData,function(x){return x.codeAvailabilityAnnotationCount}),_.map(annotationData,function(x){return x.accessibilityAnnotationCount}),_.map(annotationData,function(x){return x.dataFormatsAnnotationCount}),_.map(annotationData,function(x){return x.communityAnnotationCount}),_.map(annotationData,function(x){return x.downloadsAnnotationCount})]}}]),angular.module("elixir_front").controller("ToolPageController",["$scope","$state","$timeout","$stateParams","Tool","User","CheckUserEditingRights","ResourceRequestProvider","ngMeta","Query",function($scope,$state,$timeout,$stateParams,Tool,User,CheckUserEditingRights,ResourceRequestProvider,ngMeta,Query){function cleanNulls(object){for(var key in object)if(null==object[key])delete object[key];else if(object[key].constructor===Array)if(0==object[key].length)delete object[key];else for(var i in object[key])cleanNulls(object[key][i]);else"object"==typeof object[key]&&cleanNulls(object[key])}$scope.notFound=!1,$scope.versions=[],$scope.CheckUserEditingRights=CheckUserEditingRights,$scope.editingRequestedSuccess=null,$scope.User=User,0==$stateParams.id.length&&$state.go("404"),$scope.topicNameClicked=function(topic){$state.go("search",{topic:topic.term})},$scope.functionNameClicked=function(functionName){$state.go("search",{operation:functionName.term})},$scope.inputNameClicked=function(inputName){$state.go("search",{input:inputName.data.term})},$scope.inputFormatNameClicked=function(formatName){$state.go("search",{input:formatName.term})},$scope.outputFormatNameClicked=function(formatName){$state.go("search",{output:formatName.term})},$scope.outputNameClicked=function(outputName){$state.go("search",{output:outputName.data.term})},$scope.toolsNameClicked=function(functionName){$state.go("search",{name:$scope.software.name})},$scope.publicationDetailsExist=function(){for(var index in $scope.software.publication)if(null!=$scope.software.publication[index].metadata)return!0;return!1};var initAltmetricsScore=function(){var script=document.createElement("script");script.type="text/javascript",script.src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js",document.body.appendChild(script)};$scope.altMetricsScorePublication=function(){var publication="";for(var index in $scope.software.publication){var publication=$scope.software.publication[index];if("Primary"==publication.type&&publication.doi){publication=publication;break}publication=publication}return publication},$scope.versionSelected=function(versionId){$state.go("tool",{id:$scope.software.id,version:versionId})},$scope.shouldLicenseBeALink=function(license){return!_.includes(["Proprietary","Other","Unlicensed"],license)},$scope.setMetadataForSoftware=function(software){ngMeta.setTitle(software.name," 路 bio.tools"),ngMeta.setTag("description",software.description),ngMeta.setTag("og:title",software.name),ngMeta.setTag("og:description",software.description)},$scope.software=Tool.get($stateParams,function(response){initAltmetricsScore(),cleanNulls($scope.software),$scope.setMetadataForSoftware($scope.software),$timeout(function(){window.OpEB_widgets.OpEB.apply()},100)},function(response){404==response.status&&($scope.notFound=!0)}),$scope.requestOwnership=function(resourceId){$scope.ownershipRequestedSuccess=null,ResourceRequestProvider.requestOwnership(resourceId).then(function(response){$scope.ownershipRequestedSuccess=!0},function(response){$scope.ownershipRequestedSuccess=!1})},$scope.requestEditing=function(resourceId){$scope.editingRequestedSuccess=null,ResourceRequestProvider.requestEditingRights(resourceId).then(function(response){$scope.editingRequestedSuccess=!0},function(response){$scope.editingRequestedSuccess=!1})}}]).directive("publicationDetailCallout",function(){return{restrict:"A",templateUrl:"components/toolPage/partials/publicationDetailCallout.html"}}).directive("toolPageLinkCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){return'<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';"><div class="tool-page-callout-header" style="color: black;"><a href="'+attr.url+'" tooltips tooltip-side="top" tooltip-content="'+attr.url+'">'+attr.name+'  </a><i ng-show="'+attr.toshow+'" class="fa fa-question-circle" aria-hidden="true" style="font-size: 100%; margin-left: 0.5em; color: '+attr.color+';" tooltips tooltip-side="top" tooltip-content="'+attr.comment+'"></i></div></div>'},replace:!0}}).directive("toolPagePublicationCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+'">';return callout+='<span ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{::'+attr.name+"}}<br>",callout+="</span>",callout+='<span ng-show="'+attr.pmcid+'"><a href="http://www.ncbi.nlm.nih.gov/pmc/{{::'+attr.pmcid+'}}">PMC  </a>',callout+='<span ng-show="'+attr.pmid+" || "+attr.doi+' " style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.pmid+'"><a href="http://www.ncbi.nlm.nih.gov/pubmed/{{::'+attr.pmid+'}}">PUBMED  </a><span class="pull-right">Cited by <a href=" http://europepmc.org/search?query=CITES%3A{{::'+attr.pmid+'}}_MED" class="fa fa-external-link" style="padding-top: 3px; text-color='+attr.color+';" aria-hidden="true"></a></span></span>',callout+='<span ng-show="('+attr.pmid+" || "+attr.pmcid+") && "+attr.doi+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.doi+'"><a href="https://dx.doi.org/{{::'+attr.doi+'}}">DOI  </a></span>',callout+="</div>"},replace:!0}}).directive("toolPageContactCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';">';return callout+='<div ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{::'+attr.name+"}}</div>",callout+='<div class="tool-page-callout-text">',callout+='<span ng-show="'+attr.phone+'">{{::'+attr.phone+"}}",callout+='<span ng-show="'+attr.email+" || "+attr.url+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.email+'"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{'+attr.email+".replace('@', ' at ') }}",callout+='<span ng-show="'+attr.url+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.url+'"><a href="{{::'+attr.url+'}}">Link  </a></span>',callout+="</div>",callout+="</div>"},replace:!0}}).directive("toolPageCreditCallout",function(){return{restrict:"A",transclude:!0,template:function(elem,attr){var callout='<div class="bs-callout-sm bs-callout-primary" style="border-left-color: '+attr.color+';">';return callout+='<div ng-show="'+attr.name+'" class="tool-page-callout-header" style="color: black;">{{'+attr.name+"}}",callout+='<i ng-show="'+attr.toshow+'" class="fa fa-question-circle" aria-hidden="true" style="font-size: 100%; margin-left: 0.5em; color: '+attr.color+';" tooltips tooltip-side="top" tooltip-content="'+attr.comment+'"></i>',callout+='<span ng-show="'+attr.typeentity+" && "+attr.typeentity+" != 'Person'\">",callout+='<span ng-show="'+attr.typeentity+'" style="color: #CCCCCC;"> | </span>',callout+='<span ng-show="'+attr.typeentity+'">{{'+attr.typeentity+"}}</span>",callout+="</div>",callout+='<div class="tool-page-callout-text">',callout+='<span ng-show="'+attr.typerole.count+' != 0" ng-repeat="role in '+attr.typerole+'">{{role}}{{$last ? "" : ", "}}',callout+='<span ng-show="'+attr.email+" || "+attr.url+" || "+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.email+'"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{'+attr.email+".replace('@', ' at ') }}",callout+='<span ng-show="'+attr.url+" || "+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.url+'"><a href="{{'+attr.url+'}}">Link  </a>',callout+='<span ng-show="'+attr.orcidid+" || "+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.orcidid+'">ORCID {{'+attr.orcidid+"}}",callout+='<span ng-show="'+attr.gridid+'" style="color: #CCCCCC;"> | </span></span>',callout+='<span ng-show="'+attr.gridid+'">GRIDID {{'+attr.gridid+"}}",callout+="</div>",callout+="</div>"},replace:!0}});
>>>>>>> feature/aligning_with_schema_3.0.0_dev
